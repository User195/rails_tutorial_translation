<!--
	Chapitre : 5
	Fichier  : filling-in-the-layout_fragment.html
-->

<h1 class="title">Tutorile Ruby on Rails </h1>


<h1 class="subtitle">  Apprendre Rails par l'exemple</h1>


<h2 class="author">Michael Hartl</h2>



<h1 class="contents">Contenu</h1>


<div id="table_of_contents"><ol>
<li class="chapter"><a href="beginning#top"><span class="number">Chapitre 1</span> De zéro au déploiement</a></li>
<li><ol>
<li class="section"><a href="beginning#sec:introduction"><span class="number">1.1</span> Introduction</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:comments_for_various_readers"><span class="number">1.1.1</span> Commentaires pour les lecteurs différents</a></li>
<li class="subsection"><a href="beginning#sec:1.1.2"><span class="number">1.1.2</span> &ldquo;Dimensionner&rdquo; Rails</a></li>
<li class="subsection"><a href="beginning#sec:conventions"><span class="number">1.1.3</span> Conventions utilisées dans ce livre</a></li></ol></li>
<li class="section"><a href="beginning#sec:up_and_running"><span class="number">1.2</span> [(Up and running)(En route pour le démarrage)]</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:development_tools"><span class="number">1.2.1</span> Environnements de développement</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:1.2.1.1">IDEs</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.2">Éditeurs de texte et lignes de commande</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.3">Navigateurs</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.4">Note à propos des outils</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:rubygems"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, et Git</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:rails_installer_windows">Installation de Rails (Windows)</a></li>
<li class="subsubsection"><a href="beginning#sec:install_git">Installer Git</a></li>
<li class="subsubsection"><a href="beginning#sec:install_ruby">Installer Ruby</a></li>
<li class="subsubsection"><a href="beginning#sec:install_rubygems">Installer RubyGems</a></li>
<li class="subsubsection"><a href="beginning#sec:install_rails">Installer Rails</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:the_first_application"><span class="number">1.2.3</span> La première application</a></li>
<li class="subsection"><a href="beginning#sec:bundler"><span class="number">1.2.4</span> Bundler</a></li>
<li class="subsection"><a href="beginning#sec:rails_server"><span class="number">1.2.5</span> <code>Le serveur rails (rails server)</code></a></li>
<li class="subsection"><a href="beginning#sec:mvc"><span class="number">1.2.6</span> Modèles-Vue-Contrôleur (MVC)</a></li></ol></li>
<li class="section"><a href="beginning#sec:version_control"><span class="number">1.3</span> Contrôle de versions avec Git</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:git_setup"><span class="number">1.3.1</span> Installation et réglages</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:1.3.1.1">Initialisation des réglages système</a></li>
<li class="subsubsection"><a href="beginning#sec:1.3.1.2">Initialisation des réglages du dépôt (repository)</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:adding_and_committing"><span class="number">1.3.2</span> Ajout et mandat de dépôt</a></li>
<li class="subsection"><a href="beginning#sec:1.3.3"><span class="number">1.3.3</span> Qu'est-ce que Git peut faire de bien pour vous&nbsp;?</a></li>
<li class="subsection"><a href="beginning#sec:github"><span class="number">1.3.4</span> GitHub</a></li>
<li class="subsection"><a href="beginning#sec:git_commands"><span class="number">1.3.5</span> Branch, edit, commit, merge</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:git_branch">Branch</a></li>
<li class="subsubsection"><a href="beginning#sec:git_edit">Edit</a></li>
<li class="subsubsection"><a href="beginning#sec:git_commit">Commit</a></li>
<li class="subsubsection"><a href="beginning#sec:git_merge">Merge</a></li>
<li class="subsubsection"><a href="beginning#sec:git_push">Push</a></li></ol></li></ol></li>
<li class="section"><a href="beginning#sec:deploying"><span class="number">1.4</span> Déploiement</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:1.4.1"><span class="number">1.4.1</span> Réglages Heroku</a></li>
<li class="subsection"><a href="beginning#sec:heroku_step_one"><span class="number">1.4.2</span> déploiement Heroku, première étape</a></li>
<li class="subsection"><a href="beginning#sec:1.4.3"><span class="number">1.4.3</span> Déploiement Heroku deployment, seconde étape</a></li>
<li class="subsection"><a href="beginning#sec:heroku_commands"><span class="number">1.4.4</span> Commandes Heroku</a></li></ol></li>
<li class="section"><a href="beginning#sec:beginning_conclusion"><span class="number">1.5</span> Conclusion</a></li></ol></li>
<li class="chapter"><a href="a-demo-app#top"><span class="number">Chapitre 2</span> Une application démo</a></li>
<li><ol>
<li class="section"><a href="a-demo-app#sec:planning_the_application"><span class="number">2.1</span> Planifier l'application</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:modeling_users"><span class="number">2.1.1</span> Modéliser les utilisateurs</a></li>
<li class="subsection"><a href="a-demo-app#sec:modeling_microposts"><span class="number">2.1.2</span> Modéliser les micro-messages</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:demo_users_resource"><span class="number">2.2</span> La ressource Utilisateurs (Users)</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:a_user_tour"><span class="number">2.2.1</span> Un tour de l'utilisateur</a></li>
<li class="subsection"><a href="a-demo-app#sec:mvc_in_action"><span class="number">2.2.2</span> MVC en action</a></li>
<li class="subsection"><a href="a-demo-app#sec:weaknesses_of_this_users_resource"><span class="number">2.2.3</span> Faiblesses de la ressource Utilisateurs (Users)</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:microposts_resource"><span class="number">2.3</span> La ressource Micro-messages (Microposts)</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:a_micropost_microtour"><span class="number">2.3.1</span> Un petit tour du micro-message</a></li>
<li class="subsection"><a href="a-demo-app#sec:putting_the_micro_in_microposts"><span class="number">2.3.2</span> Appliquer le <em>micro</em> aux micro-messages</a></li>
<li class="subsection"><a href="a-demo-app#sec:demo_user_has_many_microposts"><span class="number">2.3.3</span> Un utilisateur <code>has_many</code> (<code>possède plusieurs</code>) micro-messages</a></li>
<li class="subsection"><a href="a-demo-app#sec:inheritance_hierarchies"><span class="number">2.3.4</span> Hiérarchie des héritages</a></li>
<li class="subsection"><a href="a-demo-app#sec:deploying_the_demo_app"><span class="number">2.3.5</span> Déployer l'application Démo</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:2.4"><span class="number">2.4</span> Conclusion</a></li></ol></li>
<li class="chapter"><a href="static-pages#top"><span class="number">Chapitre 3</span> Pages statiques courantes</a></li>
<li><ol>
<li class="section"><a href="static-pages#sec:static_pages"><span class="number">3.1</span> Pages statiques</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:truly_static_pages"><span class="number">3.1.1</span> Pages HTML statiques</a></li>
<li class="subsection"><a href="static-pages#sec:static_pages_with_rails"><span class="number">3.1.2</span> Les pages statiques avec Rails</a></li></ol></li>
<li class="section"><a href="static-pages#sec:first_tests"><span class="number">3.2</span> Premiers tests</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:testing_tools"><span class="number">3.2.1</span> Outils de test</a></li>
<li><ol>
<li class="subsubsection"><a href="static-pages#sec:autotest">Auto-test</a></li></ol></li>
<li class="subsection"><a href="static-pages#sec:TDD"><span class="number">3.2.2</span> TDD : Rouge, Vert, Refactor</a></li>
<li><ol>
<li class="subsubsection"><a href="static-pages#sec:spork">Spork</a></li>
<li class="subsubsection"><a href="static-pages#sec:red">Rouge</a></li>
<li class="subsubsection"><a href="static-pages#sec:green">Vert</a></li>
<li class="subsubsection"><a href="static-pages#sec:refactor">Refactor</a></li></ol></li></ol></li>
<li class="section"><a href="static-pages#sec:slightly_dynamic_pages"><span class="number">3.3</span> Pages (un peu) dynamiques</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:testing_a_title_change"><span class="number">3.3.1</span> Test d'un changement de titre</a></li>
<li class="subsection"><a href="static-pages#sec:passing_title_tests"><span class="number">3.3.2</span> Réussir les tests de titre</a></li>
<li class="subsection"><a href="static-pages#sec:instance_variables_embedded_ruby"><span class="number">3.3.3</span> Variables d'instance et Ruby embarqué</a></li>
<li class="subsection"><a href="static-pages#sec:layouts"><span class="number">3.3.4</span> Supprimer les répétitions avec les <em>layouts</em></a></li></ol></li>
<li class="section"><a href="static-pages#sec:static_pages_conclusion"><span class="number">3.4</span> Conclusion</a></li>
<li class="section"><a href="static-pages#sec:static_pages_Exercices"><span class="number">3.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="rails-flavored-ruby#top"><span class="number">Chapitre 4</span> [(Rails-flavored Ruby)(Rails au goût Ruby)]</a></li>
<li><ol>
<li class="section"><a href="rails-flavored-ruby#sec:motivation"><span class="number">4.1</span> Motivation</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:title_helper"><span class="number">4.1.1</span> Un « helper » (« aideur ») pour le titre (<code>title</code>)</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:cascading_style_sheets"><span class="number">4.1.2</span> Feuilles de styles (CSS — Cascading Style Sheets)</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:strings_and_methods"><span class="number">4.2</span> Chaines de caractères et méthodes</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:comments"><span class="number">4.2.1</span> Commentaires</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:strings"><span class="number">4.2.2</span> Chaines de caractères</a></li>
<li><ol>
<li class="subsubsection"><a href="rails-flavored-ruby#sec:printing">Impression</a></li>
<li class="subsubsection"><a href="rails-flavored-ruby#sec:single_quoted_strings">Chaines de caractères « single-quoté »</a></li></ol></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:objects_and_message_passing"><span class="number">4.2.3</span> Objets et passage de message</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:method_definitions"><span class="number">4.2.4</span> Définition de méthode</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:back_to_the_title_helper"><span class="number">4.2.5</span> Retour à l'« helper » de titre</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:other_data_structures"><span class="number">4.3</span> Autres structures de données</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:arrays_and_ranges"><span class="number">4.3.1</span> Tableaux et rangs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:blocks"><span class="number">4.3.2</span> Blocs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:hashes_and_symbols"><span class="number">4.3.3</span> Tables de hachage et symboles</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:css_revisited"><span class="number">4.3.4</span> CSS revisitées</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:ruby_classes"><span class="number">4.4</span> Classes Ruby</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:constructors"><span class="number">4.4.1</span> Constructeurs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_class_of_our_own"><span class="number">4.4.2</span> Héritages de classes</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:modifying_built_in_classes"><span class="number">4.4.3</span> Modifier les classes d'origine</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_controller_class"><span class="number">4.4.4</span> Classe de contrôleur</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_user_class"><span class="number">4.4.5</span> Classe utiliateur</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:Exercices"><span class="number">4.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="filling-in-the-layout#top"><span class="number">Chapitre 5</span> Poursuivre la mise en page</a></li>
<li><ol>
<li class="section"><a href="filling-in-the-layout#sec:structure"><span class="number">5.1</span> Ajout de structure</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:adding_to_the_layout"><span class="number">5.1.1</span> Navigation du site</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:custom_css"><span class="number">5.1.2</span> Personnalisation CSS</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:partials"><span class="number">5.1.3</span> Partiels (Partials)</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_links"><span class="number">5.2</span> Liens pour la mise en page</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:integration_tests"><span class="number">5.2.1</span> Test d'intégration</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:rails_routes"><span class="number">5.2.2</span> Routes Rails</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:named_routes"><span class="number">5.2.3</span> Nommer les routes</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:user_signup"><span class="number">5.3</span> Inscription de l'utilisateur : une première étape</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:users_controller"><span class="number">5.3.1</span> Contrôleur Utilisateur (Users controller)</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:signup_url"><span class="number">5.3.2</span> URL d'inscription</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_conclusion"><span class="number">5.4</span> Conclusion</a></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_Exercices"><span class="number">5.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="modeling-and-viewing-users-one#top"><span class="number">Chapitre 6</span> Modéliser et afficher les utilisateurs, partie I</a></li>
<li><ol>
<li class="section"><a href="modeling-and-viewing-users-one#sec:user_model"><span class="number">6.1</span> Modèle utilisateur (User model)</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:database_migrations"><span class="number">6.1.1</span> Migrations de la base de données</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:the_model_file"><span class="number">6.1.2</span> Le fichier modèle</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:model_annotation">[(Model annotation)]</a></li>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:accessible_attributes">Attributs accessibles</a></li></ol></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:creating_user_objects"><span class="number">6.1.3</span> Créer des objets Utilisateur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:finding_user_objects"><span class="number">6.1.4</span> Recherche dans les objets Utilisateurs (Users)</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:updating_user_objects"><span class="number">6.1.5</span> Actualisation des objets Utilisateurs (Users)</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:user_validations"><span class="number">6.2</span> Validations utilisateur</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:presence_validation"><span class="number">6.2.1</span> Valider l'existence</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:length_validation"><span class="number">6.2.2</span> Valider la longueur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:format_validation"><span class="number">6.2.3</span> Valider le format</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:uniqueness_validation"><span class="number">6.2.4</span> Valider l'unicité</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:the_caveat">L'avertissement d'unicité</a></li></ol></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:viewing_users"><span class="number">6.3</span> Afficher les utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:rails_environments"><span class="number">6.3.1</span> Débuggage et environnements Rails</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:users_show"><span class="number">6.3.2</span> Modèle, Vue et Contrôleur Utilisateur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:a_users_resource"><span class="number">6.3.3</span> Ressource Utilisateurs</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:params_in_debug">[(<code>params</code> in <code>debug</code>)]</a></li></ol></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:6.4"><span class="number">6.4</span> Conclusion</a></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:6.5"><span class="number">6.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="modeling-and-viewing-users-two#top"><span class="number">Chapitre 7</span> Modéliser et afficher les utilisateurs, partie II</a></li>
<li><ol>
<li class="section"><a href="modeling-and-viewing-users-two#sec:insecure_passwords"><span class="number">7.1</span> Mots de passe non sûrs</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_validations"><span class="number">7.1.1</span> Valider le mot de passe</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_migration"><span class="number">7.1.2</span> Migrer un mot de passe</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_active_record_callback"><span class="number">7.1.3</span> Un <em>callback</em> de l'Active Record</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:secure_passwords"><span class="number">7.2</span> Sécuriser les mots de passe</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_secure_password_test"><span class="number">7.2.1</span> Test de mot de passe sûr</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:secure_password_theory"><span class="number">7.2.2</span> Un peu de théorie sur les mots de passe sécurisés</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:implementing_has_password"><span class="number">7.2.3</span> Implémenter la méthode <code>has_password?</code></a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_authenticate_method"><span class="number">7.2.4</span> Méthode d'authentification</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:better_user_views"><span class="number">7.3</span> Meilleures vues d'utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:tests_with_factories"><span class="number">7.3.1</span> Tester la page de l'utilisateur (avec factories)</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_name_and_a_gravatar"><span class="number">7.3.2</span> Un nom et un Gravatar</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-two#sec:a_gravatar_helper">Un « helper » de Gravatar</a></li></ol></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_user_sidebar"><span class="number">7.3.3</span> Une barre utilisateur latérale</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:7.4"><span class="number">7.4</span> Conclusion</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:7.4.1"><span class="number">7.4.1</span> Commit Git</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:heroku_deploy"><span class="number">7.4.2</span> Déploiement Heroku</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:more_modeling_users_Exercices"><span class="number">7.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="sign-up#top"><span class="number">Chapitre 8</span> Inscription</a></li>
<li><ol>
<li class="section"><a href="sign-up#sec:signup_form"><span class="number">8.1</span> Formulaire d'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:using_form_for"><span class="number">8.1.1</span> Utiliser  <code>form_for</code></a></li>
<li class="subsection"><a href="sign-up#sec:the_form_html"><span class="number">8.1.2</span> Le formulaire HTML</a></li></ol></li>
<li class="section"><a href="sign-up#sec:signup_failure"><span class="number">8.2</span> Échec de l'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:testing_failure"><span class="number">8.2.1</span> Test de l'échec</a></li>
<li class="subsection"><a href="sign-up#sec:a_working_form"><span class="number">8.2.2</span> Un formulaire fonctionnel</a></li>
<li class="subsection"><a href="sign-up#sec:signup_error_messages"><span class="number">8.2.3</span> Inscription&nbsp;: messages d'erreur</a></li>
<li class="subsection"><a href="sign-up#sec:filtering_parameter_logging"><span class="number">8.2.4</span> Filtrage des paramètres d'identification</a></li></ol></li>
<li class="section"><a href="sign-up#sec:signup_success"><span class="number">8.3</span> Succès de l'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:testing_success"><span class="number">8.3.1</span> Tester le succès de l'inscription</a></li>
<li class="subsection"><a href="sign-up#sec:the_finished_signup_form"><span class="number">8.3.2</span> Le formulaire d'inscription finalisé</a></li>
<li class="subsection"><a href="sign-up#sec:the_flash"><span class="number">8.3.3</span> Le message «&nbsp;flash&nbsp;»</a</a></li>
<li class="subsection"><a href="sign-up#sec:the_first_signup"><span class="number">8.3.4</span> La première inscription</a></li></ol></li>
<li class="section"><a href="sign-up#sec:rspec_integration_tests"><span class="number">8.4</span> Test d'intégration RSpec</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:integration_tests_with_style"><span class="number">8.4.1</span> Tests d'intégration avec les styles</a></li>
<li class="subsection"><a href="sign-up#sec:failed_signup"><span class="number">8.4.2</span> Un échec d'inscription ne devrait pas créer un nouvel utilisateur</a></li>
<li class="subsection"><a href="sign-up#sec:successful_signup"><span class="number">8.4.3</span> Le succès d'une inscription devrait créer un nouvel utilisateur</a></li></ol></li>
<li class="section"><a href="sign-up#sec:8.5"><span class="number">8.5</span> Conclusion</a></li>
<li class="section"><a href="sign-up#sec:signup_Exercices"><span class="number">8.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="sign-in-sign-out#top"><span class="number">Chapitre 9</span> Connexion, déconnexion</a></li>
<li><ol>
<li class="section"><a href="sign-in-sign-out#sec:sessions"><span class="number">9.1</span> Les sessions</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:sessions_controller"><span class="number">9.1.1</span> Le contrôleur de session</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_form"><span class="number">9.1.2</span> Formulaire d'identification</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signin_failure"><span class="number">9.2</span> Échec de l'identification</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:reviewing_form_submission"><span class="number">9.2.1</span> Examen de la soumission du formulaire</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:failed_signin"><span class="number">9.2.2</span> Échec de l'identification (test et code)</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signin_success"><span class="number">9.3</span> Succès de l'identification</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:the_completed_create_action"><span class="number">9.3.1</span> L'action <code>create</code> («&nbsp;créer&nbsp;») finalisée</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:remember_me"><span class="number">9.3.2</span> Se souvenir de moi</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:current_user"><span class="number">9.3.3</span> Utilisateur courant</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signing_out"><span class="number">9.4</span> Déconnexion</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:destroying_sessions"><span class="number">9.4.1</span> Détruire la session</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_upon_signup"><span class="number">9.4.2</span> Connection à l'inscription</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:changing_the_layout_links"><span class="number">9.4.3</span> Changement des liens de la mise en plage</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_out_integration_tests"><span class="number">9.4.4</span> Test d'intégration de l'identification/déconnexion</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:9.5"><span class="number">9.5</span> Conclusion</a></li>
<li class="section"><a href="sign-in-sign-out#sec:sign_in_out_Exercices"><span class="number">9.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="updating-showing-and-deleting-users#top"><span class="number">Chapitre 10</span> Actualiser, afficher et supprimer de l'utilisateur</a></li>
<li><ol>
<li class="section"><a href="updating-showing-and-deleting-users#sec:updating_users"><span class="number">10.1</span> Actualiser l'utilisateur</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:edit_form"><span class="number">10.1.1</span> Formulaire de modification</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:enabling_edits"><span class="number">10.1.2</span> Permettre les modifications</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:protecting_pages"><span class="number">10.2</span> Protéger les pages</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_signed_in_users"><span class="number">10.2.1</span> Utilisateurs identifiés requis</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_the_right_user"><span class="number">10.2.2</span> Nécessité du bon utilisateur</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:friendly_forwarding"><span class="number">10.2.3</span> Redirection conviviale</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:showing_users"><span class="number">10.3</span> Afficher les utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:user_index"><span class="number">10.3.1</span> Liste des utilisateurs</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:sample_users"><span class="number">10.3.2</span> Exemples d'utilisateurs</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:pagination"><span class="number">10.3.3</span> Pagination</a></li>
<li><ol>
<li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:testing_pagination">Test de la pagination</a></li></ol></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:partial_refactoring"><span class="number">10.3.4</span> Restructuration des partielles</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:destroying_users"><span class="number">10.4</span> Supprimer des utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:administrative_users"><span class="number">10.4.1</span> Utilisateurs administrateurs</a></li>
<li><ol>
<li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:revisiting_attr_accessible">Révision de <code>attr_accessible</code></a></li></ol></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:the_destroy_action"><span class="number">10.4.2</span> L'action <code>destroy</code> («&nbsp;supprimer&nbsp;»)</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:10.5"><span class="number">10.5</span> Conclusion</a></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:updating_deleting_Exercices"><span class="number">10.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="user-microposts#top"><span class="number">Chapitre 11</span> Micro-messages d'utilisateur</a></li>
<li><ol>
<li class="section"><a href="user-microposts#sec:a_micropost_model"><span class="number">11.1</span> Le modèle Micropost («&nbsp;Micro-message&nbsp;»)</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:the_basic_model"><span class="number">11.1.1</span> Le modèle initial</a></li>
<li><ol>
<li class="subsubsection"><a href="user-microposts#sec:accessible_attribute">Attributs accessibles</a></li></ol></li>
<li class="subsection"><a href="user-microposts#sec:user_micropost_associations"><span class="number">11.1.2</span> Associations Utilisateur/micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:ordering_and_dependency"><span class="number">11.1.3</span> Affinements du micro-message</a></li>
<li><ol>
<li class="subsubsection"><a href="user-microposts#sec:default_scope">Portée par défaut</a></li>
<li class="subsubsection"><a href="user-microposts#sec:dependent_destroy">Dependent: destroy (dépendances de la suppression)</a></li></ol></li>
<li class="subsection"><a href="user-microposts#sec:micropost_validations"><span class="number">11.1.4</span> Validations du micro-message</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:showing_microposts"><span class="number">11.2</span> Afficher les micro-messages</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:augmenting_the_user_show_page"><span class="number">11.2.1</span> Etoffement de la page de l'utilisateur</a></li>
<li class="subsection"><a href="user-microposts#sec:sample_microposts"><span class="number">11.2.2</span> Exemples de micro-messages</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:manipulating_microposts"><span class="number">11.3</span> Manipuler les micro-messages</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:access_control"><span class="number">11.3.1</span> Contrôle de l'accès</a></li>
<li class="subsection"><a href="user-microposts#sec:creating_microposts"><span class="number">11.3.2</span> Créer des micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:a_proto_feed"><span class="number">11.3.3</span> Une proto-alimentation</a></li>
<li class="subsection"><a href="user-microposts#sec:destroying_microposts"><span class="number">11.3.4</span> Supprimer des micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:testing_the_new_home_page"><span class="number">11.3.5</span> Test de la nouvelle page d'accueil</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:11.4"><span class="number">11.4</span> Conclusion</a></li>
<li class="section"><a href="user-microposts#sec:micropost_Exercices"><span class="number">11.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="following-users#top"><span class="number">Chapitre 12</span> Suivi des utilisateurs</a></li>
<li><ol>
<li class="section"><a href="following-users#sec:the_relationship_model"><span class="number">12.1</span> Le modèle Relation (Relationship model)</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:a_problem_with_the_data_model"><span class="number">12.1.1</span> Un problème du modèle de données (et sa solution)</a></li>
<li class="subsection"><a href="following-users#sec:relationship_user_associations"><span class="number">12.1.2</span> Associations Utilisateur/Relations</a></li>
<li class="subsection"><a href="following-users#sec:relationship_validations"><span class="number">12.1.3</span> Validations</a></li>
<li class="subsection"><a href="following-users#sec:following"><span class="number">12.1.4</span> Auteurs suivis</a></li>
<li class="subsection"><a href="following-users#sec:followers"><span class="number">12.1.5</span> Lecteurs</a></li></ol></li>
<li class="section"><a href="following-users#sec:a_web_interface_for_following_and_followers"><span class="number">12.2</span> Une interface web pour les auteurs suivis et les lecteurs</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:sample_following_data"><span class="number">12.2.1</span> Exemple de donnée de suivi</a></li>
<li class="subsection"><a href="following-users#sec:stats_and_a_follow_form"><span class="number">12.2.2</span> Statistiques et formulaire de suivi</a></li>
<li class="subsection"><a href="following-users#sec:following_and_followers_pages"><span class="number">12.2.3</span> Pages d'auteurs suivis et de lecteurs</a></li>
<li class="subsection"><a href="following-users#sec:a_working_follow_button_the_standard_way"><span class="number">12.2.4</span> Un bouton de suivi fonctionnant de façon standard</a></li>
<li class="subsection"><a href="following-users#sec:a_working_follow_button_with_ajax"><span class="number">12.2.5</span> Un bouton fonctionnant avec Ajax</a></li></ol></li>
<li class="section"><a href="following-users#sec:the_status_feed"><span class="number">12.3</span> L'état de l'alimention</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:motivation_and_strategy"><span class="number">12.3.1</span> Motivation et stratégie</a></li>
<li class="subsection"><a href="following-users#sec:a_first_feed_implementation"><span class="number">12.3.2</span> Une première implémentation de peuplement</a></li>
<li class="subsection"><a href="following-users#sec:scopes_subselects_and_a_lambda"><span class="number">12.3.3</span> Portées, sous-requêtes et fonction <em>lambda</em></a></li>
<li class="subsection"><a href="following-users#sec:the_new_status_feed"><span class="number">12.3.4</span> Nouvel état de l'alimentation</a></li></ol></li>
<li class="section"><a href="following-users#sec:following_conclusion"><span class="number">12.4</span> Conclusion</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:extensions_to_the_sample_application"><span class="number">12.4.1</span> Extensions de l'application exemple</a></li>
<li><ol>
<li class="subsubsection"><a href="following-users#sec:replies">Réponses</a></li>
<li class="subsubsection"><a href="following-users#sec:messaging">Notification</a></li>
<li class="subsubsection"><a href="following-users#sec:follower_notifications">Notifications aux lecteurs</a></li>
<li class="subsubsection"><a href="following-users#sec:password_reminders">Rappel du mot de passe</a></li>
<li class="subsubsection"><a href="following-users#sec:signup_confirmation">Confirmation d'inscription</a></li>
<li class="subsubsection"><a href="following-users#sec:rss_feed">Alimentation RSS</a></li>
<li class="subsubsection"><a href="following-users#sec:rest_api">REST API</a></li>
<li class="subsubsection"><a href="following-users#sec:search">Recherche</a></li></ol></li>
<li class="subsection"><a href="following-users#sec:guide_to_further_resources"><span class="number">12.4.2</span> Guide vers d'autres ressources</a></li></ol></li>
<li class="section"><a href="following-users#sec:following_Exercices"><span class="number">12.5</span> Exercices</a></li></ol></li></ol></div>

<div id="main_content"></div>

<p> <span class="preamble">
 <span id="foreword">
<strong> Avant-propos</strong> <br />
 </span>
 </span></p>

<p>Ma précédente compagnie (CD Baby) fut une des premières à basculer complètement vers Ruby on Rails, et à rebasculer aussi complètement vers PHP (googlez-moi pour prendre la mesure du drama). Ce livre de Michael Hartl m'est arrivé avec tant de recommandation que je ne pouvais faire autrement que de le lire. C'est ainsi que <em>Ruby on Rails Tutorial</em> m'a fait retourner à Rails à nouveau </p>
<p>Bien qu'ayant parcouru de nombreux livre sur Rails, c'est celui qui m'a fait vraiment &ldquo;posséder&rdquo; Rails. Tout est fait “à la manière de Rails” —&nbsp;une manière qui ne me semblait pas naturelle avant avant d'avoir terminer ce livre. C'est aussi le seul livre sur Rails qui opère un Développement conduit par le test (“test-driven development”) d'un bout à l'autre, une approche hautement recommandée par les experts mais qui n'a jamais été aussi démontrée avant. Enfin, en incluant Git, GitHub et Heroku dans les exemples en démonstration, l'auteur vous donne vraiment le goût de ce que c'est que faire un projet dans la vraie vie. Les exemples de code du tutoriel ne sont pas de reste.</p> 
	
<p>La narration linéaire est vraiment un bon format. Personnellement, j'ai étudié <em>Le Tutoriel Rails</em> en trois longues journées, en faisant tous les exemples et les exercices proposés à la fin de chaque chapitre. Lisez du début à la fin, en ne sautant aucune partie, et vous en tirerez tout le bénéfice.</p>

<p>Régalez-vous&nbsp;!</p>

<p><a href="http://sivers.org/">Derek Sivers</a> (<a href="http://sivers.org/">sivers.org</a>) <br />
<em>Précédemment&nbsp;: Fondateur de </em> <a href="http://www.cdbaby.com/"><em>CD Baby</em></a> <br />
<em>Actuellement&nbsp;: Fondateur de </em> <a href="http://thoughts.pro/"><em>Thoughts Ltd.</em></a> <br /></p>

<p> <span class="preamble">
<strong> Remerciements</strong> <br />
 </span></p>

<p>Ce <em>Tutoriel Ruby on Rails</em> doit beaucoup à mon livre précédent sur Rails, <em>RailsSpace</em>, et donc à mon co-auteur <a href="http://aure.com/">Aurelius Prochazka</a>. J'aimerais remercier Aure à la fois pour le travail qu'il a accompli sur ce précédent livre et pour son soutien pour le présent ouvrage. J'aimerais aussi remercier Debra Williams Cauley, mon éditeur pour les deux ouvrages&nbsp;; aussi longtemps qu'[elle me prendra au baseball][she keeps taking me to baseball games], je continuerai d'écrire des livres pour elle.</p>

<p>J'aimerais remerciement une longue liste de Rubyistes qui m'ont parlé et inspiré au cours des années&nbsp;; David Heinemeier Hansson, Yehuda Katz, Carl Lerche, Jeremy Kemper, Xavier Noria, Ryan Bates, Geoffrey Grosenbach, Peter Cooper, Matt Aimonetti, Gregg Pollack, Wayne&nbsp;E. Seguin, Amy Hoy, Dave Chelimsky, Pat Maddox, Tom Preston-Werner, Chris Wanstrath, Chad Fowler, Josh Susser, Obie Fernandez, Ian McFarland, Steven Bristol, Giles Bowkett, Evan Dorn, Long Nguyen, James Lindenbaum, Adam Wiggins, Tikhon Bernstam, Ron Evans, Wyatt Greene, Miles Forrest, les gens bien de Pivotal Labs, le gang Heroku, les mecs de thoughtbot, et l'équipe de GitHub. Enfin, tellement, tellement, tellement de lecteurs —&nbsp;beaucoup trop pour les citer tous&nbsp;— qui ont contribuer par leur rapport de bogues et leurs suggestions durant l'écriture de ce livre, et je tiens à saluer leur aide pour rendre ce livre aussi bon qu'il pouvait être. <br /></p>

<p> <span class="preamble">
 <span id="author">
<strong> À propos de l'auteur</strong> <br />
 </span>
 </span></p>

<p><a href="http://michaelhartl.com/">Michael Hartl</a> est programmeur, éducateur et entrepreneur. Il est le co-auteur de <em>RailsSpace</em>, un tutoriel Rails [qui s'est bien vendu] publié en 2007, et a été co-fondateur et développeur en chef de <a href="http://insoshi.com/">Insoshi</a>, une plateforme de réseau social <a href="http://github.com/popular/forked">populaire</a> en Ruby on Rails. Précédement, il a enseigné la théorie et [l'application informatique][computational physics] en physique au <a href="http://www.caltech.edu/">California Institute of Technology</a> (Caltech), où il a reçu le Lifetime Achievement Award for Excellence en enseignement. Michael est diplômé du <a href="http://college.harvard.edu/">Harvard College</a>, a un <a href="http://resolver.caltech.edu/CaltechETD:etd-05222003-161626">Ph.D. en physique</a> (NdT. Un doctorat) de <a href="http://www.caltech.edu/">Caltech</a>, et est ancien élève du programme   des entrepreneurs <a href="http://ycombinator.com/">Y&nbsp;Combinator</a>. <br /></p>

<p> <span id="license" class="preamble">
<strong> Copyright et license</strong> <br />
 </span></p>

<p><em>Le Tutoriel Ruby on Rails&nbsp;: apprendre Rails par l'exemple</em>. Copyright &copy; 2010 par Michael Hartl. Tout le code source du <em>Tutoriel Ruby on Rails</em> est disponible sour la license <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> et la licence <a href="http://en.wikipedia.org/wiki/Beerware">Beerware License</a>.</p>

<pre class="verbatim">   Copyright (c) 2010 Michael Hartl

   [La permission est accordée ici, à titre gratuit, à toute
   personne obtenant une copie de ce logiciel et sa documentation
   associés (le “Software”), 
   Permission is hereby granted, free of charge, to any person
   obtaining a copy of this software and associated documentation
   files (the &quot;Software&quot;), de traiter dans le Software
   sans restriction, d'inclure sans limitation de droits à utiliser,
   copier, modifier, ajouter, publier, distribuer, sous-licensier,
   et/ou vendre des copies de ce Software, et de permettre au gens
   à qui ce Software est fourni d'en faire de même, assujetti aux
   conditions suivantes&nbsp;:

   La note de copyright ci-dessous et cette notice de permission
   doivent être inclues à toute copie ou portion substantielle
   du logiciel.

   LE LOGICIEL EST FOURNI “TEL QUEL”, SANS AUCUNE GARANTIE D'AUCUNE
   ESPÈCE, ESPRESSE OU IMPLICITE, INCLUANT MAIS NE LIMITANT PAS LES
   GARANTIES MARCHANDES, À PROPOS D'UN BUT PARTICULIER ET ABSENCE
   DE CONTREFAÇON. EN AUCUN CAS LES AUTEURS OU LES DÉTENTEURS DU 
   COPYRIGHT NE POURRONT ÊTRE TENUS RESPONSABLE DE DOMMAGE OU AUTRE
   RESPONSABILITÉ, SI EN UNE ACTION DE CONTRAT, TORT OU AUTREMENT,
   DÉCOULANT DIRECTEMENT OU INDIRECTEMENT DE L'UTILISATION OU DE LA
   MODIFICATION DE CE LOGICIEL.]</pre>




<pre class="verbatim">/*
 * ------------------------------------------------------------
 * &quot;THE BEERWARE LICENSE&quot; (Revision 42):
 * Michael Hartl a écrit ce code. Aussi longtemps que vous
 * conservez cette note, vous pouvez faire ce que vous voulez
 * de ce travail. Si nous nous rencontrons un jour, et que vous
 * pensez que ce travail en vaut la peine, vous pourrez me
 * payer une bière en retour.
 * ------------------------------------------------------------
 */</pre>




<div id="top"></div>


<h1 class="chapter"><a id="sec:5" href="filling-in-the-layout#top" class="heading"><span class="number">Chapitre 5</span> Poursuivre la mise en page</a></h1>


<p>Dans le but de faire un bref tour de Ruby au <a class="ref" href="rails-flavored-ruby#top">chapitre&nbsp;4</a>, nous avons ajouté quelques feuilles de styles en cascade à la mise en page de notre site (<a class="ref" href="rails-flavored-ruby#sec:cascading_style_sheets">section&nbsp;4.1.2</a>). Dans ce chapitre, nous allons ajouter quelques styles de notre cru, tout en ajoutant à notre charte des liens vers certaines pages (telles que la page Accueil ou la page À Propos) que nous avons créées précédemment. Chemin faisant, nous apprendrons des choses sur les <em>partiels</em> (<em>partials</em>), le routage Rails et les tests d'intégration. Nous terminerons en passant une importante étape&nbsp;: permettre à nos utilisateurs de s'inscrire sur notre site.</p>

<div class="label" id="sec:structure"></div>


<h2><a id="sec:5.1" href="filling-in-the-layout#sec:structure" class="heading"><span class="number">5.1</span> Ajout de structure</a></h2>


<p>Ce <em>Tutoriel Rails</em> est un livre sur le développement web, pas sur le design web, mais ce serait un peu déprimant de travailler sur un site d'application serait une pouillerie, donc dans cette section nous allons structurer un peu notre mise en page et lui donner un minimum de style avec les CSS. Nous donnerons aussi du style à notre <em>code</em>, pour ainsi dire, en utilisant les <em>partiels</em> (<em>partials</em>) pour mieux organiser le layout une fois qu'il devient un peu trop encombré.</p>

<p>Quand on construit des applications web, il est souvent utile d'avoir le plus tôt possible un aperçu général de l'interface de l'utilisateur. Tout au long de la suite de ce libre, j'ajouterai donc des <em>maquettes</em> (appelées aussi <em>wireframes</em> dans le contexte du web), qui sont des croquis de ce à quoi pourra ressembler l'application.<sup class="footnote" id="fnref:5.1"><a href="#fn:5.1">1</a></sup> Dans ce chapitre, nous développerons principalement les pages statiques introduites à la <a class="ref" href="static-pages#sec:static_pages">section&nbsp;3.1</a>, en incluant un logo du site, une entête de navigation et un pied de page. Une maquette pour la plus importante de ces pages (Vraiment&nbsp;? NdT), la page d'accueil, est présentée dans l'<a class="ref" href="filling-in-the-layout#fig:home_page_mockup">illustration&nbsp;5.1</a> (vous pouvez voir le résultat final dans l'<a class="ref" href="filling-in-the-layout#fig:site_with_footer">illustration&nbsp;5.8</a>. Vous noterez qu'elle différe en quelques détails &mdash;&nbsp;par exemple, le pied de page contient quatre liens au lieu de trois&nbsp;&mdash; mais ça ne pose pas de problème, puisque une maquette n'a pas à être exacte).</p>

<div class="label" id="fig:home_page_mockup"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/home_page_mockup.png" alt="home_page_mockup" /></span></div><div class="caption"><span class="header">Illustration 5.1: </span><span class="description">Une maquette de la page Accueil de l'application exemple.&nbsp;<a href="http://railstutorial.org/images/figures/home_page_mockup-full.png">(taille normale)</a></span></div></div>


<p>Comme d'habitude, si vous utilisez Git pour le contrôle de version, ce serait une bonne chose de créer une nouvelle branche&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b filling-in-layout
</pre></div>
</div>


<p>Vous pouvez avoir encore le fichier <code>example_user.rb</code> du <a class="ref" href="rails-flavored-ruby#top">chapitre&nbsp;4</a> dans le dossier de votre projet, si c'est le cas, vous devriez peut-être le supprimer.</p>

<div class="label" id="sec:adding_to_the_layout"></div>


<h3><a id="sec:5.1.1" href="filling-in-the-layout#sec:adding_to_the_layout" class="heading"><span class="number">5.1.1</span> Navigation</a></h3>


<p>La dernière fois que nous avons vu le layout du site <code>application.html.erb</code> dans l'<a class="ref" href="rails-flavored-ruby#code:application_layout_full_title">extrait&nbsp;4.3</a>, nous venions juste d'ajouter les feuilles de styles Blueprint en utilisant l'helper Rail <code>stylesheet_link_tag</code>. Il est temps d'ajouter un certains nombre de style, un tout spécialement pour le navigateur Internet Explorer et un pour notre fichier CSS personnalisé et bientôt ajouté. Nous ajouterons aussi quelques divisions (<code>div</code>), quelques identifiants <code>id</code> et quelques classes <code>class</code>, et le départ du matériel de navigation de notre site. Le fichier complet est présenté dans l'<a class="ref" href="filling-in-the-layout#code:layout_new_structure">extrait&nbsp;5.1</a>&nbsp;; les explications des différentes parties suit l'extrait. Si vous préférez ne pas remettre à plus tard votre plaisir, vous pouvez voir le résultat dans l'<a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">illustration&nbsp;5.2</a> (<em>Note&nbsp;:</em> pour tout dire, ça n'est pas encore très gratifiant).</p>

<div class="label" id="code:layout_new_structure"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.1.</span> <span class="description">Le layout du site avec la structure ajouté. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">    &lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">    &lt;![endif]--&gt;</span>    
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/screen&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/print&#39;</span><span class="p">,</span>  <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;print&#39;</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;header&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Simple application&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Inscription&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/nav&gt;</span>
      <span class="nt">&lt;/header&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Jetons un coup d'œil aux nouveaux éléments en commençant par le haut. Comme noté brièvement à la <a class="ref" href="static-pages#sec:static_pages">section&nbsp;3.1</a>, Rails&nbsp;3 utilise HTML5 par défaut (comme le doctype <code>&lt;!DOCTYPE html&gt;</code> l'indique)&nbsp;; puisque le standard HTML5 est récent, certains navigateurs (spécialement Internet Explorer) ne le supportent pas encore complètement, donc nous incluons un peu de code JavaScript (connu comme un &ldquo;<a href="http://code.google.com/p/html5shiv/">HTML5 shiv</a>&rdquo;) pour contourner ce problème&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>


<p>La syntaxe quelque peu bizarre&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
</pre></div>
</div>


<p>… inclut les lignes entre les balises <code>&lt;!--</code> et <code>--&gt;</code> que si la version d'Internet Explorer&nbsp;(IE) est inférieur à la version 9 (<code>if lt IE 9</code>). La syntaxe bizarre <code>[if lt IE 9]</code> <em>n'est pas</em> une partie de Rails&nbsp;; C'est en réalité un <a href="http://en.wikipedia.org/wiki/Conditional_comment">commentaire conditionnel</a> supporté par les navigateurs IE pour ce genre de situation. C'est une bonne chose, aussi, parce que cela signifie que nous pouvons inclure la feuille de style supplémentaire <em>seulement</em> pour les versions d'IE inférieures à 9, laissant les autres navigateurs tels que Firefox, Chrome ou Safari non affectés.</p>

<p>Après les lignes pour inclure la feuille de style Blueprint (introduite dans l'<a class="ref" href="rails-flavored-ruby#code:layout_with_stylesheets">extrait&nbsp;4.4</a>), il y a une autre ligne spécifique à IE &ndash;&nbsp;ligne spécifique qui cette fois inclue une feuille de style si la version de IE est inférieur à&nbsp;8 (<code>if lt IE 8</code>):</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>


<p>IE possède un grand nombre de comportements prores (spécialement avant la version&nbsp;8) et Blueprint est fourni avec un fichier <code>ie.css</code> spécial qui fixe un certain nombre de ces problèmes.</p>

<p>Après la feuille de style IE vient un lien pour une feuille de style qui n'existe pas encore, <code>custom.css</code>, où nous coderons nos styles personnalités&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>CSS est très conciliant, et même si le fichier n'existe pas encore notre page fonctionnera quand même bien (nous créerons le fichier <code>custom.css</code> à la <a class="ref" href="filling-in-the-layout#sec:custom_css">section&nbsp;5.1.2</a>.)</p>

<p>La prochaine section place un conteneur <em>div</em> autour des éléments de navigation et de contenu de notre site, ce qui consiste en une balise <code>div</code> de classe (<em>class</em>) <code>container</code>. Ce conteneur div est demandé par Blueprint (voyez le <a href="http://wiki.github.com/joshuaclayton/blueprint-css/quick-start-tutorial">tutoriel Blueprint</a> pour plus d'information). Viennent ensuite les éléments <code>header</code> et <code>section</code>&nbsp;; le <em>header</em> (<em>entête</em>) contient le logo de l'application (qui sera ajouté plus tard) et les éléments de navigation du site (<code>nav</code>). Enfin, on trouve un élément <code>section</code> contenant le contenu principal du site&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;header&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Application exemple&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Inscription&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
  <span class="nt">&lt;/header&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>


<p>La balise <code>div</code>, en HTML, est une division générique&nbsp;; ça ne fait rien à part diviser le document en parties distinctes. Dans le vieux style HTML, les tables <code>div</code> sont utilisés pour presque toutes les divisions, mais HTML5 ajoute les éléments <code>header</code>, <code>nav</code> et <code>section</code> pour les divisions communes à beaucoup d'applications. On peut assigner des <em>classes</em> (<code>class</code>) et <em>identifiant</em> (<code>id</code>) à tous les éléments HTML, incluant les divs et les nouveaux éléments HTML5, <sup class="footnote" id="fnref:5.2"><a href="#fn:5.2">2</a></sup>&nbsp;; ce sont simplement des labels, et sont utiles pour styliser avec CSS (<a class="ref" href="filling-in-the-layout#sec:custom_css">section&nbsp;5.1.2</a>). La différence principale entre les <em>class</em> et <em>id</em> réside dans le fait que les classes peuvent être utilisés plusieurs fois avec que les identifiants, par essence, sont uniques dans la page.</p>

<p>Dans le <em>header</em> se trouve un <em>helper</em> Rails appelé <code>image_tag</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Application exemple&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>Notez que, comme avec <code>stylesheet_link_tag</code> (<a class="ref" href="rails-flavored-ruby#sec:css_revisited">section&nbsp;4.3.4</a>), nous passons une table d'options, dans ce cas définissant les attribuets <code>alt</code> et <code>class</code> de la balise image en utilisant les symboles <code>:alt</code> et <code>:class</code>. Pour rendre cela plus clair, regardons ce que cette balise produit en HTML&nbsp;:<sup class="footnote" id="fnref:5.3"><a href="#fn:5.3">3</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">&quot;Application exemple&quot;</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span> <span class="na">src=</span><span class="s">&quot;/images/logo.png&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>


<p>L'attribut <code>alt</code> est ce qui sera affiché si l'image est introuvable,<sup class="footnote" id="fnref:5.4"><a href="#fn:5.4">4</a></sup> and the class will be used for styling in <a class="ref" href="filling-in-the-layout#sec:custom_css">section&nbsp;5.1.2</a>.(les <em>helpers</em> Rails prennent souvent des tables d'options comme celle-ci, nous offrant la flexibilité d'ajouter des options HTML arbitraire sans jamais quitter Rails). Vous pouvez voir le résultat dans l'<a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">illustration&nbsp;5.2</a>&nbsp;; nous ajouterons l'image du logo à la fin de cette section.</p>

<p>Le second élément à l'intérieur de l'header du layout est une liste de liens pour la navigatio, construits en utilisant une balise de <em>liste non ordonnée</em> <code>ul</code>, avec des balises d'<em>item</em> <code>li</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Inscription&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>Cette liste utilise l'<em>helper</em> Rails <code>link_to</code> pour créer des liens (que vous avons créés directement avec la balise ancre <code>a</code> à la <a class="ref" href="static-pages#sec:passing_title_tests">section&nbsp;3.3.2</a>)&nbsp;; le premier argument est le texte du lien et le second est l'URL du lien. Nous définirons les URLs avec <em>noms de route</em> à la <a class="ref" href="filling-in-the-layout#sec:named_routes">section&nbsp;5.2.3</a>, mais pour le moment nous utilisons l'URL souche <code>&rsquo;#&rsquo;</code> utilisé couramment en design web. Une fois que Rails a exécuté ce layout et évalué le code Ruby embarqué, la list ressemble à&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Accueil<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Aide<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Inscription<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>Notre layout est maintenant achevé, et nous pouvons regarder le résultat en visitant, par exemple, la page d'accueil. En anticipant l'ajout d'utilisateur à notre site au <a class="ref" href="sign-up#top">chapitre&nbsp;8</a>, ajoutons un lien d'inscription à la vue <code>home.html.erb</code> (<a class="ref" href="filling-in-the-layout#code:signup_button">extrait&nbsp;5.2</a>).</p>

<div class="label" id="code:signup_button"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.2.</span> <span class="description">Une page d'accueil avec un lien d'inscription. <br /> <code>app/views/pages/home.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Application exemple<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
  C'est la page d'accuile pour l'application exemple du
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Tutoriel Ruby on Rails<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;S'inscrire&nbsp;!&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;signup_button round&quot;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>Comme avec le précédent usage de <code>link_to</code>, cela crée simplement un lien souche de la forme&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;signup_button round&quot;</span><span class="nt">&gt;</span>S'inscrire&nbsp;!<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>Notez encore le thème désormais récurrent de la table d'options, utilisée dans ce cas pour ajouter quelques classes CSS à une balise ancre. Vous pouvez noter que la balise <code>a</code> ici possède <em>deux</em> classes, séparées par une espace<!-- espace est féminine en type -->&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;signup_button round&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>

<p>C'est pratique pour le cas courant d'un élément avec deux styles différents.</p>

<p>Nous sommes maintenant près à voir le fruits de notre dur labeur (<a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">illustration&nbsp;5.2</a>).<sup class="footnote" id="fnref:5.5"><a href="#fn:5.5">5</a></sup> Plutôt décevant, dites-vous&nbsp;? Peut-être. Heureusement, cependant, nous avons fait du bon travail en renant nos élément HTML sensibles aux <code>id</code> et <code>class</code>, ce qui nous met en bonne position pour mettre notre site en forme grâce aux CSS.</p>

<div class="label" id="fig:layout_no_logo_or_custom_css"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_no_logo_or_custom_css.png" alt="layout_no_logo_or_custom_css" /></span></div><div class="caption"><span class="header">Illustration 5.2: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) sans logo ou CSS personnalisé.&nbsp;<a href="http://railstutorial.org/images/figures/layout_no_logo_or_custom_css-full.png">(taille normale)</a></span></div></div>


<p>Avant que nous stylisions avec les CSS, remplaçons le texte alternatif du logo (balise <code>alt</code>) avec une image&nbsp;; vous pouvez télécharger le logo de l'application exemple à l'adresse <br /> <br />
<a href="http://railstutorial.org/images/sample_app/logo.png">http://railstutorial.org/images/sample_app/logo.png</a><br /></p>

<p>Déposez le logo dans le dossier <code>public/images</code> pour que Rails puisse le trouver. Le résultat apparait dans l'<a class="ref" href="filling-in-the-layout#fig:layout_logo_no_css">illustration&nbsp;5.3</a>.</p>

<div class="label" id="fig:layout_logo_no_css"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_logo_no_css.png" alt="layout_logo_no_css" /></span></div><div class="caption"><span class="header">Illustration 5.3: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec un logo mais toujours pas de style personnalité.&nbsp;<a href="http://railstutorial.org/images/figures/layout_logo_no_css-full.png">(taille normale)</a></span></div></div>




<div class="label" id="sec:custom_css"></div>


<h3><a id="sec:5.1.2" href="filling-in-the-layout#sec:custom_css" class="heading"><span class="number">5.1.2</span> CSS personnalisés</a></h3>


<p>À la <a class="ref" href="filling-in-the-layout#sec:adding_to_the_layout">section&nbsp;5.1.1</a>, vous pouvez avoir noté que les éléments CSS sont <em>sémantiques</em>, c'est-à-dire qu'ils ont une signification en anglais qui <em>transcende</em> la structure de la page. Par exemple, au lieu d'avoir à écrire que le menu de navigation doit être aligné en haut à droite, nous utilisons l'élément «&nbsp;nav&nbsp;». Cela nous donne une considérable flexibilité pour construire un layout avec CSS.</p>

<p>Commençons par remplir le fichier <code>custom.css</code> avec l'<a class="ref" href="filling-in-the-layout#code:header_content">extrait&nbsp;5.3</a> (il n'y a que quelques règles dans l'<a class="ref" href="filling-in-the-layout#code:header_content">extrait&nbsp;5.3</a>. Pour avoir une idée de ce que ces règles CSS font, il est souvent utile de les commenter en utilisant les commentaires CSS, c'est-à-dire en les plaçant entre <code>/* &hellip; */</code>, et voir ce que ça change).</p>

<div class="label" id="code:header_content"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.3.</span> <span class="description">CSS pour le conteneur, le body et les liens. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nc">.container</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#cff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">header</span> <span class="p">{</span>
  <span class="k">padding-top</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">header</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="p">{</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">120%</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">200%</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Liens */</span>

<span class="nt">a</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#09c</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#069</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">underline</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="nd">:visited</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#069</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Vous pouvez voir le résultat de ce code CSS dans l'<a class="ref" href="filling-in-the-layout#fig:layout_with_colors">illustration&nbsp;5.4</a>. Il y a beaucoup de CSS ici, mais il a une forme consistante. Chaque règle se réfère à une <em>class</em> un <em>id</em>, une balise HTML ou une combinaison de ceux-là, suivi par une liste des commandes de style. Par exemple&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#cff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>… change la couleur de fond de la balise <code>body</code> en «&nbsp;baby blue&nbsp;», tandis que&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">header</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>met une couche de padding de 1 <code>em</code> (grossièrement la largeur de la lettre <tt>M</tt>) atour de l'image (<code>img</code>) à l'intérieur de la balise <code>header</code>. Cette règle définit aussi la couleur de fond <code>#fff</code>, qui correspond au code du blanc.<sup class="footnote" id="fnref:5.6"><a href="#fn:5.6">6</a></sup> Similairement&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nc">.container</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>… stylise un élément de class <code>container</code>, dans ce cas en lui donnant une largeur de 710 pixels (correspondant à 18 colonnes Blueprint).<sup class="footnote" id="fnref:5.7"><a href="#fn:5.7">7</a></sup> Le point  <code>.</code> dans <code>.container</code> indique que la règle stylise une <em>class</em> appelée &ldquo;container&rdquo; (comme nous le verrons à la <a class="ref" href="sign-up#sec:signup_error_messages">section&nbsp;8.2.3</a>, le signe dièse <code>#</code> identifie une règle pour styliser un <em>id</em> CSS de la même manière qu'un point indique une <em>class</em> CSS).</p>

<div class="label" id="fig:layout_with_colors"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_with_colors.png" alt="layout_with_colors" /></span></div><div class="caption"><span class="header">Illustration 5.4: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec des couleurs personnalisées.&nbsp;<a href="http://railstutorial.org/images/figures/layout_with_colors-full.png">(taille normale)</a></span></div></div>


<p>Changer les couleurs est sympa, mais les liens de navigation sont toujours «&nbsp;pendus&nbsp;» du côté gauche de la page. Bougeons-les à un meilleur endroit et donnons-leur une apparence plus belle avec les règles de navigation de l'<a class="ref" href="filling-in-the-layout#code:navigation_css">extrait&nbsp;5.4</a>. Le résultat apparait dans l'<a class="ref" href="filling-in-the-layout#fig:layout_no_rounded_corners">illustration&nbsp;5.5</a> (dans certains des exemples de code du livre, incluant l'<a class="ref" href="filling-in-the-layout#code:navigation_css">extrait&nbsp;5.4</a>, j'utilise trois points alignés verticalement pour indiquer du code omis. Quand vous reproduisez ce code, prenez soin de ne pas inclure ces points&nbsp;; alternativement, si vous copiez-collez ce code, assurez-vous de supprimer ces points à la main).</p>

<div class="label" id="code:navigation_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.4.</span> <span class="description">Navigation CSS. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="c">/* Navigation */</span>

<span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">0.7em</span><span class="p">;</span>
  <span class="k">white-space</span><span class="o">:</span> <span class="k">nowrap</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="k">list-style-type</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0.2em</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:visited</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#09c</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">underline</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Ici, <code>nav ul</code> stylise une balise <code>ul</code> à l'intérieuur d'une balise <code>nav</code>, <code>nav ul li</code> stylise une balise <code>li</code> à l'intérieur d'une balise <code>ul</code> à l'intérieur d'une balise <code>nav</code>, et ainsi de suite.</p>

<div class="label" id="fig:layout_no_rounded_corners"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_no_rounded_corners.png" alt="layout_no_rounded_corners" /></span></div><div class="caption"><span class="header">Illustration 5.5: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec la navigation stylisée.&nbsp;<a href="http://railstutorial.org/images/figures/layout_no_rounded_corners-full.png">(taille normale)</a></span></div></div>


<p>En <a href="http://www.answers.com/penultimate">pénultième</a> étape, nous allons rendre le lien à notre page d'inscription un peu moins évident (bien que nous n'en ayons rien à faire pour notre application exemple, sur un site réel il est naturellement assez important —&nbsp;et pourquoi donc&nbsp;? NdT&nbsp;— de rendre le lien d'inscription <em>très</em> proéminent). L'<a class="ref" href="filling-in-the-layout#code:signup_css">extrait&nbsp;5.5</a> montre le code CSS pour rendre gros, vert et cliquable le lien d'inscription (pour qu'un clic n'importe où dans la boite puisse suivre ce lien).</p>

<div class="label" id="code:signup_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.5.</span> <span class="description">CSS pour rendre le bouton d'inscription gros, vert et cliquable. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>

<span class="c">/* Bouton inscription */</span>

<span class="nt">a</span><span class="nc">.signup_button</span> <span class="p">{</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">190px</span><span class="p">;</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#006400</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">150%</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Il y a beaucoup de règles ici&nbsp;; comme d'habitude, «&nbsp;commentez&nbsp;» une ligne et rechargez la page si vous voulez voir à quoi chacune d'entre elles sert. Le résultat final est un lien d'inscription difficile à rater (<a class="ref" href="filling-in-the-layout#fig:signup_button">illustration&nbsp;5.6</a>).</p>

<div class="label" id="fig:signup_button"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/signup_button.png" alt="signup_button" /></span></div><div class="caption"><span class="header">Illustration 5.6: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec un bouton d'inscription proéminent.&nbsp;<a href="http://railstutorial.org/images/figures/signup_button-full.png">(taille normale)</a></span></div></div>


<p>En touche finale, nous allons utiliser les classes <code>round</code> que nous avons placé sur plusieurs des éléments de notre site. Bien que la dureté des coins des boites soit terribles, il y a un peu plus amical de les adoucir pour ne pas couper en tranches nos utilisateurs. Nous pouvons accomplir cela en utilisant le code CSS de l'<a class="ref" href="filling-in-the-layout#code:round_css">extrait&nbsp;5.6</a>, pour obtenir le résultat de l'<a class="ref" href="filling-in-the-layout#fig:layout_rounded_corners">illustration&nbsp;5.7</a>.</p>

<div class="label" id="code:round_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.6.</span> <span class="description">Règles CSS pour des coins arrondis. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="c">/* Coins arrondis */</span>

<span class="nc">.round</span> <span class="p">{</span>
  <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span>    <span class="m">10px</span><span class="p">;</span>
  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span>         <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Il vaut la peine de noter que cet astuces fonctionne sur Firefox, Safari, Opera, et de nombreux autres navigateurs, mais que ça ne fonctionne pas sur Internet Explorer (encore lui… NdT). Il <em>existe</em> une façon d'obtenir des arrondis sur tous les navigateurs, mais aucune qui ne soit aussi facile que celle-ci, donc nous prenons le risque de laisser nos utilisateurs IE avec quelques petites coupures.</p>

<div class="label" id="fig:layout_rounded_corners"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_rounded_corners.png" alt="layout_rounded_corners" /></span></div><div class="caption"><span class="header">Illustration 5.7: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec coins arrondis.&nbsp;<a href="http://railstutorial.org/images/figures/layout_rounded_corners-full.png">(taille normale)</a></span></div></div>




<div class="label" id="sec:partials"></div>


<h3><a id="sec:5.1.3" href="filling-in-the-layout#sec:partials" class="heading"><span class="number">5.1.3</span> Partiels</a></h3>


<p>Bien que le layout de l'<a class="ref" href="filling-in-the-layout#code:layout_new_structure">extrait&nbsp;5.1</a> remplisse son role, il devient un peu encombré de code&nbsp;; il y a plusieurs lignes d'inclusion de fichiers CSS et même plus de lignes d'<em>header</em> pour ce qui n'est logiquement que deux idées. Nous pouvons ranger ces sections en utilisant la facilité de Rails qui s'appelle les <em>partiels</em> (<em>partials</em>). Jetons d'abord un œil à l'aspect du layout après que les partiels auront été définis (<a class="ref" href="filling-in-the-layout#code:layout_with_partials">extrait&nbsp;5.7</a>).</p>

<div class="label" id="code:layout_with_partials"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.7.</span> <span class="description">Le layout du site avec des partiels pour les feuilles de styles et l'entête. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Dans l'<a class="ref" href="filling-in-the-layout#code:layout_with_partials">extrait&nbsp;5.7</a>, nous avons remplacé les lignes de feuilles de styles par un simple appel à un <em>helper</em> Rails appellé <code>render</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>L'effet de cette ligne est de trouver un fichier appelé <code>app/views/layouts/_stylesheets.html.erb</code>, d'évaluer son contenu et d'en insérer le contenu dans la vue.<sup class="footnote" id="fnref:5.8"><a href="#fn:5.8">8</a></sup> (Rappelez-vous que <tt class="verb">&lt;%= ... %&gt;</tt> est la syntaxe de Ruby embarqué nécessaire pour évaluer une expression Ruby et insérer le résultat à l'intérieur du template.) Remarquez le tiret bas au début du nom du fichier <code>_stylesheets.html.erb</code>&nbsp;; ce tiret bas est la convention universelle pour nommer les partiels, et parmi d'autres choses rend possible d'identifier d'un coup d'œil tous les partiels dans un dossier.</p>

<p>Bien entendu, pour obtenir que le partiel fonctionne, nous devons remplir son contenu; dans le cas du partiel des feuilles de styles, c'est juste les quatre ligne incluse de l'<a class="ref" href="filling-in-the-layout#code:layout_new_structure">extrait&nbsp;5.1</a>&nbsp;; le résultat apparait dans l'<a class="ref" href="filling-in-the-layout#code:stylesheets_partial">extrait&nbsp;5.8</a>. (Techniquement, le <em>HTML shiv</em> inclut Javascript, pas CSS. En d'autres mots, son but est de permettre à Internet Explorer de comprendre CSS avec HTML5, donc logiquement il doit rester dans le partiel des feuilles de style.)</p>

<div class="label" id="code:stylesheets_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.8.</span> <span class="description">Un partiel pour les feuilles de styles incluses. <br /> <code>app/views/layouts/_stylesheets.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/screen&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/print&#39;</span><span class="p">,</span>  <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;print&#39;</span> <span class="cp">%&gt;</span>
<span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>Similairement, nous pouvons déplacer le matériel de l'entête dans un partiel montré dans l'<a class="ref" href="filling-in-the-layout#code:header_partial">extrait&nbsp;5.9</a> et l'insérer dans le layout avec un autre appel à <code>render</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>




<div class="label" id="code:header_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.9.</span> <span class="description">Un partiel avec l'entête du site. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Application exemple&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Connexion&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>Maintenant que nous savons faire des partiels, ajoutons au site un pied de page qui soit harmonisé avec l'entête. Dès à présent vous devez pouvoir devnier que nous l'appeler <code>_footer.html.erb</code> et le déposer dans le dossier des layouts (<a class="ref" href="filling-in-the-layout#code:footer_partial">extrait&nbsp;5.10</a>).</p>

<div class="label" id="code:footer_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.10.</span> <span class="description">Un partiel pour le pied de page du site. <br /> <code>app/views/layouts/_footer.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>Comme pour l'entête, dans le pied de page nous utilisons <code>link_to</code> pour les liens internes vers les pages À Propos et Contact et initier les URLs avec <code>&rsquo;#&rsquo;</code> pour le moment (comme pour <code>header</code>, la balise <code>footer</code> est nouvelle en HTML5.)</p>

<p>Nous pouvons rendre le partial du pied de page dans le layout en suivant le même modèle que les partiels des feuilles de styles et de l'entête (<a class="ref" href="filling-in-the-layout#code:layout_with_footer">extrait&nbsp;5.11</a>).</p>

<div class="label" id="code:layout_with_footer"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.11.</span> <span class="description">La layout du site avec un partiel pour le pied de page. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/footer&#39;</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Bien sûr, le pied de page sera laid comme un peu de style (<a class="ref" href="filling-in-the-layout#code:footer_css">extrait&nbsp;5.12</a>). Le résultat est présenté dans l'<a class="ref" href="filling-in-the-layout#fig:site_with_footer">illustration&nbsp;5.8</a>.</p>

<div class="label" id="code:footer_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.12.</span> <span class="description">Ajout de CSS pour le pied de page. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Remarquez ici la règle&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">footer</span> <span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>… qui écrase la règle précédente&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>… de telle sorte que le pied de page est centré en bas de page plutôt que d'être poussé vers la droite comme les liens de navigation dans l'entête. Cette convention d'avoir des successions de règles, avec des règles ultérieure écrasant des règles précédantes, est ce qui justifie le «&nbsp;en cascase&nbsp;» dans le «&nbsp;Cascade Style Sheets&nbsp;» (<em>Feuilles de Styles en Cascade</em>).</p>

<div class="label" id="fig:site_with_footer"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/site_with_footer.png" alt="site_with_footer" /></span></div><div class="caption"><span class="header">Illustration 5.8: </span><span class="description">La page Accueil (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) avec un pied de page ajouté.&nbsp;<a href="http://railstutorial.org/images/figures/site_with_footer-full.png">(taille normale)</a></span></div></div>




<div class="label" id="sec:layout_links"></div>


<h2><a id="sec:5.2" href="filling-in-the-layout#sec:layout_links" class="heading"><span class="number">5.2</span> Liens pour la mise en page</a></h2>


<p>Maintenant que nous avons fini notre charte de site avec une stylisation décente, il est temps de commencer à remplir les liens que nous avons esquissés par <code>&rsquo;#&rsquo;</code>. Bien sûr, nous pourrions coder les liens en dur comme&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/pages/about&quot;</span><span class="nt">&gt;</span>À Propos<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>… mais ce n'est pas la façon de faire Rails. <em>Primo</em>, ce serait bien si l'URL pour la page «&nbsp;À Propos&nbsp;» était <tt>/about</tt> plutôt que <tt>/pages/about</tt>&nbsp;; plus encore, Rails utilise conventionnellement des <em>routes nommés</em>, ce qui implique du code comme&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>De cette manière le code a un sens plus clair, et il est également plus flexible puisque nous n'avons qu'à changer la définition de <code>about_path</code> pour que les URLs changement partout où <code>about_path</code> est utilisé.</p>

<p>La liste complète de nos liens planifié («&nbsp;routés&nbsp;») est présenté dans la <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a>, avec leur carte vers les URLs et les routes. Nous les implémenterons toutes sauf la dernière d'ici la fin de ce chapitre (la dernière se fera au <a class="ref" href="sign-in-sign-out#top">chapitre&nbsp;9</a>.)</p>

<div class="label" id="table:url_mapping"></div>


<div class="table"><div class="center"><table class="tabular"><tr><th class="align_left"><strong>Page</strong></th><th class="align_left"><strong>URL</strong></th><th class="align_right"><strong>Named route</strong></th></tr><tr class="top_bar"><td class="align_left">Accueil</td><td class="align_left"><tt>/</tt></td><td class="align_right"><code>root_path</code></td></tr><tr><td class="align_left">À Propos</td><td class="align_left"><tt>/about</tt></td><td class="align_right"><code>about_path</code></td></tr><tr><td class="align_left">Contact</td><td class="align_left"><tt>/contact</tt></td><td class="align_right"><code>contact_path</code></td></tr><tr><td class="align_left">Aide</td><td class="align_left"><tt>/help</tt></td><td class="align_right"><code>help_path</code></td></tr><tr><td class="align_left">Inscription</td><td class="align_left"><tt>/signup</tt></td><td class="align_right"><code>signup_path</code></td></tr><tr><td class="align_left">Connexion</td><td class="align_left"><tt>/signin</tt></td><td class="align_right"><code>signin_path</code></td></tr></table></div><div class="caption"><span class="header">Table 5.1: </span><span class="description">Carte des Route et URL des liens du site.</span></div></div>




<div class="label" id="sec:integration_tests"></div>


<h3><a id="sec:5.2.1" href="filling-in-the-layout#sec:integration_tests" class="heading"><span class="number">5.2.1</span> Test d'intégration</a></h3>


<p>Avant d'écrire les routes de notre application, nous allons poursuivre avec notre «&nbsp;développement conduit par les tests&nbsp;» en écrivant des tests pour ces routes. Il existe plusieurs façons de tester le routage, et nous allons profiter de cette opportunité pour introduire les <em>test d'intégration</em>, qui nous offre une manière de simuler un navigateur qui accèderait à notre application et ce faisant le test de bout en bout. Comme nous le verrons en abordant la <a class="ref" href="sign-up#sec:rspec_integration_tests">section&nbsp;8.4</a>, tester le routage n'est qu'un début.</p>

<p>Nous commençons par générer un test d'intégration pour les liens du layout de l'application exemple&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate integration_test layout_links
<span class="go">      invoke  rspec</span>
<span class="go">      create    spec/requests/layout_links_spec.rb</span>
</pre></div>
</div>


<p>Notez que le générateur ajoute automatiquement <code>_spec.rb</code> au nom de notre fichier test, [(yielding)(rendant)] <code>spec/requests/layout_links_spec.rb</code> (en RSpec, les tests d'intégration sont aussi appelés des <em>request specs</em> (des <em>requêtes spec</em> )&nbsp;; les origines de cette terminologie me sont obscures).</p>

<p>Notre test d'intégration utilisera la même fonction <code>get</code> que celle utilisée à la <a class="ref" href="static-pages#sec:first_tests">section&nbsp;3.2</a> dans le spec du contrôleur Pages, avec du code comme&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">&quot;GET &#39;home&#39;&quot;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s2">&quot;devrait réussir&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;home&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>


<p>Dans cette section, nous voulons tester des URLs comme&nbsp;<tt>/</tt> et <tt>/about</tt>, mais nous ne pouvons pas <em>obtenir</em> (<code>get</code>) ces URLs à l'intérieur du test de contrôleur &mdash;&nbsp;les tests de contrôleur connaissent seulement les URLs définis pour ce contrôleur précis. En contraste, les test d'intégration ne sont pas limités par de telles restrictions, puisqu'ils sont désignés comme tests <em>intégrés</em> pour l'application complète et ainsi peuvent obtenir (<code>get</code>) la page qu'ils veulent.</p>

<p>En suivant le modèle du spec du contrôleur Pages, nous pouvons écrire un spec d'intégration pour chacune des pages de la <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a> pages que nous avons déjà créées, c'est-à-dire les pages Accueil, À Propos, Contact et Aide. Pour être sûr que la bonne page (c'est-à-dire la <em>vue</em>) soit rendue dans chque cas, nous allons tester la validité du titre en utilisant <code>have_selector</code>. Les définitions du test apparaissent dans l'<a class="ref" href="filling-in-the-layout#code:layout_links_spec">extrait&nbsp;5.13</a>.</p>

<div class="label" id="code:layout_links_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.13.</span> <span class="description">Test d'intégration pour les routes. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>

  <span class="n">it</span> <span class="s2">&quot;devrait trouver une page Accueil à &#39;/&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;devrait trouver une page Contact at &#39;/contact&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/contact&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Contact&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have an À Propos page at &#39;/about&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/about&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;devrait trouver une page Iade à &#39;/help&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/help&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Aide&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Bien entendu, à ce point ils devraient échouer (Rouge)&nbsp;; nous les passerons au Vert à la <a class="ref" href="filling-in-the-layout#sec:rails_routes">section&nbsp;5.2.2</a>.</p>

<p>En passant, si vous n'avez pas de page d'aide à ce point, il serait temps d'en ajouter une (si vous avez résolu les <a class="ref" href="static-pages#top">chapitre&nbsp;3</a> exercises de la <a class="ref" href="static-pages#sec:static_pages_exercises">section&nbsp;3.5</a>, vous en avez déjà une). D'abord, ajoutez l'action <code>help</code> au contrôleur Pages (<a class="ref" href="filling-in-the-layout#code:help_action">extrait&nbsp;5.14</a>). Ensuite, créez la vue correspondante (<a class="ref" href="filling-in-the-layout#code:help_view">extrait&nbsp;5.15</a>).</p>

<div class="label" id="code:help_action"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.14.</span> <span class="description">Ajout de l'action <code>help</code> (<em>aide</em>) au contrôleur Pages. <br /> <code>app/controllers/pages_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="nf">help</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;Aide&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:help_view"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.15.</span> <span class="description">Ajout d'une <em>vue</em> pour la page d'aide. <br /> <code>app/views/pages/help.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Aide<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  Obtenez de l'aide sur le Tutoriel Ruby on Rails Tutorial sur la
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/help&quot;</span><span class="nt">&gt;</span>page d'aide du Tutoriel Rails<span class="nt">&lt;/a&gt;</span>.
  Pour obtenir de l'aide sur cette application exemple, consultez le
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/book&quot;</span><span class="nt">&gt;</span>livre du Tutoriel Rails<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div></div>


<p>Il y a un détail final pour gérer les changements précédents&nbsp;:
si vous lancez Autotest, vous pourrez noter qu'il ne joue pas le test d'intégration. C'est à dessein, puisque les tests d'intégration peuvent être lents et aisnis peuvent entraver le cycle rouge-vert-restructuration, mais je trouve quand même préférable de dire à Autotest de lancer les tests du dossier  <code>spec/requests</code> directory (<a class="ref" href="filling-in-the-layout#code:autotest_integration">extrait&nbsp;5.16</a> ou <a class="ref" href="filling-in-the-layout#code:autotest_integration_linux">extrait&nbsp;5.17</a>).</p>

<div class="label" id="code:autotest_integration"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.16.</span> <span class="description">Ajouts à <code>.autotest</code> nécessaire pour jouer les tests d'intégration avec Autotest sur OS&nbsp;X.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">Autotest</span><span class="o">.</span><span class="n">add_hook</span> <span class="ss">:initialize</span> <span class="k">do</span> <span class="o">|</span><span class="n">autotest</span><span class="o">|</span>
  <span class="n">autotest</span><span class="o">.</span><span class="n">add_mapping</span><span class="p">(</span><span class="sr">/^spec\/requests\/.*_spec\.rb$/</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">autotest</span><span class="o">.</span><span class="n">files_matching</span><span class="p">(</span><span class="sr">/^spec\/requests\/.*_spec\.rb$/</span><span class="p">)</span>
  <span class="k">end</span>  
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:autotest_integration_linux"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.17.</span> <span class="description">Ajouts à <code>.autotest</code> nécessaire pour jouer les tests d'intégration avec Autotest sur Ubuntu Linux.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">Autotest</span><span class="o">.</span><span class="n">add_hook</span> <span class="ss">:initialize</span> <span class="k">do</span> <span class="o">|</span><span class="n">autotest</span><span class="o">|</span>
  <span class="n">autotest</span><span class="o">.</span><span class="n">add_mapping</span><span class="p">(</span><span class="sr">%r%^spec/(requests)/.*rb$%</span><span class="p">)</span> <span class="k">do</span><span class="o">|</span><span class="n">filename</span><span class="p">,</span> <span class="n">_</span><span class="o">|</span>
    <span class="n">filename</span>
  <span class="k">end</span>
<span class="k">end</span> 
</pre></div>
</div></div>


<p>Ne vous souciez pas de où vient ce code&nbsp;; je ne connais pas non plus l'API Autotest. À un certain point J'utilise Google avec des termes de recherche tels que &ldquo;rspec autotest integration&rdquo; et j'ai trouvé ce code, et lorsque je l'ai introduit dans mon fichier <code>.autotest</code>, ça a fonctionné.</p>

<div class="label" id="sec:rails_routes"></div>


<h3><a id="sec:5.2.2" href="filling-in-the-layout#sec:rails_routes" class="heading"><span class="number">5.2.2</span> Routes Rails</a></h3>


<p>Maintenant que nous avons des tests pour les URLs désirés, il est temps de les faire fonctionner. Comme noté à la <a class="ref" href="static-pages#sec:static_pages_with_rails">section&nbsp;3.1.2</a>, le fichier que Rails utilise pour le routage des URL <code>config/routes.rb</code>. Si vous jetez un coup d'œil au fichier par défaut des routes, vous verrez c'est plutôt le bazar, mais c'est un bazar utile &mdash;&nbsp;plein d'exemples de routages à décommenter. Je vous suggère de le lire jusqu'à un certain point, et je vous suggère aussi de jeter un regard à l'<a href="http://guides.rubyonrails.org/routing.html">article des Guides Rails &ldquo;Rails Routing from the outside in&rdquo;</a> pour un traitement plus en profondeur des routes. Pour le moment, cependant, nous en resterons là avec les exemples de l'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a>.<sup class="footnote" id="fnref:5.9"><a href="#fn:5.9">9</a></sup></p>

<div class="label" id="code:static_page_routes"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.18.</span> <span class="description">Routes pour les pates statiques. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>L'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a> contient des routes personnalisées pour les pages <code>contact</code>, <code>about</code> (<em>à propos</em>), et <code>help</code> (<em>aide</em>)&nbsp;; nous prendrons soin de la page d'accueil elle-même dans <a class="ref" href="filling-in-the-layout#code:root_route">extrait&nbsp;5.20</a> (puisque nous utiliserons des routes personnalisées dans l'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a> exclusivement à partir de maintenant nous avons saisi cette opportunité pour supprimer les routes du contrôleur Pages (<code>get "pages/home"</code>, etc.) vues la dernière fois dans l'<a class="ref" href="static-pages#code:about_route">extrait&nbsp;3.17</a>).</p>

<p>Si vous lisez attentivement le code de l'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a>, vous pouvez probablement imaginer ce qu'il fait&nbsp;; par exemple, nous pouvons voir que&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
</pre></div>
</div>


<p>… trouve le <code>&rsquo;/about&rsquo;</code> et le route vers l'action <code>about</code> du contrôleur Pages. Avant, c'était plus explicite (au moins pour des anglophones. NdT)&nbsp;: nous utilisions <code>get &rsquo;pages/about&rsquo;</code> pour atteindre le même endroit, mais <code>/about</code> est plus succint. Ce qui n'est pas évident, c'est que <code>match &rsquo;/about&rsquo;</code> crée aussi automatiquement des <em>routes nommés</em> (<em>named routes</em>) à utiliser dans les contrôleurs et dans les vues&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">about_path</span> <span class="o">=&gt;</span> <span class="s1">&#39;/about&#39;</span>
<span class="n">about_url</span>  <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:3000/about&#39;</span>
</pre></div>
</div>


<p>Notez que <code>about_url</code> correspond à l'URL <em>entière</em> <tt>http://localhost:3000/about</tt> (avec <code>localhost:3000</code> remplacé par le nom de domaine, tel que <code>example.com</code>, pour un site déployé online). Comme abordé à la <a class="ref" href="filling-in-the-layout#sec:layout_links">section&nbsp;5.2</a>, pour obtenir juste <tt>/about</tt>, vous utilisez <code>about_path</code> (le <em>Tutoriel Rails</em> utilise la forme <code>path</code> (<em>chemint</em>) pour la consistance, mais la différence importe souvent peu en pratique).</p>

<p>Ces routes maintenant définies, les tests pour les pages À Propos, Contact et Aide devraient maintenant réussir (comme d'habitude, utilisez Autotest ou <code>rspec spec/</code> pour vérifier). Il ne reste plus que le test pour la page d'accueil.</p>

<p>Pour établir la route vers la page d'accueil, nous <em>pourrions</em> utiliser un code tel que&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
</pre></div>
</div>


<p>Ça n'est pas nécessaire, pourtant&nbsp;; Rails possède des instructions spéciales pour l'URL racine&nbsp;<tt>/</tt> (&ldquo;slash&rdquo;) localisé plus bas dans le fichier (<a class="ref" href="filling-in-the-layout#code:root_route_hint">extrait&nbsp;5.19</a>).</p>

<div class="label" id="code:root_route_hint"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.19.</span> <span class="description">La proposition à décommenter pour définir la route racine. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="c1"># You can have the root of your site routed with &quot;root&quot;</span>
  <span class="c1"># just remember to delete public/index.html.</span>
  <span class="c1"># root :to =&gt; &quot;welcome#index&quot;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>EN utilisant l'<a class="ref" href="filling-in-the-layout#code:root_route_hint">extrait&nbsp;5.19</a> comme modèle, nous arrivons à l'<a class="ref" href="filling-in-the-layout#code:root_route">extrait&nbsp;5.20</a> pour router l'URL&nbsp;<tt>/</tt> vers la page d'accueil.</p>

<div class="label" id="code:root_route"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.20.</span> <span class="description">Ajout d'une care pour la route racine. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>

  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Ce code dirige l'URL racine&nbsp;<tt>/</tt> vers <tt>/pages/home</tt>, et  [(also gives URL helpers)(fournit aussi l'URL aux helpers)] comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">root_path</span> <span class="o">=&gt;</span> <span class="s1">&#39;/&#39;</span>
<span class="n">root_url</span>  <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:3000/&#39;</span>
</pre></div>
</div>


<p>Nous devrions aussi tenir compte du commentaire de l'<a class="ref" href="filling-in-the-layout#code:root_route_hint">extrait&nbsp;5.19</a> et effacer <code>public/index.html</code> pour empêcher Rails de retourner la page par défaut (<a class="ref" href="beginning#fig:riding_rails_3">illustration&nbsp;1.3</a>) quand nous visitons&nbsp;<tt>/</tt>. Vous pouvez bien entendu simplement détruire le fichier, mais si vous utilisez Git pour le contrôle de version il existe une façon de dire à Git qu'une destruction a été faite en même temps qu'il le détruit, en utilisant <code>git rm</code>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git rm public/index.html
<span class="gp">$</span> git commit -am <span class="s2">&quot;Removed default Rails page&quot;</span>
</pre></div>
</div>


<p>Vous vous souvenez peut-être, à la <a class="ref" href="beginning#sec:git_commands">section&nbsp;1.3.5</a>, que nous avons utilisé la commande Git <code>git commit -a -m "Message"</code>, avec des drapeaux pour &ldquo;tous les changements&rdquo; (<code>-a</code>) et un message (<code>-m</code>). Comme montré ci-dessus, Git nous laisse aussi enrouler ces deux drapeaux dans un seul en utilisant <code>git commit -am "<em>Message</em>"</code>.</p>

<p>Avec ça, toutes les routes pour les pages statiques fonctionnent, et les tests devraient réussir. Maintenant nous avons juste à renseigner les liznq su layout.</p>

<div class="label" id="sec:named_routes"></div>


<h3><a id="sec:5.2.3" href="filling-in-the-layout#sec:named_routes" class="heading"><span class="number">5.2.3</span> Routes nommées</a></h3>


<p>Posons les routes nommées créées à la <a class="ref" href="filling-in-the-layout#sec:rails_routes">section&nbsp;5.2.2</a> pour qu'elles fonctionnent dans notre layout. Cela va entrainer de renseigner le second argument des fonctions <code>link_to</code> avec le propre nom de route. Par exemple, nous convertirons&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>… en :</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>… et ainsi de suite.</p>

<p>Nous allons commencer dans le partiel de l'entête, <code>_header.html.erb</code> (<a class="ref" href="filling-in-the-layout#code:header_partial_links">extrait&nbsp;5.21</a>), qui contient de liens vers les pages d'accueil et d'aide. Pendant que nous y serons, nous suivrons une convention web courante et lierons le logo également à la page d'accueil.</p>

<div class="label" id="code:header_partial_links"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.21.</span> <span class="description">Partiel de l'entête avec des liens. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%</span> <span class="n">logo</span> <span class="o">=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Application exemple&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Connexion&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>Nous n'aurons pas de route nommée pour le lien &ldquo;Connexion&rdquo; jusqu'au <a class="ref" href="sign-in-sign-out#top">chapitre&nbsp;9</a>, donc nous le laisserons à <code>&rsquo;#&rsquo;</code> pour le moment. Notez que ce code définit la variable locale <code>logo</code> pour la balise de l'image logo, et ensuite la lie à la ligne suivante&nbsp;:</p>

<div class="code"><div class="highlight"><pre>  <span class="cp">&lt;%</span> <span class="n">logo</span> <span class="o">=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Application exemple&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>C'est un peu plus propre que de tout rassembler dans une seule ligne. C'est spécialement important de noter que le ERb pour l'assignement de variable ne contient pas de signe égal (<code>=</code>)&nbsp;; il est juste <tt class="verb">&lt;% ... %&gt;</tt>, parce que nous ne voulons pas que cette ligne soit insérée dans le template (utiliser une variable locale de cette manière est une façon de faire mais ça n'est pas la seule. Une façon encore plus propre consiste à définir un <em>helper</em> <code>logo</code>&nbsp;; voyez la <a class="ref" href="filling-in-the-layout#sec:layout_exercises">section&nbsp;5.5</a>.)</p>

<p>L'autre endroit où on peut trouver des liens, c'est le partiel du pied de page, <code>_footer.html.erb</code>, qui contient des liens pour les pages À Propos et Contact (<a class="ref" href="filling-in-the-layout#code:footer_partial_links">extrait&nbsp;5.22</a>).</p>

<div class="label" id="code:footer_partial_links"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.22.</span> <span class="description">Partiel du pied de page avec des liens. <br /> <code>app/views/layouts/_footer.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="n">contact_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>Avec ça, notre layout a des liens vers toutes les pages statiques créées dans le <a class="ref" href="static-pages#top">chapitre&nbsp;3</a>, et donc, par exemple, <a href="http://localhost:3000/about"><tt>/about</tt></a> se rend à la page À Propos (<a class="ref" href="filling-in-the-layout#fig:about_page">illustration&nbsp;5.9</a>).</p>

<p>En passant, il est important de noter que, bien que nous n'ayons pas testé, en fait, la présence des liens dans le layout, nos tests échoueront si les routes ne sont pas définies. Vous pouvez le vérifier en commentant les routes de l'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a> et en jouant votre batterie de tests. Pour une méthode de testing qui s'assure en fait que le lien conduise au bon endroit, voyez la <a class="ref" href="filling-in-the-layout#sec:layout_exercises">section&nbsp;5.5</a>.</p>

<div class="label" id="fig:about_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/about_page.png" alt="about_page" /></span></div><div class="caption"><span class="header">Illustration 5.9: </span><span class="description">La page À Propos à  <a href="http://localhost:3000/about"><tt>/about</tt></a>.&nbsp;<a href="http://railstutorial.org/images/figures/about_page-full.png">(taille normale)</a></span></div></div>



<div class="label" id="sec:user_signup"></div>


<h2><a id="sec:5.3" href="filling-in-the-layout#sec:user_signup" class="heading"><span class="number">5.3</span> Inscription de l'utilisateur&nbsp;: une première étape</a></h2>


<p>Comme une pierre angulaire de notre travail sur le layout et le routage, nous allons faire dans cette section une route pour la page d'inscription, ce qui signifiera de créer un second contrôleur. C'est un premier pas important vers la possibilité pour les utilisateurs de s'enregistrer sur notre site&nbsp;; nous passerons à l'étape suivant, la modélisation de ces utilisateurs, au <a class="ref" href="modeling-and-viewing-users-one#top">chapitre&nbsp;6</a>, et nous achèverons le travail au <a class="ref" href="sign-up#top">chapitre&nbsp;8</a>.</p>

<div class="label" id="sec:users_controller"></div>


<h3><a id="sec:5.3.1" href="filling-in-the-layout#sec:users_controller" class="heading"><span class="number">5.3.1</span> Contrôleur des utilisateurs (<em>Users</em> )</a></h3>


<p>Cela fait un moment que nous avons créé notre premier contrôleur, le contrôleur Pages, à la <a class="ref" href="static-pages#sec:static_pages_with_rails">section&nbsp;3.1.2</a>. Il est temps d'en créer une second, le contrôleur Users (<em>Utilisateurs</em> ). Comme précédemment, nous utiliserons la commande <code>generate</code> pour faire le contrôleur le plus simple qui remplissent nos besoins actuels, nomémment, un contrôleur avec une base de page d'inscription pour les nouveaux utilisateurs. En suivant les conventions de l'<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">architecture REST</a> préconisée par Rails, nous appellerons l'action <code>new</code> du contrôleur et le passerons comme argument à <code>generate controller</code> pour le créer automatiquement (<a class="ref" href="filling-in-the-layout#code:generate_users_controller">extrait&nbsp;5.23</a>).</p>

<div class="label" id="code:generate_users_controller"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.23.</span> <span class="description">Générer un contrôleur Users (avec une action <code>new</code>).</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate controller Users new
<span class="go">      create  app/controllers/users_controller.rb</span>
<span class="go">       route  get &quot;users/new&quot;</span>
<span class="go">      invoke  erb</span>
<span class="go">      create    app/views/users</span>
<span class="go">      create    app/views/users/new.html.erb</span>
<span class="go">      invoke  rspec</span>
<span class="go">      create    spec/controllers/users_controller_spec.rb</span>
<span class="go">      create    spec/views/users</span>
<span class="go">      create    spec/views/users/new.html.erb_spec.rb</span>
<span class="go">      invoke  helper</span>
<span class="go">      create    app/helpers/users_helper.rb</span>
<span class="go">      invoke    rspec</span>
<span class="go">      create    spec/helpers/users_helper_spec.rb</span>
</pre></div>
</div></div>


<p>Comme avec le contrôleur Pages, cela génère vue et <em>specs helper</em> dont nous n'avons pas besoin, donc détruisons-les&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rm -rf spec/views
<span class="gp">$</span> rm -rf spec/helpers
</pre></div>
</div>


<p>Le générateur de contrôleur construit ensemble un contrôleur Users et un test par défaut utile, qui vérifie que l'action <code>new</code> réponde bien à la requête <tt>GET</tt> (<a class="ref" href="static-pages#sidebar:get_etc">Box&nbsp;3.1</a>)&nbsp;; le code est présenté dans l'<a class="ref" href="filling-in-the-layout#code:get_new_user_spec">extrait&nbsp;5.24</a>. Ce code devrait vous paraitre familier&nbsp;; il suit l'exacte même forme que le spec du contrôleur Pages vue précédemment à la <a class="ref" href="static-pages#sec:testing_a_title_change">section&nbsp;3.3.1</a> (<a class="ref" href="static-pages#code:pages_controller_spec_title">extrait&nbsp;3.20</a>).</p>

<div class="label" id="code:get_new_user_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.24.</span> <span class="description">Tester la page d'inscription. <br /> <code>spec/controllers/users_controller_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">UsersController</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">&quot;GET &#39;new&#39;&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;devrait réussir&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Par construction, le contrôleur Users possède déjà sa propre action <code>new</code> et le template <code>new.html.erb</code> pour faire réussir ce test (<a class="ref" href="filling-in-the-layout#code:new_user_action">extrait&nbsp;5.25</a>)  (pour voir la page l'adresse <a href="http://localhost:3000/users/new"><tt>/users/new</tt></a>, vous devez peut-être relancer le serveur).</p>

<div class="label" id="code:new_user_action"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.25.</span> <span class="description">Action pour la page d'inscription du nouvel utilisateur. <br /> <code>app/controllers/users_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div></div>


<p>Pour revenir à l'esprit du «&nbsp;développement conduit par le test&nbsp;», ajoutons un second test (échouant) de notre cru en testant le titre que contient la chaine <code>"Inscription"</code> (<a class="ref" href="filling-in-the-layout#code:signup_title_test">extrait&nbsp;5.26</a>). Assurez-vous d'ajouter <code>render_views</code> comme nous l'avons fait dans le spec du contrôleur Pages (<a class="ref" href="static-pages#code:pages_controller_spec_title">extrait&nbsp;3.20</a>)&nbsp;; sinon, le test échouera même après avoir ajouté le titre adéquat.</p>

<div class="label" id="code:signup_title_test"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.26.</span> <span class="description">Un test sur le titre de la page d'inscription. <br /> <code>spec/controllers/users_controller_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">UsersController</span> <span class="k">do</span>
  <span class="n">render_views</span>

  <span class="n">describe</span> <span class="s2">&quot;GET &#39;new&#39;&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;devrait réussir&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;devrait avoir le titre adéquat&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Inscription&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Ce test utilise a méthode <code>have_selector</code> que nous avons vu précédemment (<a class="ref" href="static-pages#sec:testing_a_title_change">section&nbsp;3.3.1</a>)&nbsp;; notez que, comme à la <a class="ref" href="static-pages#sec:testing_a_title_change">section&nbsp;3.3.1</a>, <code>have_selector</code> a besoin de la ligne <code>render_views</code> puisqu'il test la vue associée à l'action.</p>

<p>Bien sûr, à dessein ce test, pour le moment échoue (Rouge). Pour avoir un titre personnalisé, nous avons besoin de créer une variable d'instance <code>@title</code> comme à la <a class="ref" href="static-pages#sec:instance_variables_embedded_ruby">section&nbsp;3.3.3</a>. Nous pouvons ainsi obtenir le Vert avec le code de l'<a class="ref" href="filling-in-the-layout#code:new_user_title">extrait&nbsp;5.27</a>.</p>

<div class="label" id="code:new_user_title"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.27.</span> <span class="description">Définir le titre personnalisé pour la page de nouvel utilisateur. <br /> <code>app/controllers/users_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;Inscription&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="sec:signup_url"></div>


<h3><a id="sec:5.3.2" href="filling-in-the-layout#sec:signup_url" class="heading"><span class="number">5.3.2</span> URL de l'inscription</a></h3>


<p>Avec le code de la <a class="ref" href="filling-in-the-layout#sec:users_controller">section&nbsp;5.3.1</a>, nous avons déjà une page fonctionelle pour les nouveaux utilisateurs à l'adresse <tt>/users/new</tt>, mais vous vous souvenez que d'après la <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a> nous voulons que l'URL soit plutôt <tt>/signup</tt>. Comme à la <a class="ref" href="filling-in-the-layout#sec:layout_links">section&nbsp;5.2</a>, nous allons d'abord écrire un test (<a class="ref" href="filling-in-the-layout#code:user_signup_spec">extrait&nbsp;5.28</a>).</p>

<div class="label" id="code:user_signup_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.28.</span> <span class="description">Simple test d'intégration pour le lien d'inscription utilisateur. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">&quot;devrait avoir une page d'inscription à &#39;/signup&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/signup&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Inscription&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Notez que c'est le <em>même</em> fichier que celui utilisé pour les liens des autres layout, même si la page d'inscription est dans un différent contrôleur. Être capable d'atteindre des pages dans de multiples contrôleur est l'un des avantages de l'utilisation des tests d'intégration.</p>

<p>La dernière étape consiste à faire une <em>route nommée</em> pour les inscriptions. Nous suivrons les exemples de l'<a class="ref" href="filling-in-the-layout#code:static_page_routes">extrait&nbsp;5.18</a> et ajouterons une règle <code>match &rsquo;/signup&rsquo;</code> pour l'URL de l'inscription (<a class="ref" href="filling-in-the-layout#code:signup_route">extrait&nbsp;5.29</a>).</p>

<div class="label" id="code:signup_route"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.29.</span> <span class="description">Une route pour la page d'inscription. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">&quot;users/new&quot;</span>

  <span class="n">match</span> <span class="s1">&#39;/signup&#39;</span><span class="p">,</span>  <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;users#new&#39;</span>

  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>

  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Notez que nous avons gardé la règle <code>get "users/new"</code>, qui a été généré pendant la génération automatique du contrôleur à l'<a class="ref" href="filling-in-the-layout#code:generate_users_controller">extrait&nbsp;5.23</a>. Pour le moment, cette règle est nécessaire pour router <tt>/users/new</tt> correctement, mais il ne suit pas proprement les conventions REST (<a class="ref" href="a-demo-app#table:demo_RESTful_users">Table&nbsp;2.2</a>), et nous l'éliminerons à la <a class="ref" href="modeling-and-viewing-users-one#sec:a_users_resource">section&nbsp;6.3.3</a>.</p>

<p>À ce point, le test d'inscription de l'<a class="ref" href="filling-in-the-layout#code:user_signup_spec">extrait&nbsp;5.28</a> devrait réussir. Tout ce que qui nous reste à faire est d'ajouter le propre lien au bouton sur la page d'accueil. Comme avec les autres routes, <code>match &rsquo;/signup&rsquo;</code> nous donne la <em>route nommée</em> gives <code>signup_path</code>, que nous allons utiliser dans l'<a class="ref" href="filling-in-the-layout#code:home_page_signup_link">extrait&nbsp;5.30</a>.</p>

<div class="label" id="code:home_page_signup_link"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.30.</span> <span class="description">Lier le bouton à la page d'inscription. <br /> <code>app/views/pages/home.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Application exemple<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
  C'est la page d'accueil pour l'application exemple du
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Tutoriel Ruby on Rails<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;S'inscrire&nbsp;!&quot;</span><span class="p">,</span> <span class="n">signup_path</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;signup_button round&quot;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>Cela fait, nous en avons fini avec les liens et les routes nommées, au moins jusqu'à ce que nous ajoutions la route pour s'identifier (se connecter) (<a class="ref" href="sign-in-sign-out#top">chapitre&nbsp;9</a>). La page de nouvelle utilisateur en résultant (à l'URL <tt>/signup</tt>) est présentée dans l'<a class="ref" href="filling-in-the-layout#fig:blank_signup_page">illustration&nbsp;5.10</a>.</p>

<div class="label" id="fig:blank_signup_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/blank_signup_page.png" alt="blank_signup_page" /></span></div><div class="caption"><span class="header">Illustration 5.10: </span><span class="description">La nouvelle page d'inscription à <a href="http://localhost:3000/signup"><tt>/signup</tt></a>.&nbsp;<a href="http://railstutorial.org/images/figures/blank_signup_page-full.png">(taille normale)</a></span></div></div>




<div class="label" id="sec:layout_conclusion"></div>


<h2><a id="sec:5.4" href="filling-in-the-layout#sec:layout_conclusion" class="heading"><span class="number">5.4</span> Conclusion</a></h2>


<p>Dans ce chapitre, nous avons bricolé la mise en forme de notre application et avons peaufiné le routage. La suite du livre est dédié à donner du contenu à cette application exemple&nbsp;: d'abord, en ajoutant des utilisateurs qui peuvent s'incrire, s'identifiant et se déconnecter&nbsp;; ensuite, en ajoutant des micro-messages d'utilisateur&nbsp;; et, enfin, en ajoutant des relations entre utilisateurs.</p>

<p>Si vous êtes épaulé par Git, assurez de «&nbsp;commettre&nbsp;»  (<em>commit</em>) et de fusionner votre branche actuelle (et, juste par paranoïa, jouez vos tests avant)&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rspec spec/
<span class="gp">$</span> git add .
<span class="gp">$</span> git commit -m <span class="s2">&quot;Fin du layout et des routes&quot;</span>
<span class="gp">$</span> git checkout master
<span class="gp">$</span> git merge filling-in-layout
</pre></div>
</div>


<p>Vous pouvez aussi vouloir «&nbsp;pusher&nbsp;» votre travail sur GitHub, ou déployer votre application actualisée sur Heroku&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
<span class="gp">$</span> git push heroku
</pre></div>
</div>




<div class="label" id="sec:layout_exercises"></div>


<h2><a id="sec:5.5" href="filling-in-the-layout#sec:layout_exercises" class="heading"><span class="number">5.5</span> Exercises</a></h2>




<ol>
<li>Replace the local variable <code>logo</code> in <a class="ref" href="filling-in-the-layout#code:header_partial_links">extrait&nbsp;5.21</a> with a helper method of the same name, so that the new partial looks like <a class="ref" href="filling-in-the-layout#code:header_partial_logo">extrait&nbsp;5.31</a>. Use the code in <a class="ref" href="filling-in-the-layout#code:logo_helper_stub">extrait&nbsp;5.32</a> to help you get started.</li>

<li>You may have noticed that our tests for the layout links test the routing but don&rsquo;t actually check that the links on the layout go to the right pages. One way to implement these tests is to use <code>visit</code> and <code>click_link</code> inside the RSpec integration test. Fill in the code in <a class="ref" href="filling-in-the-layout#code:layout_links_test">extrait&nbsp;5.33</a> to verify that all the layout links are properly defined.</li>

</ol>




<div class="label" id="code:header_partial_logo"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.31.</span> <span class="description">Header partial with the logo helper from <a class="ref" href="filling-in-the-layout#code:logo_helper_stub">extrait&nbsp;5.32</a>. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Accueil&quot;</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Aide&quot;</span><span class="p">,</span> <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Connexion&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>




<div class="label" id="code:logo_helper_stub"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.32.</span> <span class="description">A template for the <code>logo</code> helper. <br /> <code>app/helpers/application_helper.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">module</span> <span class="nn">ApplicationAideer</span>

  <span class="k">def</span> <span class="nf">logo</span>
    <span class="c1"># Fill in.</span>
  <span class="k">end</span>

  <span class="c1"># Return a title on a per-page basis.</span>
  <span class="k">def</span> <span class="nf">title</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:layout_links_test"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 5.33.</span> <span class="description">A tests for the links on the layout. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">&quot;should have the right links on the layout&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">click_link</span> <span class="s2">&quot;À Propos&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;À Propos&quot;</span><span class="p">)</span>
    <span class="n">click_link</span> <span class="s2">&quot;Aide&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Contact&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Accueil&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Sign up now!&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="navigation">  <a class="prev_page" href="rails-flavored-ruby#top">
    &laquo;&nbsp;<span class="number">chapitre 4</span> Rails-flavored Ruby
  </a>
  <a class="next_page" href="modeling-and-viewing-users-one#top">
    <span class="number">chapitre 6</span> Modeling and viewing users, part I&nbsp;&raquo;
  </a>
</div><div class="footnotes">
<ol>
<li id="fn:5.1">Les maquettes du <em>Tutoriel Ruby on Rails</em> sont réalisées avec une excellente application appelée <a href="http://gomockingbird.com">Mockingbird</a>.&nbsp;<a class="arrow" href="#fnref:5.1">&uarr;</a></li>
<li id="fn:5.2">These are completely unrelated to Ruby classes.&nbsp;<a class="arrow" href="#fnref:5.2">&uarr;</a></li>
<li id="fn:5.3">Vous pouvez noter que la balise <code>img</code> plutôt que de ressembler à <tt class="verb">&lt;img&gt;...&lt;/img&gt;</tt>, ressemble plutôt à <tt class="verb">&lt;img ... /&gt;</tt>. Les balises qui suivent cette forme sont connues comme étant des balises <em>auto-fermentantes</em> (<em>self-closing</em>).&nbsp;<a class="arrow" href="#fnref:5.3">&uarr;</a></li>
<li id="fn:5.4">Le texte <code>alt</code> est aussi ce qui sera affiché par les lecteurs ayant une déficience visuelle. Bien que les gens soient souvent négligeants sur l'inclusion de l'attribut <code>alt</code> pour les images, c'est en fait exigé par les standards HTML. Heureusement, Rails inclut un attribut <code>alt</code> par défaut&nbsp;; si vous ne spécifiez pas la valeur de l'attribut dans l'appel pour <code>image_tag</code>, Rails utilise simplement le nom du fichier (sans l'extension). Dans ce cas, cependant, <code>Application exemple</code> est plus descriptif que <code>logo</code>, donc j'ai décidé de définir explicitement la valeur de <code>alt</code>.&nbsp;<a class="arrow" href="#fnref:5.4">&uarr;</a></li>
<li id="fn:5.5">Notez que les utilisateurs Safari et Chrome verront un indicateur d'<em>image brisée</em> à la place du texte alternativ &ldquo;Application exemple&rdquo;.&nbsp;<a class="arrow" href="#fnref:5.5">&uarr;</a></li>
<li id="fn:5.6">HTML colors can be coded with three base-16 (hexadecimal) numbers, one each for the primary colors red, green, and blue. <code>#fff</code> maxes out all three colors, yielding pure white. See this <a href="http://www.w3schools.com/html/html_colors.asp">HTML colors</a> site for more information.&nbsp;<a class="arrow" href="#fnref:5.6">&uarr;</a></li>
<li id="fn:5.7">Blueprint CSS utilise une grille de colonnes sur 40 pixeles, 30 pixels pour la colonne elle-même et 10 pixels pour le padding. La colonne la plus à droite n'a pas besoin de padding, donc 18 colonnes représentent 710 pixels&nbsp;: 18 * 40 &ndash; 10 = 710.&nbsp;<a class="arrow" href="#fnref:5.7">&uarr;</a></li>
<li id="fn:5.8">Many Rails developers use a <code>shared</code> directory for partials shared across different views. I prefer to use the <code>shared</code> folder for utility partials that are useful on multiple views, while putting partials that are literally on every page (as part of the site layout) in the <code>layouts</code> directory. (We&rsquo;ll create the <code>shared</code> directory starting in <a class="ref" href="sign-up#top">chapitre&nbsp;8</a>.) That seems to me a logical division, but putting them all in the <code>shared</code> folder certainly works fine, too.&nbsp;<a class="arrow" href="#fnref:5.8">&uarr;</a></li>
<li id="fn:5.9">Dans la ligne <code>SampleApp::Application.routes.draw do</code> vous pouvez reconnaitre que la méthode <code>draw</code> comprend un <em>bloc</em>, une construction syntaxique que nous avons vu précédenmment à la <a class="ref" href="rails-flavored-ruby#sec:blocks">section&nbsp;4.3.2</a>.&nbsp;<a class="arrow" href="#fnref:5.9">&uarr;</a></li>
</ol>
</div>




