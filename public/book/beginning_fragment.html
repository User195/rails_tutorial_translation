

<h1 class="title">Ruby on Rails Tutorial </h1>


<h1 class="subtitle"> Изучение Rails на Примерах</h1>


<h2 class="author">Майкл Хартл</h2>




<h1 class="contents">Содержание</h1>


<div id="table_of_contents"><ol><li class="chapter"><a href="beginning#top"><span class="number">Глава 1 </span> От нуля к развертыванию</a></li><li><ol><li class="section"><a href="beginning#sec:introduction"><span class="number">1.1</span> Введение</a></li><li><ol><li class="subsection"><a href="beginning#sec:comments_for_various_readers"><span class="number">1.1.1</span> Комментарии для разных читателей</a></li><li class="subsection"><a href="beginning#sec:1.1.2"><span class="number">1.1.2</span> &ldquo;Масштабирование&rdquo; Rails</a></li><li class="subsection"><a href="beginning#sec:conventions"><span class="number">1.1.3</span> Соглашения в этой книге</a></li></ol></li><li class="section"><a href="beginning#sec:up_and_running"><span class="number">1.2</span> За работу</a></li><li><ol><li class="subsection"><a href="beginning#sec:development_tools"><span class="number">1.2.1</span> Среда разработки</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.2.1.1">IDE</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.2">Текстовые редакторы и командная строка</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.3">Браузеры</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.4">Примечание о инструментах</a></li></ol></li><li class="subsection"><a href="beginning#sec:rubygems"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, и Git</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:rails_installer_windows">Rails Installer (Windows)</a></li><li class="subsubsection"><a href="beginning#sec:install_git">Установка Git</a></li><li class="subsubsection"><a href="beginning#sec:install_ruby">Установка Ruby</a></li><li class="subsubsection"><a href="beginning#sec:install_rubygems">Установка RubyGems</a></li><li class="subsubsection"><a href="beginning#sec:install_rails">Установка Rails</a></li></ol></li><li class="subsection"><a href="beginning#sec:the_first_application"><span class="number">1.2.3</span> Первое приложение</a></li><li class="subsection"><a href="beginning#sec:bundler"><span class="number">1.2.4</span> Bundler</a></li>
<li class="subsection"><a href="beginning#sec:rails_server"><span class="number">1.2.5</span> <code>rails server</code></a></li><li class="subsection"><a href="beginning#sec:mvc"><span class="number">1.2.6</span> Модель-представление-контроллер (MVC)</a></li></ol></li><li class="section"><a href="beginning#sec:version_control"><span class="number">1.3</span> Управление версиями с Git</a></li><li><ol><li class="subsection"><a href="beginning#sec:git_setup"><span class="number">1.3.1</span> Установка и настройка</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.3.1.1">Первоначальная настройка системы</a></li><li class="subsubsection"><a href="beginning#sec:1.3.1.2">Первоначальная настройка репозитария</a></li></ol></li><li class="subsection"><a href="beginning#sec:adding_and_committing"><span class="number">1.3.2</span> Добавление и фиксация</a></li><li class="subsection"><a href="beginning#sec:1.3.3"><span class="number">1.3.3</span> Что хорошего  Git делает для вас?</a></li><li class="subsection"><a href="beginning#sec:github"><span class="number">1.3.4</span> GitHub</a></li><li class="subsection"><a href="beginning#sec:git_commands"><span class="number">1.3.5</span> Ветвление, редактирование, фиксация, объединение</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:git_branch">Ветвление</a></li><li class="subsubsection"><a href="beginning#sec:git_edit">Редактирование</a></li><li class="subsubsection"><a href="beginning#sec:git_commit">Фиксация</a></li><li class="subsubsection"><a href="beginning#sec:git_merge">Объединение</a></li><li class="subsubsection"><a href="beginning#sec:git_push">Отправка</a></li></ol></li></ol></li><li class="section"><a href="beginning#sec:deploying"><span class="number">1.4</span> Развертывание</a></li><li><ol><li class="subsection"><a href="beginning#sec:1.4.1"><span class="number">1.4.1</span> Установка Heroku</a></li><li class="subsection"><a href="beginning#sec:heroku_step_one"><span class="number">1.4.2</span> Развертывание Heroku, шаг первый</a></li><li class="subsection"><a href="beginning#sec:1.4.3"><span class="number">1.4.3</span> Развертывание Heroku, шаг второй</a></li><li class="subsection"><a href="beginning#sec:heroku_commands"><span class="number">1.4.4</span> Команды Heroku</a></li></ol></li><li class="section"><a href="beginning#sec:beginning_conclusion"><span class="number">1.5</span> Заключение</a></li></ol></li>
<li class="chapter"><a href="a-demo-app#top"><span class="number">Глава 2</span> demo app</a></li><li><ol><li class="section"><a href="a-demo-app#sec:planning_the_application"><span class="number">2.1</span> Планирование приложения</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:modeling_users"><span class="number">2.1.1</span> Моделирование пользователей</a></li><li class="subsection"><a href="a-demo-app#sec:modeling_microposts"><span class="number">2.1.2</span> Моделирование микросообщений</a></li></ol></li><li class="section"><a href="a-demo-app#sec:demo_users_resource"><span class="number">2.2</span> Ресурс Users </a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_user_tour"><span class="number">2.2.1</span> Обзор пользователя</a></li><li class="subsection"><a href="a-demo-app#sec:mvc_in_action"><span class="number">2.2.2</span> MVC в действии</a></li><li class="subsection"><a href="a-demo-app#sec:weaknesses_of_this_users_resource"><span class="number">2.2.3</span> Недостатки данного ресурса Users</a></li></ol></li><li class="section"><a href="a-demo-app#sec:microposts_resource"><span class="number">2.3</span> Ресурс Microposts</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_micropost_microtour"><span class="number">2.3.1</span> Микрообзор микросообщений</a></li><li class="subsection"><a href="a-demo-app#sec:putting_the_micro_in_microposts"><span class="number">2.3.2</span> Помещение <em>micro</em> в микросообщения</a></li><li class="subsection"><a href="a-demo-app#sec:demo_user_has_many_microposts"><span class="number">2.3.3</span> Пользователь <code>has_many</code> микросообщений</a></li><li class="subsection"><a href="a-demo-app#sec:inheritance_hierarchies"><span class="number">2.3.4</span> Иерархия наследования</a></li><li class="subsection"><a href="a-demo-app#sec:deploying_the_demo_app"><span class="number">2.3.5</span> Развертывание demo app</a></li></ol></li><li class="section"><a href="a-demo-app#sec:2.4"><span class="number">2.4</span> Заключение</a></li></ol></li>

<li class="chapter"><a href="static-pages#top"><span class="number">Глава 3</span> В основном статические страницы</a></li><li><ol><li class="section"><a href="static-pages#sec:static_pages"><span class="number">3.1</span> Статические страницы</a></li><li><ol><li class="subsection"><a href="static-pages#sec:truly_static_pages"><span class="number">3.1.1</span> Истинно статические страницы</a></li><li class="subsection"><a href="static-pages#sec:static_pages_with_rails"><span class="number">3.1.2</span> Статические страницы с Rails</a></li></ol></li><li class="section"><a href="static-pages#sec:first_tests"><span class="number">3.2</span> Наши первые тесты</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_tools"><span class="number">3.2.1</span> Инструменты тестирования</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:autotest">Autotest</a></li></ol></li><li class="subsection"><a href="static-pages#sec:TDD"><span class="number">3.2.2</span> TDD: Красный, Зеленый, Refaktor (реорганизация)</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:spork">Spork</a></li><li class="subsubsection"><a href="static-pages#sec:red">Красный</a></li><li class="subsubsection"><a href="static-pages#sec:green">Зеленый</a></li><li class="subsubsection"><a href="static-pages#sec:refactor">Refactor (реорганизация)</a></li></ol></li></ol></li><li class="section"><a href="static-pages#sec:slightly_dynamic_pages"><span class="number">3.3</span> Немного динамические страницы</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_a_title_change"><span class="number">3.3.1</span> Тестирование изменения заголовка</a></li><li class="subsection"><a href="static-pages#sec:passing_title_tests"><span class="number">3.3.2</span> Прохождение тестов заголовка</a></li><li class="subsection"><a href="static-pages#sec:instance_variables_embedded_ruby"><span class="number">3.3.3</span> Переменные экземпляра и Embedded (встроенный) Ruby</a></li><li class="subsection"><a href="static-pages#sec:layouts"><span class="number">3.3.4</span> Устранение дублирования шаблонами</a></li></ol></li><li class="section"><a href="static-pages#sec:static_pages_conclusion"><span class="number">3.4</span> Заключение</a></li><li class="section"><a href="static-pages#sec:static_pages_exercises"><span class="number">3.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="rails-flavored-ruby#top"><span class="number">Глава 4</span> Rails-приправленный Ruby</a></li><li><ol><li class="section"><a href="rails-flavored-ruby#sec:motivation"><span class="number">4.1</span> Причины</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:title_helper"><span class="number">4.1.1</span>  <code>title</code> хелпер</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:cascading_style_sheets"><span class="number">4.1.2</span> Каскадные Таблицы Стилей</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:strings_and_methods"><span class="number">4.2</span> Строки и методы</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:comments"><span class="number">4.2.1</span> Комментарии</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:strings"><span class="number">4.2.2</span> Строки</a></li><li><ol><li class="subsubsection"><a href="rails-flavored-ruby#sec:printing">Печать</a></li><li class="subsubsection"><a href="rails-flavored-ruby#sec:single_quoted_strings">Строки в одинарных кавычках</a></li></ol></li><li class="subsection"><a href="rails-flavored-ruby#sec:objects_and_message_passing"><span class="number">4.2.3</span> Объекты и передача сообщений</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:method_definitions"><span class="number">4.2.4</span> Определение метода</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:back_to_the_title_helper"><span class="number">4.2.5</span> Возвращение к <code>title</code> хелперу</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:other_data_structures"><span class="number">4.3</span> Другие структуры данных</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:arrays_and_ranges"><span class="number">4.3.1</span> Массивы и диапазоны</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:blocks"><span class="number">4.3.2</span> Блоки</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:hashes_and_symbols"><span class="number">4.3.3</span> Хэши и символы</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:css_revisited"><span class="number">4.3.4</span> Вновь CSS</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:ruby_classes"><span class="number">4.4</span> Ruby классы</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:constructors"><span class="number">4.4.1</span> Конструкторы</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_class_of_our_own"><span class="number">4.4.2</span> Наследование классов</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:modifying_built_in_classes"><span class="number">4.4.3</span> Изменение встроенных классов</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_controller_class"><span class="number">4.4.4</span> Класс контроллер</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_user_class"><span class="number">4.4.5</span> User класс</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:exercises"><span class="number">4.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="filling-in-the-layout#top"><span class="number">Глава 5</span> Заполнение шаблона</a></li><li><ol><li class="section"><a href="filling-in-the-layout#sec:structure"><span class="number">5.1</span> Добавление некоторых структур</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:adding_to_the_layout"><span class="number">5.1.1</span> Навигация по сайту</a></li><li class="subsection"><a href="filling-in-the-layout#sec:custom_css"><span class="number">5.1.2</span> Пользовательские CSS</a></li><li class="subsection"><a href="filling-in-the-layout#sec:partials"><span class="number">5.1.3</span> Частичные шаблоны (partials)</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_links"><span class="number">5.2</span> Ссылки в шаблоне</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:integration_tests"><span class="number">5.2.1</span> Интеграционные тесты</a></li><li class="subsection"><a href="filling-in-the-layout#sec:rails_routes"><span class="number">5.2.2</span> Rails маршруты</a></li><li class="subsection"><a href="filling-in-the-layout#sec:named_routes"><span class="number">5.2.3</span> Именованные маршруты</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:user_signup"><span class="number">5.3</span> Регистрация пользователей: первый шаг</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:users_controller"><span class="number">5.3.1</span> Users контроллер</a></li><li class="subsection"><a href="filling-in-the-layout#sec:signup_url"><span class="number">5.3.2</span> Signup URL</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_conclusion"><span class="number">5.4</span> Заключение</a></li><li class="section"><a href="filling-in-the-layout#sec:layout_exercises"><span class="number">5.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="modeling-and-viewing-users-one#top"><span class="number">Глава 6</span> Моделирование и просмотр пользователей, часть I</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-one#sec:user_model"><span class="number">6.1</span> Модель User</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:database_migrations"><span class="number">6.1.1</span> Миграции базы данных</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:the_model_file"><span class="number">6.1.2</span> Файл модели</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:model_annotation">Аннотация модели</a></li><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:accessible_attributes">Доступные атрибуты</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:creating_user_objects"><span class="number">6.1.3</span> Создание объектов user</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:finding_user_objects"><span class="number">6.1.4</span> Поиск объектов user</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:updating_user_objects"><span class="number">6.1.5</span> Обновление объектов user</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:user_validations"><span class="number">6.2</span> Валидации User</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:presence_validation"><span class="number">6.2.1</span> Валидация наличия</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:length_validation"><span class="number">6.2.2</span> Валидация длины</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:format_validation"><span class="number">6.2.3</span> Валидация формата</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:uniqueness_validation"><span class="number">6.2.4</span> Валидация уникальности</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:the_caveat">Предостережение уникальности</a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:viewing_users"><span class="number">6.3</span> Просмотр пользователей</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:rails_environments"><span class="number">6.3.1</span> Отладка и окружения Rails</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:users_show"><span class="number">6.3.2</span> User модель, представление, контроллер</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:a_users_resource"><span class="number">6.3.3</span> Ресурс Users</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:params_in_debug"><code>params</code> в <code>debug</code></a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.4"><span class="number">6.4</span> Заключение</a></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.5"><span class="number">6.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="modeling-and-viewing-users-two#top"><span class="number">Глава 7</span> Моделирование и просмотр пользователей, часть II</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-two#sec:insecure_passwords"><span class="number">7.1</span> Небезопасные пароли</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_validations"><span class="number">7.1.1</span> Валидации пароля</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_migration"><span class="number">7.1.2</span> Миграция пароля</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_active_record_callback"><span class="number">7.1.3</span> Обратный вызов Active Record</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:secure_passwords"><span class="number">7.2</span> Безопасные пароли</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_secure_password_test"><span class="number">7.2.1</span> Тест безопасного пароля</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:secure_password_theory"><span class="number">7.2.2</span> Немного теории безопасных паролей</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:implementing_has_password"><span class="number">7.2.3</span> Реализация <code>has_password?</code></a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_authenticate_method"><span class="number">7.2.4</span> Метод аутентификации</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:better_user_views"><span class="number">7.3</span> Улучшение отображения пользователя</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:tests_with_factories"><span class="number">7.3.1</span> Тестирование страницы просмотра пользователя (с factories)</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_name_and_a_gravatar"><span class="number">7.3.2</span> Имя и Gravatar</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-two#sec:a_gravatar_helper">Gravatar хелпер</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_user_sidebar"><span class="number">7.3.3</span> Боковая панель пользователя</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:7.4"><span class="number">7.4</span> Заключение</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:7.4.1"><span class="number">7.4.1</span> Git commit</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:heroku_deploy"><span class="number">7.4.2</span> Развертывание Heroku</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:more_modeling_users_exercises"><span class="number">7.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="sign-up#top"><span class="number">Глава 8</span> Регистрация</a></li><li><ol><li class="section"><a href="sign-up#sec:signup_form"><span class="number">8.1</span> Регистрационная форма</a></li><li><ol><li class="subsection"><a href="sign-up#sec:using_form_for"><span class="number">8.1.1</span> Использование <code>form_for</code></a></li><li class="subsection"><a href="sign-up#sec:the_form_html"><span class="number">8.1.2</span> HTML формы</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_failure"><span class="number">8.2</span> Сбой регистрации</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_failure"><span class="number">8.2.1</span> Тестирование сбоя</a></li><li class="subsection"><a href="sign-up#sec:a_working_form"><span class="number">8.2.2</span> Работающая форма</a></li><li class="subsection"><a href="sign-up#sec:signup_error_messages"><span class="number">8.2.3</span> Сообщения об ошибках при регистрации</a></li><li class="subsection"><a href="sign-up#sec:filtering_parameter_logging"><span class="number">8.2.4</span> Фильтрация логгируемых параметров</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_success"><span class="number">8.3</span> Успешная регистрация</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_success"><span class="number">8.3.1</span> Тестирование успешной регистрации</a></li><li class="subsection"><a href="sign-up#sec:the_finished_signup_form"><span class="number">8.3.2</span> Завершение формы регистрации</a></li><li class="subsection"><a href="sign-up#sec:the_flash"><span class="number">8.3.3</span> Флэш</a></li><li class="subsection"><a href="sign-up#sec:the_first_signup"><span class="number">8.3.4</span> Первая регистрация</a></li></ol></li><li class="section"><a href="sign-up#sec:rspec_integration_tests"><span class="number">8.4</span> RSpec интеграционные тесты</a></li><li><ol><li class="subsection"><a href="sign-up#sec:integration_tests_with_style"><span class="number">8.4.1</span> Интеграционные тесты со стилем</a></li><li class="subsection"><a href="sign-up#sec:failed_signup"><span class="number">8.4.2</span> Сбой регистрации пользователей не должен создавать нового пользователя</a></li><li class="subsection"><a href="sign-up#sec:successful_signup"><span class="number">8.4.3</span> Успешная регистрация пользователя должна создавать нового пользователя</a></li></ol></li><li class="section"><a href="sign-up#sec:8.5"><span class="number">8.5</span> Заключение</a></li><li class="section"><a href="sign-up#sec:signup_exercises"><span class="number">8.6</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="sign-in-sign-out#top"><span class="number">Глава 9</span> Войти, выйти</a></li><li><ol><li class="section"><a href="sign-in-sign-out#sec:sessions"><span class="number">9.1</span> Сессии</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:sessions_controller"><span class="number">9.1.1</span> Sessions контроллер</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_form"><span class="number">9.1.2</span> Форма для входа</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_failure"><span class="number">9.2</span> Сбой входа</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:reviewing_form_submission"><span class="number">9.2.1</span> Обзор отправки формы</a></li><li class="subsection"><a href="sign-in-sign-out#sec:failed_signin"><span class="number">9.2.2</span> Ошибка входа (тест и код)</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_success"><span class="number">9.3</span> Успешный вход</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:the_completed_create_action"><span class="number">9.3.1</span> Завершение <code>create</code> действия</a></li><li class="subsection"><a href="sign-in-sign-out#sec:remember_me"><span class="number">9.3.2</span> Запомнить меня</a></li><li class="subsection"><a href="sign-in-sign-out#sec:current_user"><span class="number">9.3.3</span> Текущий пользователь</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signing_out"><span class="number">9.4</span> Выход</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:destroying_sessions"><span class="number">9.4.1</span> Уничтожение сессий</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_upon_signup"><span class="number">9.4.2</span> Вход после регистрации</a></li><li class="subsection"><a href="sign-in-sign-out#sec:changing_the_layout_links"><span class="number">9.4.3</span> Изменение ссылок шаблона</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_out_integration_tests"><span class="number">9.4.4</span> Интеграционные тесты для входа и выхода</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:9.5"><span class="number">9.5</span> Заключение</a></li><li class="section"><a href="sign-in-sign-out#sec:sign_in_out_exercises"><span class="number">9.6</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="updating-showing-and-deleting-users#top"><span class="number">Глава 10</span> Обновление, демонстрация, и удаление пользователей</a></li><li><ol><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_users"><span class="number">10.1</span> Обновление пользователей</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:edit_form"><span class="number">10.1.1</span> Форма для редактирования</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:enabling_edits"><span class="number">10.1.2</span> Включение редактирования</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:protecting_pages"><span class="number">10.2</span> Защита страниц</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_signed_in_users"><span class="number">10.2.1</span> Требование входа пользователей</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_the_right_user"><span class="number">10.2.2</span> Требование правильного пользователя</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:friendly_forwarding"><span class="number">10.2.3</span> Дружелюбная переадресация</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:showing_users"><span class="number">10.3</span> Просмотр всех пользователей сайта</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:user_index"><span class="number">10.3.1</span> Список пользователей</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:sample_users"><span class="number">10.3.2</span> Образцы пользователей</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:pagination"><span class="number">10.3.3</span> Пагинация</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:testing_pagination">Тестирование пагинации</a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:partial_refactoring"><span class="number">10.3.4</span> Частичный рефакторинг</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:destroying_users"><span class="number">10.4</span> Уничтожение пользователей</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:administrative_users"><span class="number">10.4.1</span> Административные пользователи</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:revisiting_attr_accessible">Возвращение к <code>attr_accessible</code></a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:the_destroy_action"><span class="number">10.4.2</span> <code>Destroy</code> действие</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:10.5"><span class="number">10.5</span> Заключение</a></li><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_deleting_exercises"><span class="number">10.6</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="user-microposts#top"><span class="number">Глава 11</span> Микросообщения пользователей</a></li><li><ol><li class="section"><a href="user-microposts#sec:a_micropost_model"><span class="number">11.1</span> Модель Micropost</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:the_basic_model"><span class="number">11.1.1</span> Базовая модель</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:accessible_attribute">Доступные атрибуты</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:user_micropost_associations"><span class="number">11.1.2</span> Ассоциации Пользователь/Микросообщения</a></li><li class="subsection"><a href="user-microposts#sec:ordering_and_dependency"><span class="number">11.1.3</span> Улучшение микросообщений</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:default_scope">Дефолтное пространство</a></li><li class="subsubsection"><a href="user-microposts#sec:dependent_destroy">Dependent: destroy</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:micropost_validations"><span class="number">11.1.4</span> Валидации микросообщений</a></li></ol></li><li class="section"><a href="user-microposts#sec:showing_microposts"><span class="number">11.2</span> Просмотр микросообщений</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:augmenting_the_user_show_page"><span class="number">11.2.1</span> Дополнение страницы показывающей пользователя</a></li><li class="subsection"><a href="user-microposts#sec:sample_microposts"><span class="number">11.2.2</span> Образцы микросообщений</a></li></ol></li><li class="section"><a href="user-microposts#sec:manipulating_microposts"><span class="number">11.3</span> Манипулирование микросообщениями</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:access_control"><span class="number">11.3.1</span> Контроль доступа</a></li><li class="subsection"><a href="user-microposts#sec:creating_microposts"><span class="number">11.3.2</span> Создание микросообщений</a></li><li class="subsection"><a href="user-microposts#sec:a_proto_feed"><span class="number">11.3.3</span> Предварительная реализация потока сообщений</a></li><li class="subsection"><a href="user-microposts#sec:destroying_microposts"><span class="number">11.3.4</span> Уничтожение микросообщений</a></li><li class="subsection"><a href="user-microposts#sec:testing_the_new_home_page"><span class="number">11.3.5</span> Тестирование новой home страницы</a></li></ol></li><li class="section"><a href="user-microposts#sec:11.4"><span class="number">11.4</span> Заключение</a></li><li class="section"><a href="user-microposts#sec:micropost_exercises"><span class="number">11.5</span> Упражнения</a></li></ol></li>

<li class="chapter"><a href="following-users#top"><span class="number">Глава 12</span> Слежение за сообщениями пользователей</a></li><li><ol><li class="section"><a href="following-users#sec:the_relationship_model"><span class="number">12.1</span> Модель Relationship</a></li><li><ol><li class="subsection"><a href="following-users#sec:a_problem_with_the_data_model"><span class="number">12.1.1</span> Проблема с моделью данных (и ее решение)</a></li><li class="subsection"><a href="following-users#sec:relationship_user_associations"><span class="number">12.1.2</span> Ассоциации пользователь/взаимоотношение</a></li><li class="subsection"><a href="following-users#sec:relationship_validations"><span class="number">12.1.3</span> Валидации</a></li><li class="subsection"><a href="following-users#sec:following"><span class="number">12.1.4</span> Читаемые пользователи</a></li><li class="subsection"><a href="following-users#sec:followers"><span class="number">12.1.5</span> Читатели пользователя</a></li></ol></li><li class="section"><a href="following-users#sec:a_web_interface_for_following_and_followers"><span class="number">12.2</span> Веб-интерфейс для читаемых и читателей</a></li><li><ol><li class="subsection"><a href="following-users#sec:sample_following_data"><span class="number">12.2.1</span> Образцы данных</a></li><li class="subsection"><a href="following-users#sec:stats_and_a_follow_form"><span class="number">12.2.2</span> Статистика и форма для слежения за сообщениями пользователя</a></li><li class="subsection"><a href="following-users#sec:following_and_followers_pages"><span class="number">12.2.3</span> Страницы с читаемыми и читателями</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_the_standard_way"><span class="number">12.2.4</span> Стандартный способ реализации кнопки follow</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_with_ajax"><span class="number">12.2.5</span> Реализация кнопки follow с Ajax</a></li></ol></li><li class="section"><a href="following-users#sec:the_status_feed"><span class="number">12.3</span> Лента сообщений</a></li><li><ol><li class="subsection"><a href="following-users#sec:motivation_and_strategy"><span class="number">12.3.1</span> Мотивация и стратегия</a></li><li class="subsection"><a href="following-users#sec:a_first_feed_implementation"><span class="number">12.3.2</span> Первая реализация потока сообщений</a></li><li class="subsection"><a href="following-users#sec:scopes_subselects_and_a_lambda"><span class="number">12.3.3</span> Пространства, подзапросы и лямбда</a></li><li class="subsection"><a href="following-users#sec:the_new_status_feed"><span class="number">12.3.4</span> Новая лента сообщений</a></li></ol></li><li class="section"><a href="following-users#sec:following_conclusion"><span class="number">12.4</span> Заключение</a></li><li><ol><li class="subsection"><a href="following-users#sec:extensions_to_the_sample_application"><span class="number">12.4.1</span> Расширения к примеру приложения</a></li><li><ol><li class="subsubsection"><a href="following-users#sec:replies">Реплики</a></li><li class="subsubsection"><a href="following-users#sec:messaging">Обмен сообщениями</a></li><li class="subsubsection"><a href="following-users#sec:follower_notifications">Уведомления о новых читателях</a></li><li class="subsubsection"><a href="following-users#sec:password_reminders">Напоминание пароля</a></li><li class="subsubsection"><a href="following-users#sec:signup_confirmation">Подтверждение регистрации</a></li><li class="subsubsection"><a href="following-users#sec:rss_feed">RSS канал</a></li><li class="subsubsection"><a href="following-users#sec:rest_api">REST API</a></li><li class="subsubsection"><a href="following-users#sec:search">Поиск</a></li></ol></li><li class="subsection"><a href="following-users#sec:guide_to_further_resources"><span class="number">12.4.2</span> Руководство по дальнейшим ресурсам</a></li></ol></li><li class="section"><a href="following-users#sec:following_exercises"><span class="number">12.5</span> Упражнения</a></li></ol></li></ol></div>


<div id="main_content"></div>


<p> <span class="preamble">
 <span id="foreword">
<strong> Предисловие</strong> <br />
 </span>
 </span></p>

<p>Моя компания (CD Baby) была одной из первых громко перешедших на Ruby on Rails, а затем еще громче вернувшейся обратно на PHP (Google расскажет об этой драме). Эту книгу, написанную Майклом Хартлом так высоко рекомендовали, что я должен был попробовать её, и <em>Ruby on Rails Tutorial</em> это всё, что я использовал, чтобы вернуться к Rails.</p>

<p>Хотя я уже прошел через много книг по Rails, это одна из немногих, что, наконец, зацепила меня. Было много написано книг типа &laquo;Путь Rails&raquo; — после которых я чувствовал себя неестественно, но после этой книги я наконец почувствовал себя естественно. Это также единственная книга по Rails, которая соблюдает методику &laquo;разработка через тестирование&raquo; в течении всего времени, этот подход строго рекомендуется специалистами, но никогда не был так чётко продемонстрировал ранее. Наконец, Git, GitHub и Heroku присутствуют в демо-примерах, автор действительно дает вам почувствовать, что он хотел сделать реальный проект. Учебный код примеров не изолирован.</p>

<p>Линейное повествование — отличный формат. Лично я прошел Rails Tutorial в течении трёх долгих дней, делая все примеры и задачи в конце каждой главы. Делайте всё от начала до конца, не прыгая, и вы получите максимальную выгоду.</p>

<p>Наслаждайтесь!</p>

<p><a href="http://sivers.org/">Derek Sivers</a> (<a href="http://sivers.org/">sivers.org</a>) <br />
<em>Ранее: основатель,</em> <a href="http://www.cdbaby.com/"><em>CD Baby</em></a> <br />
<em>В настоящее время: основатель</em> <a href="http://thoughts.pro/"><em>Thoughts Ltd.</em></a> <br /></p>

<p> <span class="preamble">
<strong> Благодарности</strong> <br />
 </span></p>

<p><em>Ruby On Rails Учебник</em> во многом обязан моей предыдущей книге по Rails, <em>RailsSpace</em> и, следовательно, моему соавтору <a  href="http://aure.com/">Aurelius Prochazka</a>. Я хотел бы поблагодарить Aure как и за работу, которую он проделал над прошлой книгой, так и за поддержку этой. Я также хотел бы поблагодарить Debra Williams Cauley, моего редактора обеих книг <em>RailsSpace</em> и <em>Rails Tutorial</em>; до тех пор, пока она держит меня в бейсболе, я буду продолжать писать книги для нее.</p>

<p>Я хотел бы поблагодарить большой список тех, кто учили и вдохновили меня на протяжении многих лет: David Heinemeier Hansson, Yehuda Katz, Carl Lerche, Jeremy Kemper, Xavier Noria, Ryan Bates, Geoffrey Grosenbach, Peter Cooper, Matt Aimonetti, Gregg Pollack, Amy Hoy, Dave Chelimsky, Pat Maddox, Tom Preston-Werner, Chris Wanstrath, Chad Fowler, Josh Susser, Obie Fernandez, Ian McFarland, Steven Bristol, Giles Bowkett, Evan Dorn, Long Nguyen, James Lindenbaum, Adam Wiggins, Tikhon Bernstam, Ron Evans, Wyatt Greene, Miles Forrest, хороших людей из Pivotal Labs, команду Heroku, thoughtbot ребят, и команду GitHub. Наконец, многих, многих читателей, которых слишком много для составления списка внёсших большое количество сообщений об ошибках и предложений во время написания этой книги, и я с благодарностью признаю их помощь в написании ее настолько хорошей насколько возможно.<br /></p>

<p> <span class="preamble">
 <span id="author">
<strong> Об авторе</strong> <br />
 </span>
 </span></p>

<p><a href="http://michaelhartl.com/">Майкл Хартл</a> &#8211; программист, издатель и предприниматель. Майкл был соавтором учебника по Rails <em>RailsSpace</em>, бестселлера , опубликованного в 2007 году и был сооснователем и ведущим разработчиком <a href="http://insoshi.com/">Insoshi</a>, популярной платформы социальной сети на Ruby on Rails. Ранее он преподавал теоретическую и компьютерную физику в <a href="http://www.caltech.edu/">California Institute of Technology</a> (Caltech), где он получил Lifetime Achievement Award за выдающиеся достижения в преподавании. Майкл закончил <a href="http://college.harvard.edu/">Harvard College</a>, имеет <a href="http://resolver.caltech.edu/CaltechETD:etd-05222003-161626">Ph.D. in Physics</a>  <a href="http://www.caltech.edu/">Caltech</a>, и является выпускником <a href="http://ycombinator.com/">Y&nbsp;Combinator</a> entrepreneur program (??). <br /></p>

<p> <span id="license" class="preamble">
<strong> Копирайт и лицензия</strong> <br />
 </span></p>

<p><em>Ruby on Rails Tutorial: Learn Rails by Example</em>. Copyright &copy; 2010 by Michael Hartl. Весь исходный код в <em>Ruby on Rails Tutorial</em> доступен доступен под <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>, а также под <a href="http://en.wikipedia.org/wiki/Beerware">Beerware License</a>.</p>

<pre class="verbatim">   Copyright (c) 2010 Michael Hartl

   Настоящим разрешением утверждено: бесплатно для всех!
   получение копии этого ПО и связанной документации. 
   (так называемое &quot;Software&quot;), называемое далее Software
   за исключением ограничений, включающих введение 
   ограничение прав использования, копирования, модификации,
   объединения, публикации, дистрибуции, сублицензирования
   и/или продажи копий Software, и допуская персональное
   использование Software конечными пользователями при
   выполнении следующих условий:

   Прилагаемая к документам об авторском праве записка 
   и записка с разрешением должны быть включены во все
   копии значительных частей Software.

   ДАННОЕ SOFTWARE ПРЕДОСТАВЛЕНО «КАК ЕСТЬ» БЕЗ КАКИХ БЫ ТО НИ БЫЛО
   ГАРАНТИЙ, ВЫРАЖЕННЫХ ЯВНО ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ,
   НО НЕ ОГРАНИЧИВАЯСЬ ГАРАНТИЯМИ КОММЕРЧЕСКОЙ ЦЕННОСТИ, 
   СООТВЕТСТВИЯ ПО ЕГО ПРЕДНАЗНАЧЕНИЮ И ЦЕЛОСТНОСТИ ПО. 
   НИ В КАКОМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ
   ОТВЕТСТВЕННОСТИ ПО ИСКАМ О ВОЗМЕЩЕНИИ УЩЕРБА, УБЫТКОВ
   ИЛИ ДРУГИХ ТРЕБОВАНИЙ ПО ДЕЙСТВУЮЩИМ КОНТРАКТАМ,
   ДЕЛИКТАМ ИЛИ ИНОМУ, ВОЗНИКШИМ ИЗ, ИМЕЮЩИМ ПРИЧИНОЙ ИЛИ
   СВЯЗАННЫМ С SOFTWARE ИЛИ ИСПОЛЬЗОВАНИЕМ ИЛИ ИНЫМИ ДЕЙСТВИЯМИ С SOFTWARE.</pre>




<pre class="verbatim">/*
 * ------------------------------------------------------------
 * &quot;THE BEERWARE LICENSE&quot; (Revision 42):
 * Весь код написан Майклом Хартлом. До тех пор пока вы осознаете это, 
 * вы можете делать с ним все что захотите. Если мы когда нибудь
 * встретимся, и если это того стоило, вы можете купить мне  
 * пиво в ответ.
 * ------------------------------------------------------------
 */</pre>




<div id="top"></div>


<h1 class="chapter"><a id="sec:1" href="beginning#top" class="heading"><span class="number">Глава 1</span> От нуля к развертыванию</a></h1>

<p>Добро пожаловать в <a   href="http://railstutorial.org/book"><em>Ruby on Rails Tutorial: Изучаем Rails на примерах</em></a> Цель этой книги состоит в том, чтобы стать лучшим ответом на вопрос: &laquo;Если я хочу изучить веб-разработку на <a  href="http://rubyonrails.ru/">Ruby on Rails</a>, с чего я должен начать&raquo; К тому времени, когда Вы завершите Ruby on Rails Tutorial, вы будете иметь все знания необходимые для разработки и разворачивания собственных веб-приложений. Вы также будете готовы извлечь выгоду из многих более продвинутых книг, блогов и видеороликов, которые являются частью процветающей образовательной экосистемы Rails. Наконец, так как <em>Учебное руководство Ruby on Rails</em> использует Rails 3.0, информация, которую Вы получаете здесь, будет полностью актуализирована с самой последней и самой великой версией Rails.<sup class="footnote" id="fnref:1.1"><a href="#fn:1.1">1</a></sup></p>

<p><em>Ruby on Rails Tutorial</em> следует, по существу, тому же подходу, что и моя предыдущая книга о Rails,<sup class="footnote" id="fnref:1.2"><a href="#fn:1.2">2</a></sup> обучение веб-разработке на Rails путём создания реального приложения с нуля. Как отмечает <a href="http://sivers.org">Дерек Сиверс</a> в предисловии, эта книга структурирована линейно, поэтому ее следует читать от начала до конца. Если вы привыкли прыгать в технических книгах, применение этого линейного подхода может потребовать от Вас некоторой корректировки, но я предлагаю попробовать. Вы можете думать о <em>Ruby on Rails Tutorial</em> как о видео-игре, где Вы &#8211; главный герой, получающий новый уровень, как Rails разработчик, в каждой главе. (упражнения &#8211; это <a  href="http://ru.wikipedia.org/wiki/Босс_%28компьютерные_игры%29">минибоссы</a>)</p>

<p>В этой первой главе мы начнем изучение Ruby on Rails, с установки всего необходимого програмного обеспечения и инсталяции нашей среды разработки (<a class="ref" href="beginning#sec:up_and_running">Раздел&nbsp;1.2</a>). Затем мы создадим наше первое приложение Rails, названное (достаточно подходяще) <tt>first_app</tt>. <em>Rails Tutorial</em> прививает хорошие навыки программирования, так что сразу после создания нашего свежего нового проекта Rails, мы поместим его в управление версиями с Git (<a class="ref" href="beginning#sec:version_control">Раздел&nbsp;1.3</a>). И, верите вы в это или нет, в этой главе, мы даже разместим наше первое приложение в веб <em>развернув</em> его в продакшен  (<a class="ref" href="beginning#sec:deploying">Раздел&nbsp;1.4</a>).</p>

<p>В <a class="ref" href="a-demo-app#top">Глава&nbsp;2</a>, мы сделаем второй проект, целью которого будет демонстрация основ работы Rails приложения. Чтобы быстро стартануть, мы создадим это <em>демонстрационное приложение</em> (названное <tt>demo_app</tt>) используя scaffolding (<a class="ref" href="beginning#sidebar:scaffolding">Box&nbsp;1.1</a>) для генерации кода; так как этот код и уродлив и сложен, <a class="ref" href="a-demo-app#top">Глава&nbsp;2</a> мы сосредоточимся на взаимодействии с демонстрационным приложением через его <em>URL</em><sup class="footnote" id="fnref:1.3"><a href="#fn:1.3">3</a></sup> используя веб-браузер.</p>

<p>В <a class="ref" href="static-pages#top">Главе&nbsp;3</a>, мы создадим <em>пример приложения</em> (названный <tt>sample_app</tt>), на сей раз написав весь код с нуля. Мы разработаем демонстрационное приложение, используя <em>разработку через тестирование (test-driven development)</em> (TDD), начнем <a class="ref" href="static-pages#top">Главу&nbsp;3</a> созданием статических страниц, затем добавим немного динамического контента. В  <a class="ref" href="rails-flavored-ruby#top">Глава&nbsp;4</a> мы узнаем немного о языке Ruby, лежащем в основе Rails. Затем, с <a class="ref" href="filling-in-the-layout#top">Главы&nbsp;5</a> по <a class="ref" href="updating-showing-and-deleting-users#top">Главу&nbsp;10</a>, мы завершим основу для примера приложения, сделав макет сайта, модель данных пользователя, и полные регистрационную и аутентификационную системы. Наконец, в <a class="ref" href="user-microposts#top">Главе&nbsp;11</a> и <a class="ref" href="following-users#top">Глава&nbsp;12</a> мы добавим микроблогинг и социальные функции, чтобы сделать рабочий пример сайта.</p>

<p>Конечный пример приложения будет иметь большое сходство с одним популярным <a href="http://twitter.com/">сайтом</a> &#8211; который, по совпадению, изначально был также написан в Rails.<sup class="footnote" id="fnref:1.4"><a href="#fn:1.4">4</a></sup> Хотя, по необходимости, наши усилия и сосредоточатся на этом конкретном примере приложения, на протяжении <em>Учебника Rails</em> акцент будет на общих принципах, так, чтобы у Вас был прочный фундамент независимо от того, какие виды веб-приложений Вы хотите создавать.</p>

<div class="label" id="sidebar:scaffolding"></div>


<div class="sidebar"><span class="title"><span class="header">Блок 1.1.</span><span class="description">Scaffolding: Быстрее, легче, обольстительней</span></span>
<p>С начала Rails извлек выгоду из ощутимого чувства волнения, начавшегося с известного <a href="http://media.rubyonrails.org/video/rails_take2_with_sound.mov">15-minute weblog video</a> творца Rails David Heinemeier Hansson, теперь обновленного как <a href="http://media.rubyonrails.org/video/rails_blog_2.mov">15-minute weblog using Rails&nbsp;2</a> Райаном Бэйтсом. Эти видео - отличный способ познакомиться с мощью Rails, и я рекомендую посмотреть их. Но предупреждаю: они совершают свой удивительный пятнадцатиминутный подвиг, используя функцию под названием <em>scaffolding</em>, которая полагается в большЕй степени на <em>сгенерированный код</em>, волшебно создаваемый Rails командой <code>generate</code>.</p>

<p>При написании <em>Учебника Ruby on Rails</em> было заманчиво положиться на подход scaffolding&mdash;он&rsquo; <a href="http://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BB%D0%B0_%28%D0%97%D0%B2%D1%91%D0%B7%D0%B4%D0%BD%D1%8B%D0%B5_%D0%B2%D0%BE%D0%B9%D0%BD%D1%8B%29#.D0.A2.D1.91.D0.BC.D0.BD.D0.B0.D1.8F_.D1.81.D1.82.D0.BE.D1.80.D0.BE.D0.BD.D0.B0">быстрее, легче, обольстительней</a>. Но сложность и огромный объем кода в scaffolding могут быть крайне подавляющими для начинающего разработчика Rails, может быть Вы сможете его использовать, но Вы, вероятно, не будете понимать его. Следуя scaffolding подходу Вы рискуете превратиться в виртуозного генератора скриптов с пустяковыми (и хрупкими) фактическими знаниями Rails.</p>

<p>В <em>Ruby on Rails Учебнике</em>, мы будем придерживаться (почти) полярно противоположного подхода: хотя <a class="ref" href="a-demo-app#top">Глава&nbsp;2</a>  и разрабатывает небольшое демонстрационное приложение, с использованием scaffolding, ядро <em>Учебника</em> &mdash; пример приложения, которое мы начнем писать в <a class="ref" href="static-pages#top">Главе&nbsp;3</a>. На каждом этапе разработки примера приложения мы будем генерировать <em>маленькие, съедобного размера</em> куски кода, достаточно простые для понимания, но все же достаточно непривычные, требующие усилий. Суммарный эффект будет более глубоким, а более гибкое знание Rails даст Вам хорошие предпосылки для написания веб-приложения почти любого типа.</p>
</div>




<div class="label" id="sec:introduction"></div>


<h2><a id="sec:1.1" href="beginning#sec:introduction" class="heading"><span class="number">1.1</span> Введение</a></h2>


<p>Со времен его дебюта в 2004 году, Ruby on Rails быстро стал одним из самых мощных и популярных фреймворков для построения динамических веб-приложений. Пользователи Rails охватывают широкий диапазон задач, начиная со стартапов и заканчивая огромными компаниями: <a href="http://posterous.com/">Posterous</a>, <a href="http://uservoice.com/">UserVoice</a>, <a href="http://37signals.com/">37signals</a>, <a href="http://shopify.com/">Shopify</a>, <a href="http://github.com/">GitHub</a>, <a href="http://scribd.com/">Scribd</a>, <a href="http://hulu.com/">Hulu</a>,  <a href="http://yellowpages.com/">Yellow Pages</a>&mdash;вот <a href="http://rubyonrails.org/applications">список сайтов, использующих Rails</a> и он все пополняется и пополняется. Также существуют веб-магазины по разработке, специализируюшиеся на Rails, такие как <a href="http://entp.com/">ENTP</a>, <a href="http://thoughtbot.com/">thoughtbot</a>, <a href="http://pivotallabs.com/">Pivotal Labs</a>, и <a href="http://hashrocket.com/">Hashrocket</a>, плюс бесчисленные независимые консультанты, преподаватели и контрагенты.</p>

<p>What makes Rails so great? First of all, Ruby on Rails is 100% open-source, available under the permissive <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>, and as a result it also costs nothing to download and use. Rails also owes much of its success to its elegant and compact design; by exploiting the malleability of the underlying <a href="http://ruby-lang.org/">Ruby</a> language, Rails effectively creates a <a href="http://en.wikipedia.org/wiki/Domain_Specific_Language">domain-specific language</a> for writing web applications. As a result, many common web programming tasks&mdash;such as generating HTML, making data models, and routing URLs&mdash;are easy with Rails, and the resulting application code is concise and readable.</p>

<p>Rails также быстро адаптируется к новым тенденциям в веб-технологиях. Например, Rails был одним из первых, кто полностью реализовал архитектурный стиль REST для веб-приложений. И когда другие фреймворки успешно разрабатывают новые техники, создатель Rails <a href="http://loudthinking.com/">David Heinemeier Hansson</a> и <a href="http://rubyonrails.org/core">рабочая группа Rails</a> не стесняются использовать их идеи. Пожалуй, наиболее ярким примером является слияние Rails и Merb (конкурирующая веб-платформа), так что Rails теперь получает преимущества от модульной конструкции Merb, стабильного <a href="http://ru.wikipedia.org/wiki/API">API</a>, а также повышеной производительности.(Любой, кто следил за переговорами между разработчиком Merb и членом рабочей группы Rails <a href="http://yehudakatz.com/">Yehuda Katz</a> не может не заметить, что чрезвычайно хорошей идеей было принять на борт команду Merb.)</p>

<p>Наконец, Rails выигрывает от необычайно увлечённого и разнообразного сообщества. Результаты: сотни open-source <a href="http://contributors.rubyonrails.org/">соразработчиков</a>, хорошо посещаемые <a href="http://railsconf.com/">конференции</a>, огромное количество <a href="http://agilewebdevelopment.com/plugins">плагинов</a> и <a href="http://rubygems.org/">гемов</a> (автономные решения конкретных проблем, таких как постраничный вывод, и загрузка изображений), богатый набор информативных блогов, и рог изобилия форумов и каналов IRC. Большое количество активных програмистов Rails также облегчает обработку неизбежных ошибок приложений: алгоритм &#8211; “Ищи в Google сообщение об ошибке” &#8211; почти всегда добывает соответствующее сообщение в блоге или ветке форума.</p>

<div class="label" id="sec:comments_for_various_readers"></div>


<h3><a id="sec:1.1.1" href="beginning#sec:comments_for_various_readers" class="heading"><span class="number">1.1.1</span> Комментарии для разных читателей</a></h3>


<p><em>Учебник Rails</em> содержит интегрированные учебники не только по Rails, но и по лежащему в его основе Ruby, а также <a href="http://ru.wikipedia.org/wiki/HTML">HTML</a>, <a href="http://ru.wikipedia.org/wiki/CSS">CSS</a>, немного <a href="http://ru.wikipedia.org/wiki/JavaScript">JavaScript</a>, и даже чуть чуть <a href="http://ru.wikipedia.org/wiki/SQL">SQL</a>. Это означает, что, независимо от ваших знаний веб-разработки, к моменту завершения этого учебника вы будете готовы для более продвинутых Rails ресурсов, а также к более систематичной проработке других упомянутых тем.</p>

<p>Rails получает большую часть своей силы от &laquo;магии&raquo;, то есть от функций платформы (таких, как автоматическое добавление атрибутов объекта из столбцов базы данных), совершающих чудеса, но чьи механизмы могут быть весьма таинственными. <em>Учебник Ruby on Rails </em> разработан, не для объяснения этого волшебства - главным образом, потому что большинству разработчиков приложений Rails никогда не понадобится знать, что находится за занавесом. (В конце концов сам Ruby главным образом (по большей части) пишется на языке программирования C, но Вы не должны копаться в исходниках C, чтобы использовать Ruby.) Если Вы - неисправимый "сдергиватель занавесов", я рекомендую книгу <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> Оби Фернандеса в качестве сопроводительной литературы к <em>Ruby on Rails Tutorial</em>.</p>

<p>Хотя у этой книги нет никаких формально обязательных требований, Вы должны иметь, по крайней мере <em>некоторый</em> опыт работы с компьютером. Если вы никогда раньше не использовали  даже текстовый редактор, будет тяжело, но если у вас достаточно решимости вы, вероятно, дойдёте до конца. Если, с другой стороны, Ваш <code>.emacs</code> файл настолько сложен, что может заставить плакать взрослого мужчину, есть все еще много материалов, для Вашего развития. <em>Rails Tutorial</em> предназначен для обучения разработке на Rails вне зависимости от ваших знаний, но Ваш путь и впечатление от чтения  будут зависеть от Ваших индивидуальных обстоятельств. <br /></p>

<p><strong>Все читатели:</strong>  Один общий вопрос при изучении Rails состоит в том, изучить ли Ruby сначала. Ответ зависит от Вашего персонального стиля обучения. Если Вы предпочитаете изучать все систематически с нуля, то изучение Ruby сначала могло бы подойти для Вас, и есть несколько книжных рекомендаций в этом разделе, чтобы дать вам возможность начать. С другой стороны много начинающих Rails разработчиков  вдохновляются созданием веб-приложений, и скорее всего не станут сидеть над книгой в 500 страниц о чистом Ruby прежде чем написать единственную веб-страницу. Кроме того, приёмы необходимые для Rails разработчиков отличается от тех, что вы найдете в введении к книге по Ruby, тогда как Rails Tutorial посвящен именно приёмам работы с Rails. Если ваш основной интерес в написании веб-приложений, я рекомендую начинать с Rails Tutorial, а затем читать книги по Ruby. Это не бескомпромиссное предложение: если Вы начнете читать Учебное руководство Rails и почувствуете что Ваше (отсутствующее) знание Ruby, сдерживает Вас, без опасений переключайтесь на книгу Ruby и возвращайтесь, когда почувствуете себя готовым. Вы можете также познакомиться с Ruby, следуя коротким онлайновым учебным руководствам, вроде тех что могут быть найдены на <a href="http://www.ruby-lang.org/">http://www.ruby-lang.org/</a> или <a href="http://rubylearning.com/">http://rubylearning.com/</a>.</p>

<p>Другой распространенный вопрос, состоит в том, стоит ли использовать тестирование с самого начала. Как было отмечено во введении, <em>Rails Tutorial</em> использует Разработку через тестирование (также называемую "сначала тест" разработкой), которая по моему мнению является лучшим способом разработки Rails приложений, но это действительно превносит значительный объем работы и сложностей. Если вы обнаружили себя застрявшим на тестировании, не стесняйтесь пропустить его при первом прочтении.<sup class="footnote" id="fnref:1.5"><a href="#fn:1.5">5</a></sup> Действительно, некоторые читатели могут запутаться в таких вещах, как тестирование, системе контроля версий, а также в развертывании приложения, если вы не найдете в себе энергии по любому из этих шагов, <em>пожалуйста, пропустите их</em>. Хотя у меня включен только материал, который я считаю чрезвычайно важным для разработки профессиональных Rails приложений, только код основного приложения является строго необходимым в первое время. <br /></p>

<p><strong>Неопытные программисты (не дизайнеры)</strong>: Учебник Rails не предполагает наличие других знаний, кроме общей компьютерной грамотности, поэтому, если у вас ограниченный опыт программирования, то эта книга является хорошим стартом. Пожалуйста, имейте в виду, что это только первый шаг на долгом пути; веб-разработка включает в себя множество вопросов, таких как HTML / CSS, JavaScript, базы данных (включая SQL), системы контроля версиями и развертывание. Эта книга содержит лишь краткое введение в эти вопросы, но еще многое нужно изучать дополнительно. <br /></p>

<p><strong>Неопытные программисты (веб дизайнеры)</strong>: Ваши навыки web дизайна будут Вам большим подспорьем, поскольку вы уже, вероятно, знаете HTML и CSS. После прочтения этой книги вы будете готовы работать с увлекательными проектами Rails и у вас будет возможность начать собственный проект. Вы можете обнаружить материал программирования непростым, но язык Ruby необычайно дружелюбен к  новичкам, особенно к тем, у кого есть художественные наклонности.<br /></p>

<p>После окончания <em>Ruby on Rails Учебника</em>, я рекомендую, малознакомое  програмистам чтиво <a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a> Питера Купера, который отчасти использует ту же самую основную концепцию обучения что и <em>Rails Учебник</em>. Я также рекомендую <a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a> Хэла Фултона. Наконец, чтобы получить более глубокое понимание Rails, я рекомендую <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> Оби Фернандеса.</p>

<p>Веб-приложения, даже относительно простые, по своей природе довольно сложны. Если Вы абсолютный новичок в веб-программировании и находите <em>Учебник Rails</em> подавляющим, может случиться так, что Вы все же не совсем готовы делать веб-приложения. В этом случае я предложил бы изучить основы HTML и CSS, а затем дать <em>Учебнику Rails</em> еще один шанс. (К сожалению, здесь  у меня нет персональной рекомендации, но <a href="http://headfirstlabs.com/books/hfhtml/"><em>Head First HTML</em></a> выглядит многообещающе, и один читатель рекомендовал <a href="http://www.amazon.com/gp/product/0596526873?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0596526873"><em>CSS: The Missing Manual</em></a> (автор -  David Sawyer McFarland.) Вы могли бы также рассмотреть чтение первых нескольких глав <a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a>, которое начинается с примеров, намного меньших нежели развитое веб-приложение. <br /></p>

<p><strong>Опытные программисты, плохо знакомые с веб-разработкой</strong>: Ваш предшествующий опыт означает, что Вы, вероятно, уже понимаете такие идеи как классы, методы, структуры данных, и т.д., что является большим преимуществом. Предупреждаю, что, если Вы ранее программировали на C/C ++ или Java, вы можете найти Ruby немного странным, и может потребоваться некоторое время, чтобы привыкнуть к нему; в конце концов Вы справитесь. (Ruby даже позволит Вам помещать точки с запятой в конце строк, если Вы сильно по ним скучаете.) Учебное руководство Rails освещает все веб-специфичные идеи, которые Вам нужны, так что не волнуйтесь, что не знаете в настоящий момент чем отличается <tt>PUT</tt> от <tt>POST</tt>.<br /></p>

<p><strong>Опытные веб-разработчики, плохо знакомые с Rails:</strong> у Вас есть большое преимущество, особенно если Вы ранее использовали динамичный язык, такой как PHP или (даже лучше) Python. Основа того, что мы освещаем, вероятно, будет знакома, но разработка через тестирование может оказаться в новинку для Вас, как может быть и структурно оформленный REST стиль, излюбленный Рельсами. У Ruby есть свои собственные характерные особенности, так что они,  вероятно, также будут вновинку.<br /></p>

<p><strong>Опытные Ruby программисты:</strong> группа Ruby программистов, которые не знают Rails, является малой в настоящее время, но если Вы - член этой элитной группы, можете пролистать эту книгу, а затем перейти к <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> Оби Фернандеса. <br /></p>

<p><strong>Неопытные програмисты Rails:</strong> Вы, возможно, читали некоторые другие учебные руководства и сделали несколько малых приложений Rails самостоятельно. Основываясь на отзывах читателей, я уверен, что вы можете многое почерпнуть из этой книги. Между прочим, методы здесь могут оказаться более актуальными чем те, которые Вы добыли, когда первоначально изучали Rails. <br /></p>

<p><strong>Опытные программисты  Rails:</strong> Эта книга не нужна вам, но многие опытные разработчики Rails удивляются сколько нового они узнают из этой книги, и вы можете наслаждаться перспективой дальнейшего развития Rails. <br /></p>

<p>После прочтения <em>Учебника Ruby on Rails</em> я рекомендую опытным (не-Ruby) програмистам почитать <a href="http://www.amazon.com/gp/product/1933988657?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1933988657"><em>The Well-Grounded Rubyist</em></a> автора David&nbsp;A. Black, это отличный глубокий материал, описывающий Rails с самых основ, или <a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a> Хэла Фултона, который также имеет высокий уровень, но проявляет более актуальный подход. Затем переходите на <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> для углубления ваших знаний о Rails.<br /></p>

<p>В конце этого процесса, независимо от того где Вы начали, Вы будете готовы к более-менее продвинутым ресурсам Rails. Вот некоторые из тех, что я особенно рекомендую:</p>

<ul>

<li><a href="http://railscasts.com/">Railscasts</a>: Замечательные бесплатные Rails скринкасты <span class="c1">(# очень рекомендую их качественный перевод на русский на <a href="http://www.railscasts.ru/">http://www.railscasts.ru/</a> )</span></li>
<li><a href="http://peepcode.com/">PeepCode</a>, <a href="http://pragmatic.tv/">Pragmatic.tv</a>, <a href="http://envycasts.com/">EnvyCasts</a>: Замечательные платные скринкасты</li>
<li><a href="http://guides.rubyonrails.org/">Rails Guides</a>: Хорошие актуальные и обновленные Rails руководства. <em>Учебник Rails</em> часто рекомендует <em>Rails Guides</em> для более углубленного изучения определенных тем.(<span class="c1"> # их перевод можно найти на <a href="http://www.rusrails.ru/">http://www.rusrails.ru/</a> </span>)</li>
<li><a href="http://www.google.com/search?q=ruby+on+rails+blogs#hl=ru&sugexp=llsfp&pq=ruby%20on%20rails%20blogs&xhr=t&q=ruby+on+rails+%D0%B1%D0%BB%D0%BE%D0%B3&cp=19&pf=p&sclient=psy&aq=0&aqi=&aql=&oq=ruby+on+rails+%D0%B1%D0%BB%D0%BE%D0%B3&pbx=1&fp=22ec42d6ec1b9a43&bs=1">Rails блоги</a>: Слишком много, чтобы составить их список, но там содержатся тонны полезной информации. </li>

</ul>




<h3><a id="sec:1.1.2" href="beginning#sec:1.1.2" class="heading"><span class="number">1.1.2</span> &ldquo;Масштабирование&rdquo;  Rails</a></h3>


<p>Прежде чем двигаться дальше, я хотел бы воспользоваться моментом для решения одного вопроса, преследовавшего Rails прежде всего в первые дни его существования: мнимая неспособность Rails к &laquo;масштабируемости&laquo;, то есть к обработке большого трафика. Частично этот вопрос опирается на заблуждение; <a href="http://idleprocess.wordpress.com/2009/11/24/presentation-summary-high-performance-at-massive-scale-lessons-learned-at-facebook/">Вы масштабируете <em>сайт</em>, а не фреймворк</a>, и Rails, каким бы обалденным не был &#8211; лишь фреймворк. Таким образом, реальный вопрос должен звучать так: &laquo;Может ли сайт построенный на Rails масштабироваться?&raquo; В любом случае, на этот вопрос теперь можно окончательно ответить утвердительно: некоторые из наиболее нагруженных сайтов в мире используют Rails. Вообще масштабирование выходит за рамки Rails, но будьте уверены, что если <em>Вашему</em> приложению нужно будет справиться с нагрузкой как у Hulu либо как у Yellow Pages, Rails не помешает Вам покорить мир.</p>

<div class="label" id="sec:conventions"></div>


<h3><a id="sec:1.1.3" href="beginning#sec:conventions" class="heading"><span class="number">1.1.3</span> Соглашения в этой книге</a></h3>


<p>Соглашения в этой книге главным образом очевидны; в этом разделе я упомяну лишь те которые, возможно, таковыми не являются.</p>

<p>И <a href="http://railstutorial.org/book">HTML</a> и <a href="http://railstutorial.org/">PDF</a> выпуски этой книги полны ссылками, как к внутренним разделам (таким как <a class="ref" href="beginning#sec:up_and_running">Раздел&nbsp;1.2</a>) так и к внешним сайтам (таким как <a href="http://rubyonrails.org/download">основная страница загрузки Ruby on Rails</a> ).<sup class="footnote" id="fnref:1.6"><a href="#fn:1.6">6</a></sup></p>

<p>Много примеров в этой книге используют командную строку. Для простоты, все примеры командной строки используют приглашение командной строки  в Unix-стиле (знак доллара):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;hello, world&quot;</span>
<span class="go">hello, world</span>
</pre></div>
</div>


<p>Пользователи Windows должны понимать, что их системы будут использовать в качестве приглашения угловую скобку&nbsp;<tt>&gt;</tt>:</p>

<div class="code"><div class="highlight"><pre><span class="go">C:\Sites&gt;echo hello, world</span>
<span class="go">hello, world</span>
</pre></div>
</div>


<p>В Unix системах некоторые команды должны быть выполнены с <code>sudo</code>, (сокращение от “Substitute User DO”) что означает “выполнить от имени суперпользователя”. По умолчанию команда, выполняемая с <code>sudo</code> выполняется как команда администратора, у которого есть доступ к файлам и каталогам, которые недоступны обычному пользователю. Чтобы указать, что использование <code>sudo</code> зависит от системы, используются квадратные скобки, когда это может (или не может) быть необходимо на Вашей системе, так как в этом примере из  <a class="ref" href="beginning#sec:rubygems">Раздела&nbsp;1.2.2</a>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>


<p>Большинство систем Unix/Linux/OS X требует <code>sudo</code> по умолчанию, за исключением использования Ruby Version Manager как рекомендуется в <a class="ref" href="beginning#sec:install_ruby">Разделе&nbsp;1.2.2.3</a>. Отметьте, что <em>недопустимо фактически вводить скобки</em>; следует выполнять или</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo ruby setup.rb
</pre></div>
</div>


<p>или</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby setup.rb
</pre></div>
</div>


<p>в зависимости от Вашей системы.</p>

<p>Rails поставляется с большим количеством команд, которые можно запустить в командной строке. Например, в <a class="ref" href="beginning#sec:rails_server">Разделе&nbsp;1.2.5</a> мы запускаем локальный веб-сервер разработки следующим образом:</p>

<div class="code"><div class="highlight"><pre><span class="nv">$ </span>rails server
</pre></div>
</div>


<p>Как и с приглашением командной строки, <em>Учебник Rails</em> использует конвенцию Unix для разделителей каталога (то есть, косую черту наклоненную вправо&nbsp;<tt>/</tt>). Мой пример приложения из Учебника Rails, например, живет в</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>


<p>На Windows аналогичный каталог выглядел бы</p>

<pre class="verbatim">C:\Sites\sample_app</pre>


<p>Корневой каталог для любого приложения называется Rails root, и впредь все каталоги будут относительно этого каталога. (Отметьте в особенности, что “Rails root” <em>не является</em> корневым каталогом для Rails непосредственно.)  Например, каталог <code>config</code> моего примера приложения это</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config</pre>


<p>Корень Rails здесь - все что перед <code>config</code>, то есть,</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>


<p>Для краткости, при обращении к файлу</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config/routes.rb</pre>


<p>я пропущу корень Rails и просто запишу <code>config/routes.rb</code>.</p>

<p>Наконец, <em>Учебник Rails</em> часто показывает вывод из различных программ (команды оболочки, статус управления версиями, программ Ruby, и т.д.). Из-за неисчислимых небольших различий между различными компьютерными системами, вывод, который Вы увидите, возможно, не всегда совпадет в точности с тем, который показывают в тексте, но это не повод для беспокойства. Кроме того, некоторые команды могут произвести погрешности в зависимости от Вашей системы; вместо того, чтобы пытаться выполнить <a   href="http://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%B7%D0%B8%D1%84%D0%BE%D0%B2_%D1%82%D1%80%D1%83%D0%B4">Сизифову</a> задачу документирования всех таких погрешностей в этом учебном руководстве, я делегирую к алгоритму  “Ищи в Google сообщение об ошибке”, который между прочим является  весьма хорошей практикой для реального программирования.</p>

<div class="label" id="sec:up_and_running"></div>


<h2><a id="sec:1.2" href="beginning#sec:up_and_running" class="heading"><span class="number">1.2</span> За работу</a></h2>


<p>Пришло время, чтобы взяться за дело со средой разработки Ruby on Rails и нашим первым приложением. Здесь будет немного лишних действий, особенно если у Вас нет большого опыта программирования, так что не разочаровывайтесь, если вам понадобиться время чтобы начать работу. Это не только Вы; каждый разработчик проходит через это (часто не раз), но будте уверены, что эти усилия будут щедро вознаграждены.</p>

<div class="label" id="sec:development_tools"></div>


<h3><a id="sec:1.2.1" href="beginning#sec:development_tools" class="heading"><span class="number">1.2.1</span> Среда разработки</a></h3>


<p>Принимая во внимание различные своеобразные настройки и предпочтения, вероятно, существует столько вариантов сред разработки, сколько и Rails программистов, но есть, по крайней мере, две общие темы: текстовый редактор/командная строка и интегрированная среда разработки (IDE). Рассмотрим последнюю первой.</p>

<h4><a id="sec:1.2.1.1" href="beginning#sec:1.2.1.1" class="heading">IDE</a></h4>


<p>В IDE для Rails дефицита нет, основные &#8211;  <a href="http://www.aptana.com/rails/">RadRails</a>, <a href="http://www.jetbrains.com/ruby/index.html">RubyMine</a>, и <a href="http://www.codegear.com/products/3rdrail">3rd Rail</a>. Все кросс-платформенные, и я слышал хорошие вещи о некоторых из них. Я призываю Вас попробовать их и посмотреть, работают ли они на Вас, но признаюсь: я никогда не находил IDE, которая удовлетворяла бы все мои потребности в сфере разработки на Rails - а некоторые IDE я даже не смог запустить.</p>

<h4><a id="sec:1.2.1.2" href="beginning#sec:1.2.1.2" class="heading">Текстовые редакторы и командная строка</a></h4>


<p>Чем же мы должны пользоваться  для разработки приложений Rails, если не какой-либо из грозных IDE все-в-одном? Я думаю, большинство Rails разработчиков выбирают то же, что и я: использовать <em>текстовый редактор</em> для редактирования текста, а <em>командную строку</em> для выполнения команд (<a class="ref" href="beginning#fig:editor_shell">Рис.&nbsp;1.1</a>). Их комбинация зависит от ваших предпочтений и платформы:</p>

<ul>
<li><strong>Macintosh OS X:</strong> Подобно многим разработчикам на Rails, я предпочитаю <a href="http://macromates.com/">TextMate</a>. Другие дополнительные варианты включают Emacs и  <a href="http://code.google.com/p/macvim/">MacVim</a> (запускаемый командой <code>mvim</code>), великолепную Макинтош-версию Vim. <sup class="footnote" id="fnref:1.7"><a href="#fn:1.7">7</a></sup> Я использую <a href="http://iterm.sourceforge.net/">iTerm</a> для терминала командной строки; другие превосходно довольствуются встроенным приложением Terminal.</li>

<li><strong>Linux:</strong> Ваш выбор редакторов в основном аналогичен OS X, за исключением TextMate.  Я рекомендовал бы графический Vim (gVim), <a href="http://projects.gnome.org/gedit/">gedit</a> (с плагинами <a href="http://blog.siverti.com.br/gmate/">GMate</a>), или <a href="http://kate-editor.org/">Kate</a>. Что касается командной строки - Вы полностью упакованы: каждый дистрибутив Linux идет, по крайней мере, с одним терминальным приложением командной строки (а часто и с несколькими).</li>

<li><strong>Windows:</strong> Есть несколько многообещающих редакторов для Windows включая <a href="http://www.vim.org/download.php#pc">Vim</a>, <a href="http://www.e-texteditor.com/">E&nbsp;Text Editor</a>, <a href="http://www.activestate.com/komodo_edit/">Komodo Edit</a>, и <a href="http://www.sublimetext.com/">Sublime Text</a>. Для командной строки я рекомендую использовать ту, которая идет с <a href="http://railsinstaller.org/">Rails Installer</a> (<a class="ref" href="beginning#sec:rails_installer_windows">Раздел&nbsp;1.2.2.1</a>).  </li>

</ul>


<p>Если вы поклонник Vim, не забудьте присоединиться к процветающему сообществу <a href="http://www.google.com/search?q=vim+rails">использующих Vim Rails хакеров</a>. Особенно обратите внимание на <a href="http://www.vim.org/scripts/script.php?script_id=1567">rails.vim</a> расширение и <a href="http://www.vim.org/scripts/script.php?script_id=1658">NERD tree</a> project drawer (??).</p>

<div class="label" id="fig:editor_shell"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/editor_shell.png" alt="editor_shell" /></span></div><div class="caption"><span class="header">Рисунок 1.1: </span><span class="description">Среда разработки   &laquo;текстовый редактор /командная строка&laquo;  (TextMate/iTerm).  <a href="http://railstutorial.org/images/figures/editor_shell-full.png">(полный размер)</a></span></div></div>




<h4><a id="sec:1.2.1.3" href="beginning#sec:1.2.1.3" class="heading">Браузеры</a></h4>


<p>Хотя среди веб-браузеров есть из чего повыбирать, подавляющее большинство програмистов Rails используют Firefox, Safari, или Chrome, при разработке. Скриншоты в Учебнике Rails обычно сделаны в браузере Firefox. Если Вы используете Firefox, я советую использовать <a href="http://getfirebug.com/">Firebug</a> надстройку, которая позволяет выполнять все виды магии, такие как динамическая проверка (и даже редактирование) структуры HTML и CSS правил на любой странице. Для тех, кто не использует Firefox, <a href="http://getfirebug.com/firebuglite">Firebug Lite</a> работает  с большинством других браузеров, а у Safari и Chrome есть встроенная, &laquo;Просмотр кода элемента&raquo; функция, доступная по щелчку правой кнопкой мыши на любой части страницы. Независимо от того, какой браузер Вы используете, практика показывает, что время затраченное на изучение таких инструментов, как веб-инспектор, будет щедро вознаграждено.</p>

<h4><a id="sec:1.2.1.4" href="beginning#sec:1.2.1.4" class="heading">Примечание о инструментах</a></h4>


<p>В процессе становления и запуска Вашей среды разработки, Вы можете обнаружить, что Вы тратите  <em>много</em> времени, на получение правильных навыков работы. Процесс обучения для редакторов и IDE особенно длинен; можно потратить недели на TextMate или одни только учебные руководства Vim. Если Вы плохо знакомы с этим делом, я хочу уверить Вас, что <em>тратить время на изучение инструментов - это нормально</em>. Все проходят через это. Иногда это печалит, и раздражает, особенно когда у Вас в голове есть потрясающее веб-приложение, и вы <em>просто хотите выучить Rails</em>, но тратите неделю изучая некий таинственный древний редактор Unix только чтобы начать. Но мастер должен знать свои инструменты; в итоге усилия будут вознаграждены.</p>

<div class="label" id="sec:rubygems"></div>


<h3><a id="sec:1.2.2" href="beginning#sec:rubygems" class="heading"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, и Git</a></h3>


<p>Теперь пора установить Ruby и Rails. Классический способ установки - из исходников со <a href="http://rubyonrails.org/download">Ruby on Rails download page</a>. страницы загрузки Ruby on Rails</a>. Я предполагаю, что  вы можете перейти туда сейчас; некоторые части этой книги могут быть прочитаны с пользой и в офлайне, но только не эта часть. Я лишь прокомментирую некоторые  шаги.</p>

<div class="label" id="sec:rails_installer_windows"></div>


<h4><a id="sec:1.2.2.1" href="beginning#sec:rails_installer_windows" class="heading">Rails Installer (Windows)</a></h4>


<p>Установка Rails на Windows, применялась раньше как орудие пыток, но благодаря усилиям хороших людей в <a href="http://engineyard.com/">Engine Yard</a>&mdash;особенно Dr.&nbsp;Nic Williams и Wayne&nbsp;E. Seguin&mdash;установка Rails и связанного програмного обеспечения на Windows, теперь невероятно легка. Если Вы используете Windows, перейдите на <a href="http://railsinstaller.org/">Rails Installer</a> (<a href="http://railsinstaller.org/">http://railsinstaller.org/</a>) и загрузите исполняемый файл Rails Installer. Дважды кликните исполняемый файл и следуйте инструкциям, чтобы установить Git (таким образом, можете пропустить <a class="ref" href="beginning#sec:install_git">Раздел&nbsp;1.2.2.2</a>), Ruby (пропустите <a class="ref" href="beginning#sec:install_ruby">Раздел&nbsp;1.2.2.3</a>), RubyGems (пропустите <a class="ref" href="beginning#sec:install_rubygems">Раздел&nbsp;1.2.2.4</a>), и, непосредственно, (пропустите <a class="ref" href="beginning#sec:install_rails">Раздел&nbsp;1.2.2.5</a>). Как только установка закончится, можете перейти к созданию первого приложения в <a class="ref" href="beginning#sec:the_first_application">Разделе&nbsp;1.2.3</a>.</p>

<div class="label" id="sec:install_git"></div>


<h4><a id="sec:1.2.2.2" href="beginning#sec:install_git" class="heading">Установка Git</a></h4>


<p>Большая часть экосистемы Rails так или иначе зависит  от <a href="http://en.wikipedia.org/wiki/Revision_control">системы управления версиями</a> называемой <a href="http://git-scm.com/">Git</a> (освещаемой более подробно в <a class="ref" href="beginning#sec:version_control">Разделе&nbsp;1.3</a>). Поскольку его использование является повсеместным, следует установить Git даже на этой ранней стадии; я предлагаю следовать инструкциям по установке для Вашей платформы в <a href="http://progit.org/book/ch1-4.html">Installing Git разделе <em>Pro Git</em></a>.</p>

<div class="label" id="sec:install_ruby"></div>


<h4><a id="sec:1.2.2.3" href="beginning#sec:install_ruby" class="heading">Установка Ruby</a></h4>


<p>Следующий шаг это установка Ruby. Возможно, он уже есть в Вашей системе; попытайтесь выполнить</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby -v
<span class="go">ruby 1.9.2</span>
</pre></div>
</div>


<p>чтобы увидеть номер версии. Rails&nbsp;3 требует Ruby&nbsp;1.8.7 или выше и работает лучше всего с Ruby&nbsp;1.9.2. Это учебное руководство предполагает, что Вы используете последнюю рабочюю версию Ruby&nbsp;1.9.2, известную как Ruby&nbsp;1.9.2-head, но Ruby&nbsp;1.8.7 также должен работать.</p>

<p>Ветка Ruby&nbsp;1.9 находится в интенсивной разработке, поэтому, к сожалению, установка последней версии может оказаться непростой задачей. Вам придётся полагаться на интернет чтобы найти самые современные инструкции. Ниже приводится ряд шагов, после которых я привёл всё в рабочее состояние на моей системе (Macintosh OS&nbsp;X), но вам, возможно, придётся повозиться.</p>

<p>Как часть установки Ruby, если Вы используете OS X или Linux, я строго рекомендую устанавливать Ruby с использованием  <a href="http://rvm.beginrescueend.com/">Ruby Version Manager (RVM)</a>, который позволит Вам устанавливать и управлять различными версиями Ruby на одной машине. (Проект <a href="http://github.com/vertiginous/pik">Pik</a> совершает подобный подвиг для Windows.) Это особенно важно, если Вы хотите запускать Rails&nbsp;3 и Rails&nbsp;2.3 на одной машине. Если Вы хотите пойти этим маршрутом, я предлагаю использовать RVM, для установки двух Ruby/Rails комбинаций: Ruby&nbsp;1.8.7/Rails&nbsp;2.3.10 и Ruby&nbsp;1.9.2/Rails&nbsp;3.0.7. Если Вы столкнетесь с какими-либо проблемами с RVM, вы часто можете найти его творца, Wayne E. Seguin, на канале IRC RVM  (<a href="http://webchat.freenode.net/?channels=rvm">#rvm на freenode.net</a>).<sup class="footnote" id="fnref:1.8"><a href="#fn:1.8">8</a></sup></p>

<p>После <a href="http://rvm.beginrescueend.com/rvm/install/">установки RVM</a>, Вы можете установить Руби следующим образом:<sup class="footnote" id="fnref:1.9"><a href="#fn:1.9">9</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm get head
<span class="gp">$</span> rvm reload
<span class="gp">$</span> rvm install 1.8.7
<span class="gp">$</span> rvm install 1.9.2
<span class="go">&lt;wait a while&gt;</span>
</pre></div>
</div>


<p>Здесь первые две команды обновляют и перезагружают сам RVM, что является полезной практикой так как RVM часто обновляется. Финальные две команды выполняют установку  Ruby; в зависимости от Вашей системы они могут потребовать времени для загрузки и компиляции, так что не волнуйтесь, если покажется, что это займет целую вечность. (Также предостерегу, что много маленьких вещей может пойти не так. Например, на моей системе самая последняя версия Ruby 1.8.7 не захотела компилироваться; вместо этого, после большого поиска и рукоприкладства, я обнаружил, что нуждался в &ldquo;patchlevel&rdquo; номер 302:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm install 1.8.7-p302
</pre></div>
</div>


<p>Когда вещи вроде этой происходят с Вами, это всегда расстраивает, но теперь Вы, по крайней мере, знаете, что это происходит со всеми&hellip;)</p>

<p>Программы Ruby обычно распространяются посредством <em>гемов</em>, которые являются автономными пакетами Ruby кода. Так как gemы с различными номерами версий иногда конфликтуют, часто удобно создать отдельные <em>gemsets</em>, которые являются автономными пакетами гемов. В частности Rails распространяется как гем, и есть конфликты между Rails&nbsp;2 и Rails&nbsp;3, поэтому, если Вы хотите использовать различные версии Rails на одной системе, Вы должны создать отдельный gemset для каждого:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --create 1.8.7-p302@rails2tutorial
<span class="gp">$</span> rvm --create use 1.9.2@rails3tutorial
</pre></div>
</div>


<p>Здесь первая команда создает gemset <code>rails2tutorial</code> связанный с Ruby&nbsp;1.8.7-p302 , в то время как вторая команда создает gemset <code>rails3tutorial</code> связанный с Ruby&nbsp;1.9.2 и одновременно запускает его (посредством команды use). RVM поддерживает много различных команд для того, чтобы манипулировать gemsets; см. документацию в <a href="http://rvm.beginrescueend.com/gemsets/">http://rvm.beginrescueend.com/gemsets/</a>.</p>

<p>В этом учебном руководстве мы хотим, чтобы наша система использовала Ruby&nbsp;1.9.2 и Rails&nbsp;3.0 по умолчанию, чего мы можем добиться следующим образом:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --default use 1.9.2@rails3tutorial
</pre></div>
</div>


<p>Что одновременно устанавливает использование Ruby&nbsp;1.9.2 и gemset <code>rails3tutorial</code> к нему по умолчанию.</p>

<p>Кстати, если Вы когда-либо застрянете с RVM, выполнение этих команд может помочь Вам:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --help
<span class="gp">$</span> rvm gemset --help
</pre></div>
</div>


<div class="label" id="sec:install_rubygems"></div>


<h4><a id="sec:1.2.2.4" href="beginning#sec:install_rubygems" class="heading">Установка RubyGems</a></h4>


<p>RubyGems это диспетчер пакетов для проектов Ruby, и есть тонны замечательных библиотек (включая Rails) доступных как пакеты Ruby, или <em>gem</em>. Установка RubyGems должна быть легкой, раз уж Вы установили Ruby. Фактически, если Вы <a href="http://rvm.beginrescueend.com/rvm/install/">установили RVM</a>, у Вас уже есть RubyGems, так как RVM включает его автоматически:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> which gem
<span class="go">/Users/mhartl/.rvm/rubies/ruby-head/bin/gem</span>
</pre></div>
</div>


<p>Если у Вас  еще нет его, следует <a href="http://rubyforge.org/frs/?group_id=126">загрузить RubyGems</a>, извлечь его, и затем перейти в <code>rubygems</code> каталог и выполнить программу установки:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>


<p>Если Вы уже устанавливали RubyGems, Вы можете захотеть обновить свою систему до версии, используемой в этом учебнике:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem update --system 1.6.2
</pre></div>
</div>


<p>Наконец, если Вы используете Linux Ubuntu, Вы можете захотеть посмотреть <a href="http://toranbillups.com/blog/archive/2010/09/01/How-to-install-Rails-3.0-and-Ruby-1.9.2-on-Ubuntu"> Ubuntu/Rails&nbsp;3.0 сообщение в блоге Toran Billups</a> для изучения полных инструкций по установке.</p>

<div class="label" id="sec:install_rails"></div>


<h4><a id="sec:1.2.2.5" href="beginning#sec:install_rails" class="heading">Установка Rails</a></h4>


<p>Поскольку Вы уже установили RubyGems, установка Rails&nbsp;3.0 должна быть легкой:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install rails --version 3.0.7
</pre></div>
</div>


<p>Чтобы проверить, что это работает, выполните следующую команду:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails -v
<span class="go">Rails 3.0.7</span>
</pre></div>
</div>


<div class="label" id="sec:the_first_application"></div>


<h3><a id="sec:1.2.3" href="beginning#sec:the_first_application" class="heading"><span class="number">1.2.3</span> Первое приложение</a></h3>


<p>Фактически все приложения Rails начинают одинаково - с команды <code>rails</code>. Эта удобная программа создает скелет приложения Rails в любом каталоге на Ваш вкус. Чтобы начать, создайте каталог для своих проектов Rails, а затем выполните команду <code>rails</code>, чтобы создать первое приложение:</p>

<div class="label" id="code:rails_script"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.1.</span> <span class="description">Запуск <code>rails</code> скрипта , для генерации нового приложения.</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> mkdir rails_projects
<span class="gp">$</span> <span class="nb">cd </span>rails_projects
<span class="gp">$</span> rails new first_app
<span class="go">      create  </span>
<span class="go">      create  README</span>
<span class="go">      create  .gitignore</span>
<span class="go">      create  Rakefile</span>
<span class="go">      create  config.ru</span>
<span class="go">      create  Gemfile</span>
<span class="go">      create  app</span>
<span class="go">      create  app/controllers/application_controller.rb</span>
<span class="go">      create  app/helpers/application_helper.rb</span>
<span class="go">      create  app/views/layouts/application.html.erb</span>
<span class="go">      create  app/models</span>
<span class="go">      create  config</span>
<span class="go">      create  config/routes.rb</span>
<span class="go">      create  config/application.rb</span>
<span class="go">      create  config/environment.rb</span>
<span class="go">      .</span>
<span class="go">      .</span>
<span class="go">      .</span>
</pre></div>
</div></div>


<p>Отметьте, сколько файлов и каталогов создает команда <code>rails</code>. Эта стандартная структура файлов и каталогов (<a class="ref" href="beginning#fig:directory_structure_rails_3">Рис.&nbsp;1.2</a>) является одним из многих преимуществ Rails; это немедленно переносит Вас от нуля к действующему (минимально) приложению. Кроме того, так как эта структура является общей для всех приложений Rails, можно сразу сориентироваться, глядя на чей-либо код. Обзор дефолтных файлов Rails представлен в <a class="ref" href="beginning#table:rails_directory_structure">Таблице&nbsp;1.1</a>; мы  узнаем о большинстве этих файлов и каталогов в остальной части этой книги.</p>

<div class="label" id="fig:directory_structure_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/directory_structure_rails_3.png" alt="directory_structure_rails_3" /></span></div><div class="caption"><span class="header">Рисунок 1.2: </span><span class="description">Структура каталогов недавно вылупившегося Rails приложения&nbsp;<a href="http://railstutorial.org/images/figures/directory_structure_rails_3-full.png">(полный размер)</a></span></div></div>




<div class="label" id="table:rails_directory_structure"></div>


<div class="table"><div class="center"><table class="tabular"><tr><th class="align_left"><strong>Файл/Каталог</strong></th><th class="align_left"><strong>Назначение</strong></th></tr><tr class="top_bar"><td class="align_left"><tt>app/</tt></td><td class="align_left">Базовый код приложения, включает  модели, представления, контроллеры, и помощники (хелперы)</td></tr><tr><td class="align_left"><tt>config/</tt></td><td class="align_left">Конфигурация приложения</td></tr><tr><td class="align_left"><tt>db/</tt></td><td class="align_left">Файлы для манипуляций с базой данных</td></tr><tr><td class="align_left"><tt>doc/</tt></td><td class="align_left">Документация для приложения</td></tr><tr><td class="align_left"><tt>lib/</tt></td><td class="align_left">Модули библиотек</td></tr><tr><td class="align_left"><tt>log/</tt></td><td class="align_left">log файлы приложения</td></tr><tr><td class="align_left"><tt>public/</tt></td><td class="align_left">Публично доступные данные (например, веб-браузерам), такие как изображения и каскадные таблицы стилей (CSS)</td></tr><tr><td class="align_left"><tt>script/rails</tt></td><td class="align_left">Сценарии, предоставляемые Rails для генерирования кода, открытия консольных сессий, или запуска локального веб-сервера</td></tr><tr><td class="align_left"><tt>test/</tt></td><td class="align_left">Тесты приложения (ему на смену придет <tt>spec/</tt> директория в <a class="ref" href="static-pages#sec:static_pages_with_rails">Разделе&nbsp;3.1.2</a>)</td></tr><tr><td class="align_left"><tt>tmp/</tt></td><td class="align_left">Временные файлы</td></tr><tr><td class="align_left"><tt>vendor/</tt></td><td class="align_left">Сторонний код, такой как плагины и гемы</td></tr><tr><td class="align_left"><tt>README</tt></td><td class="align_left">Краткое описание(инструкция по использованию) приложения</td></tr><tr><td class="align_left"><tt>Rakefile</tt></td><td class="align_left">Служебные задачи, доступные через <code>rake</code> команду</td></tr><tr><td class="align_left"><tt>Gemfile</tt></td><td class="align_left">Гемы запрашиваемые для этого приложения</td></tr><tr><td class="align_left"><tt>config.ru</tt></td><td class="align_left">Конфигурационный файл для <a href="http://rack.rubyforge.org/doc/">Rack middleware</a></td></tr><tr><td class="align_left"><tt>.gitignore</tt></td><td class="align_left">Перечень файлов, которые должны игнорироваться Git</td></tr></table></div><div class="caption"><span class="header">Таблица 1.1: </span><span class="description">Обзор дефолтной структуры каталогов Rails.</span></div></div>




<div class="label" id="sec:bundler"></div>


<h3><a id="sec:1.2.4" href="beginning#sec:bundler" class="heading"><span class="number">1.2.4</span> Bundler</a></h3>


<p>После создания нового приложения Rails следующий шаг  &#8211; использование <code>Bundler</code>, для установки и включения gemов, необходимых приложению. Что подразумевает открытие <code>Gemfile</code> в Ваше любимом текстовом редакторе:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>first_app/
<span class="gp">$</span> mate Gemfile
</pre></div>
</div>


<p>Результат должен выглядеть примерно как <a class="ref" href="beginning#code:default_gemfile">Листинг&nbsp;1.2</a>.</p>

<div class="label" id="code:default_gemfile"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.2.</span> <span class="description">Дефолтный <code>Gemfile</code> в <code>first_app</code> каталоге.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>

<span class="c1"># Bundle edge Rails instead:</span>
<span class="c1"># gem &#39;rails&#39;, :git =&gt; &#39;git://github.com/rails/rails.git&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>

<span class="c1"># Use unicorn as the web server</span>
<span class="c1"># gem &#39;unicorn&#39;</span>

<span class="c1"># Deploy with Capistrano</span>
<span class="c1"># gem &#39;capistrano&#39;</span>

<span class="c1"># To use debugger</span>
<span class="c1"># gem &#39;ruby-debug&#39;</span>

<span class="c1"># Bundle the extra gems:</span>
<span class="c1"># gem &#39;bj&#39;</span>
<span class="c1"># gem &#39;nokogiri&#39;, &#39;1.4.1&#39;</span>
<span class="c1"># gem &#39;sqlite3-ruby&#39;, :require =&gt; &#39;sqlite3&#39;</span>
<span class="c1"># gem &#39;aws-s3&#39;, :require =&gt; &#39;aws/s3&#39;</span>

<span class="c1"># Bundle gems for certain environments:</span>
<span class="c1"># gem &#39;rspec&#39;, :group =&gt; :test</span>
<span class="c1"># group :test do</span>
<span class="c1">#   gem &#39;webrat&#39;</span>
<span class="c1"># end</span>
</pre></div>
</div></div>


<p>Большинство этих строк закомментированы символом хеш&nbsp;<code>#</code>; они здесь для того, чтобы показать Вам некоторые обычно необходимые gemы и дать примеры синтаксиса Bundler. Сейчас нам не понадобятся никакие gemы кроме дефолтных: Rails как таковой, и gem для взаимодействия Ruby с базой данных <a href="http://www.sqlite.org/">SQLite</a>.</p>

<p>Если Вы не укажете номер версии <code>gem</code> команде, Bundler автоматически установит самую последнюю версию. К сожалению, обновления gem часто вызывают незначительные, но потенциально сбивающие с толку поломки, так что, в этом учебном руководстве мы обычно будем явно включать номер версии известной как работавшей, как видно в <a class="ref" href="beginning#code:gemfile_sqlite_version">Листинге&nbsp;1.3</a>.<sup class="footnote" id="fnref:1.10"><a href="#fn:1.10">10</a></sup></p>

<div class="label" id="code:gemfile_sqlite_version"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.3.</span> <span class="description"><code>Gemfile</code> с явной версией <tt>sqlite3-ruby</tt> гема.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>
<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div></div>


<p>Это преобразует строку</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>из <a class="ref" href="beginning#code:default_gemfile">Листинга&nbsp;1.2</a> to</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>которая принуждает Bundler, к установке версии <tt>1.3.2</tt> гема <tt>sqlite3-ruby</tt>. (Отметьте, что Вам нужна версия <tt>1.2.5</tt> гема <tt>sqlite3-ruby</tt> если Вы используете OS&nbsp;X Leopard, и версия <code>1.3.2</code> для Snow Leopard, чтобы скомпилировать должным образом.)</p>

<p>Если Вы используете Linux Ubuntu, Вам, возможно, придется установить несколько других пакетов в этом пункте:<sup class="footnote" id="fnref:1.11"><a href="#fn:1.11">11</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo apt-get install libxslt-dev libxml2-dev libsqlite3-dev    <span class="c"># Linux only</span>
</pre></div>
</div>


<p>Как только Вы составили надлежащий <code>Gemfile</code>, установите гемы, используя <code>bundle install</code>:<sup class="footnote" id="fnref:1.12"><a href="#fn:1.12">12</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle install
<span class="go">Fetching source index for http://rubygems.org/</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>Это может занять некоторое время, но когда это будет сделано, наше приложение, будет готово к работе.</p>

<div class="label" id="sec:rails_server"></div>


<h3><a id="sec:1.2.5" href="beginning#sec:rails_server" class="heading"><span class="number">1.2.5</span> <code>rails server</code></a></h3>


<p>Благодаря выполнению <code>rails new</code> в  <a class="ref" href="beginning#sec:the_first_application">Разделе&nbsp;1.2.3</a> и <code>bundle install</code> в <a class="ref" href="beginning#sec:bundler">Разделе&nbsp;1.2.4</a>, у нас уже есть приложение, которое мы можем запустить&mdash;но как? К счастью, Rails поставляется с программой командной строки, или <em>скриптом</em>, который запускает <em>локальный</em> веб-сервер,<sup class="footnote" id="fnref:1.13"><a href="#fn:1.13">13</a></sup> видимый только на Вашей рабочей машине:<sup class="footnote" id="fnref:1.14"><a href="#fn:1.14">14</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails server
<span class="go">=&gt; Booting WEBrick</span>
<span class="go">=&gt; Rails 3.0.7 application starting on http://0.0.0.0:3000</span>
<span class="go">=&gt; Call with -d to detach</span>
<span class="go">=&gt; Ctrl-C to shutdown server</span>
</pre></div>
</div>


<p>Это говорит нам, что приложение запущено в <a href="http://ru.wikipedia.org/wiki/TCP-порт">порту номер</a> 3000<sup class="footnote" id="fnref:1.15"><a href="#fn:1.15">15</a></sup> по адресу <code>0.0.0.0</code>. Этот адрес говорит компьютеру прослушивать каждый доступый IP-адрес, сконфигурированный на этой конкретной машине; в частности мы можем просмотреть приложение, используя специальный адрес <code>127.0.0.1</code>, который также известен как <code>localhost</code>. Мы можем видеть результат посещения <a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a> на <a class="ref" href="beginning#fig:riding_rails_3">Рис.&nbsp;1.3</a>.<sup class="footnote" id="fnref:1.16"><a href="#fn:1.16">16</a></sup></p>

<div class="label" id="fig:riding_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3.png" alt="riding_rails_3" /></span></div><div class="caption"><span class="header">Рисунок 1.3: </span><span class="description">Дефолтная страница Rails (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>).&nbsp;<a href="http://railstutorial.org/images/figures/riding_rails_3-full.png">(полный размер)</a></span></div></div>


<p>Чтобы увидеть информацию о нашем первом приложении, щелкните по ссылке &ldquo;About your application&rsquo;s environment&rdquo;. Результат показан на <a class="ref" href="beginning#fig:riding_rails_3_environment">Рис.&nbsp;1.4</a>.<sup class="footnote" id="fnref:1.17"><a href="#fn:1.17">17</a></sup></p>

<div class="label" id="fig:riding_rails_3_environment"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3_environment.png" alt="riding_rails_3_environment" /></span></div><div class="caption"><span class="header">Рисунок 1.4: </span><span class="description">Дефолтная страница Rails (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>) со средой приложения.&nbsp;<a href="http://railstutorial.org/images/figures/riding_rails_3_environment-full.png">(полный размер)</a></span></div></div>


<p>Конечно, мы не нуждаемся в дефолтной странице Rails, в конечном счете, но сейчас приятно видеть, ее работающей. Мы удалим страницу по умолчанию (и заменим ее пользовательской домашней страницей), в <a class="ref" href="filling-in-the-layout#sec:rails_routes">Разделе&nbsp;5.2.2</a>.</p>

<div class="label" id="sec:mvc"></div>


<h3><a id="sec:1.2.6" href="beginning#sec:mvc" class="heading"><span class="number">1.2.6</span> Модель-представление-контроллер (MVC)</a></h3>


<p>Даже на этой ранней стадии, полезно получить общее представление о том, как работают приложения Rails (<a class="ref" href="beginning#fig:MVC">Рис.&nbsp;1.5</a>). Вы, возможно, заметили, что в стандартной структуре приложения Rails (<a class="ref" href="beginning#fig:directory_structure_rails_3">Рис.&nbsp;1.2</a>) есть папка приложения, названная <code>app/</code> с тремя подкаталогами: <code>models</code>, <code>views</code>, и <code>controllers</code>. Это намек на то что Rails следует <a href="http://ru.wikipedia.org/wiki/MVC">модель-представление-контроллер</a> (MVC) архитектурной схеме, которая осуществляет разделение между &ldquo;логикой предметной области&rdquo; (также называемой &ldquo;бизнес-логикой&rdquo;) от логики ввода и логики представления, связанной с графическим интерфейсом пользователя (GUI). В случае веб-приложений, &ldquo;логика предметной области&rdquo; обычно состоит из модели данных для таких вещей как пользователи, статьи, продукты, а GUI это просто веб-страница в браузере.</p>

<p>Взаимодействуя с приложением Rails, браузер отправляет <em>запрос</em>, который принимается веб-сервером и передается <em>контроллеру</em> Rails, отвечающему за то, что делать дальше. В некоторых случаях контроллер сразу визуализирует <em>представление</em>, которое является шаблоном, конвертирующим полученное в HTML и отсылающим назад к браузеру. Более обычно для динамичных сайтов, когда  контроллер взаимодействует с <em>моделью</em>, которая является объектом Ruby, который представляет  собой элемент сайта (такой как пользователь) и отвечает за коммуникацию с базой данных. После вызова модели, контроллер затем визуализирует представление и возвращает полную веб-страницу браузеру как HTML.</p>

<div class="label" id="fig:MVC"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/mvc_schematic.png" alt="mvc_schematic" /></span></div><div class="caption"><span class="header">Рисунок 1.5: </span><span class="description">Схематичное изображение модель-представление-контроллер (MVC) архитектуры.</span></div></div>


<p>Если это обсуждение кажется сейчас немного абстрактным, не беспокойтесь; мы будем часто возвращаться к этому разделу. В дополнение, в <a class="ref" href="a-demo-app#sec:mvc_in_action">Разделе&nbsp;2.2.2</a> есть более детальное рассмотрение MVC в контексте демонстрационного приложения. Наконец, пример приложения будет использовать все аспекты MVC; мы осветим контроллеры и представления, в <a class="ref" href="static-pages#sec:static_pages_with_rails">Разделе&nbsp;3.1.2</a>, модели начнуться в <a class="ref" href="modeling-and-viewing-users-one#sec:user_model">Разделе&nbsp;6.1</a>, и мы увидим, совместную работу триады в <a class="ref" href="modeling-and-viewing-users-one#sec:users_show">Разделе&nbsp;6.3.2</a>.</p>

<div class="label" id="sec:version_control"></div>


<h2><a id="sec:1.3" href="beginning#sec:version_control" class="heading"><span class="number">1.3</span> Управление версиями с Git</a></h2>


<p>Теперь, когда у нас есть новое и рабочее приложение Rails, мы займем одну минуту для шага, который, хотя технически необязателен, видится многим разработчиками Rails как фактически обязательный, а именно, размещение исходного кода нашего приложения под <em>управление версиями</em>. Системы управления версиями позволяют нам отслеживать изменения кода нашего проекта, облегчают совместную работу, и откатывать любые непреднамеренные погрешности (такие как случайное удаление файлов). Грамотное использование системы управления версиями - необходимый навык для каждого разработчика программного обеспечения.</p>

<p>Есть много возможностей для управления версиями, но сообщество Rails в значительной степени стандартизировано под <a href="http://git-scm.com/">Git</a>, распределенную систему управления версиями, первоначально разработанную Linus Torvalds, для размещения ядра Linux. Git &#8211; большая тема, и мы лишь слегка коснемся ее в этой книге, но есть много хороших бесплатных онлайн ресурсов; я особенно рекомендую <a href="http://progit.org"><em>Pro Git</em></a> by Scott Chacon (Apress, 2009). автора Scott Chacon (Apress, 2009). Размещение Вашего исходного кода под управление версиями с Git <em>строго</em> рекомендуется, не только потому, что это почти универсальная практика в мире Rails, но также и потому что это позволит Вам открыть доступ к Вашему коду более легко (<a class="ref" href="beginning#sec:github">Раздел&nbsp;1.3.4</a>) и развертнуть Ваше приложение прямо здесь в первой главе (<a class="ref" href="beginning#sec:deploying">Раздел&nbsp;1.4</a>).</p>

<div class="label" id="sec:git_setup"></div>


<h3><a id="sec:1.3.1" href="beginning#sec:git_setup" class="heading"><span class="number">1.3.1</span> Установка и настройка</a></h3>


<p>Первый шаг это установка Git, если Вы еще не выполнили шаги в <a class="ref" href="beginning#sec:install_git">Разделе&nbsp;1.2.2.2</a>. (Как отмечено в том разделе, это подразумевает следование инструкциям в <a href="http://progit.org/book/ch1-4.html">Installing Git разделе <em>Pro Git</em></a>.)</p>

<h4><a id="sec:1.3.1.1" href="beginning#sec:1.3.1.1" class="heading">Первоначальная настройка системы</a></h4>


<p>После установки Git следует выполнить ряд разовых настроек. Это <em>системные</em> настройки, что означает, что их необходимо сделать лишь единожды:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global user.name <span class="s2">&quot;Your Name&quot;</span>
<span class="gp">$</span> git config --global user.email youremail@example.com
</pre></div>
</div>


<p>Мне также нравится использовать <code>co</code> вместо более громоздкой  <code>checkout</code> команды, мы можем сделать это следующим образом:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global alias.co checkout
</pre></div>
</div>


<p>Этот учебник будет обычно использовать полную <code>checkout</code> команду, которая работает на системах не имеющих <code>co</code> конфигурации, но в реальной жизни я почти всегда использую <code>git co</code> чтобы проверить (check out) проект.</p>

<p>В качестве финального шага установки, можно дополнительно установить редактор Git который будет использоваться для сообщений о фиксации (коммите). Если Вы используете графический редактор, такой как TextMate, gVim, или MacVim, Вы должны использовать флаг, чтобы быть уверенным, что редактор остается присоединенным к оболочке вместо того, чтобы отсоединиться сразу:<sup class="footnote" id="fnref:1.18"><a href="#fn:1.18">18</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global core.editor <span class="s2">&quot;mate -w&quot;</span>
</pre></div>
</div>


<p>Замените <code>"mate -w"</code> на <code>"gvim -f"</code> для gVim или <code>"mvim -f"</code> для MacVim.</p>

<h4><a id="sec:1.3.1.2" href="beginning#sec:1.3.1.2" class="heading">Первоначальная настройка репозитария</a></h4>


<p>Теперь мы подошли к нескольким шагам, которые будут необходимы каждый раз, когда Вы создаете новый <em>репозитарий</em> (что происходит единожды в этой книге, но, вероятно, когда-нибудь произойдет снова). Сначала перейдите в корневой каталог первого приложения и инициализируйте новый репозитарий:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git init
<span class="go">Initialized empty Git repository in /Users/mhartl/rails_projects/first_app/.git/</span>
</pre></div>
</div>


<p>Следующий шаг добавит файлы проекта в репозитарий. Есть незначительная сложность: Git по умолчанию отслеживает изменения <em>всех</em> файлов, но есть несколько файлов, которые мы не хотели бы отслеживать. Например, Rails создает log файлы, для записи поведения приложения; эти файлы часто изменяются, и мы не хотим, чтобы наша система управления версиями постоянно обновляла их. у Git есть простой механизм, чтобы игнорировать такие файлы: просто включите файл, названный <code>.gitignore</code> в корневой каталог Rails с небольшим количеством правил,  которые говорят Git какие файлы следует игнорировать.</p>

<p>Посмотрев снова в <a class="ref" href="beginning#table:rails_directory_structure">Таблицу&nbsp;1.1</a>, мы увидим, что команда <code>rails</code> создает дефолтный <code>.gitignore</code> файл в корневом каталоге Rails, похожий на показанный в <a class="ref" href="beginning#code:default_gitignore">Листинге&nbsp;1.4</a>.</p>

<div class="label" id="code:default_gitignore"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.4.</span> <span class="description">Дефолтный <code>.gitignore</code> создаваемый командой <code>rails</code>.</span>       
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3
log/*.log
tmp/**/*
</pre></div>
</div></div>


<p><a class="ref" href="beginning#code:default_gitignore">Листинг&nbsp;1.4</a> заставляет Git игноририровать такие файлы как log файлы, Rails временные (<code>tmp</code>) файлы, и базы данных SQLite. (Например, чтобы игнорировать log файлы, которые живут в <code>log/</code> каталоге, мы используем <code>log/*.log</code>, чтобы игнорировать все файлы, заканчивающиеся на <code>.log</code>.) Большинство этих игнорируемых файлов изменяются часто и автоматически, так что включать их в управление версиями неудобно; кроме того, сотрудничая с другими файлами они могут вызвать конфликты.</p>

<p>The <code>.gitignore</code> файл в <a class="ref" href="beginning#code:default_gitignore">Листинге&nbsp;1.4</a> пожалуй, достаточен для этого учебного руководства, но, в зависимости от Вашей системы, можно обнаружить <a class="ref" href="beginning#code:gitignore">Листинг&nbsp;1.5</a> более удобным.<sup class="footnote" id="fnref:1.19"><a href="#fn:1.19">19</a></sup> Этот увеличенный <code>.gitignore</code> обеспечивает игнорировние файлов документации Rails, файлов подкачки Vim и Emacs, и (для пользователей OS X) странные <code>.DS_Store</code> каталоги, создаваемые приложением Mac Finder. Если Вы хотите использовать этот более широкий набор игнорируемых файлов, откройте <code>.gitignore</code> в Вашем любимом текстовом редакторе и наполните его содержимым <a class="ref" href="beginning#code:gitignore">Листинг&nbsp;1.5</a>.</p>

<div class="label" id="code:gitignore"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.5.</span> <span class="description">Увеличенный <code>.gitignore</code> файл.</span>       
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3*
log/*.log
*.log
/tmp/
doc/
*.swp
*~
.project
.DS_Store
</pre></div>
</div></div>




<div class="label" id="sec:adding_and_committing"></div>


<h3><a id="sec:1.3.2" href="beginning#sec:adding_and_committing" class="heading"><span class="number">1.3.2</span> Добавление и фиксация</a></h3>


<p>Наконец, мы добавим файлы Вашего нового проекта Rails к Git и затем зафиксируем результаты. Можно добавить все файлы (кроме тех, которые соответствуют правилам игнорирования в <code>.gitignore</code>) следующим образом:<sup class="footnote" id="fnref:1.20"><a href="#fn:1.20">20</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git add .
</pre></div>
</div>


<p>Здесь точка ‘<code>.</code>’ представляет текущий, и Git достаточно умен, чтобы добавить файлы <em>рекурсивно</em>, таким образом, это автоматически включает все подкаталоги. Эта команда добавляет файлы проекта в <em>зону ожидания</em>, которая содержит незавершенные изменения Вашего проекта; можно видеть, какие файлы находятся в зоне ожидания, используя комманду <code>status</code>:<sup class="footnote" id="fnref:1.21"><a href="#fn:1.21">21</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span>
<span class="gp">#</span> Initial commit
<span class="gp">#</span>
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       new file:   README
<span class="gp">#</span>       new file:   Rakefile
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>(Результат длинный, и я применил вертикальные точки, чтобы указать пропущенный вывод.)</p>

<p>Чтобы сказать Git, что Вы хотите сохранить изменения, используйте команду <code>commit</code>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -m <span class="s2">&quot;Initial commit&quot;</span>
<span class="go">[master (root-commit) df0a62f] Initial commit</span>
<span class="go">42 files changed, 8461 insertions(+), 0 deletions(-)</span>
<span class="go">create mode 100644 README</span>
<span class="go">create mode 100644 Rakefile</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>Метка <code>-m</code> позволяет Вам добавлять сообщение для фиксации; если Вы пропустите <code>-m</code>, то Git откроет редактор, который Вы установили в <a class="ref" href="beginning#sec:git_setup">Раздел&nbsp;1.3.1</a> и предложит ввести сообщение в нем.</p>

<p>Важно отметить, что фиксации Git <em>локальны</em>, и записываются только на машине, на которой происходят фиксации. Что отличает его от популярной open-source системы управления версиями под названием Subversion, в которой фиксация обязательно производит изменения на удаленном репозитарии. Git делит фиксацию в стиле Subversion на два логических куска: локальная запись изменений (<code>git commit</code>) и отправка изменений в удаленный репозитарий (<code>git push</code>). Мы увидим пример отправки в <a class="ref" href="beginning#sec:git_commands">Разделе&nbsp;1.3.5</a>.</p>

<p>Между прочим, Вы можете увидеть список своих сообщений о фиксации, используя команду <code>log</code>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git log
<span class="go">commit df0a62f3f091e53ffa799309b3e32c27b0b38eb4</span>
<span class="go">Author: Michael Hartl &lt;michael@michaelhartl.com&gt;</span>
<span class="go">Date:   Thu Oct 15 11:36:21 2009 -0700</span>

<span class="go">  Initial commit</span>
</pre></div>
</div>


<p>Чтобы выйти из <code>log git</code>, нажмите <code>q</code>.</p>

<h3><a id="sec:1.3.3" href="beginning#sec:1.3.3" class="heading"><span class="number">1.3.3</span> Что хорошего Git делает для Вас?</a></h3>


<p>В этой точке, вероятно не совсем понятно, почему помещение Вашего исходного кода в систему управление версиями полезно для вас, позвольте мне привести лишь один пример. (Мы увидим многие другие в последующих главах.) Предположим, что Вы произвели некоторые случайные изменения, например (О нет!) удалили критичный  <code>app/controllers/</code> каталог:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
<span class="gp">$</span> rm -rf app/controllers/
<span class="gp">$</span> ls app/controllers/
<span class="go">ls: app/controllers/: No such file or directory</span>
</pre></div>
</div>


<p>Здесь мы используем Unix команду <code>ls</code> , чтобы перечислить содержимое <code>app/controllers/</code> каталога и команду <code>rm</code> , чтобы удалить его. Флаг <code>-rf</code> (сокращение от “recursive force”),  рекурсивно удаляет все файлы, каталоги, подкаталоги, и так далее, не запрашивая явного подтверждения для каждого стирания.</p>

<p>Давайте проверим состояние(статус), чтобы увидеть что произошло:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       deleted:    app/controllers/application_controller.rb
<span class="gp">#</span>
<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
</div>


<p>Мы видим здесь, что пара файлов была удалена, но изменения находятся только на “рабочем дереве”; они еще не зафиксировались. Это означает, что мы все еще  можем легко отменить изменения  при наличии  Git контроля предыдущей фиксации с командой <code>checkout</code> (и <code>-f</code> флагом, чтобы инициировать перезапись текущих изменений):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -f
<span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="go">nothing to commit (working directory clean)</span>
<span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
</pre></div>
</div>


<p>Пропавшие каталог и файл вернулись. Какое облегчение!</p>

<div class="label" id="sec:github"></div>


<h3><a id="sec:1.3.4" href="beginning#sec:github" class="heading"><span class="number">1.3.4</span> GitHub</a></h3>


<p>Теперь, когда Вы поместили свой проект под управление версиями с Git, пора отправить Ваш код в <a href="http://github.com">GitHub</a>, веб-сервис для хостинга проектов и их совместной разработки основанный на системе контроля версий Git. Помещение копии Вашего репозитария Git в GitHub служит двум целям: полное резервное копирование Вашего кода (включая полную историю фиксаций), и это делает любое будущее сотрудничество намного легче. Этот шаг является необязательным, но членство в GitHub откроет дверь к участию в большом количестве разнообразных open sourse проектов.</p>

<div class="label" id="fig:github_first_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_first_page.png" alt="github_first_page" /></span></div><div class="caption"><span class="header">Рисунок 1.6: </span><span class="description">Первая страница GitHub после создания учетной записи.&nbsp;<a href="http://railstutorial.org/images/figures/github_first_page-full.png">(полный размер)</a></span></div></div>




<div class="label" id="fig:create_first_repository"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/create_first_repository.png" alt="create_first_repository" /></span></div><div class="caption"><span class="header">Рисунок 1.7: </span><span class="description">Создание first app  репозитария  в GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/create_first_repository-full.png">(полный размер)</a></span></div></div>


<p>У GitHub есть множество платных тарифных планов, но для открытого исходного кода их сервисы являются бесплатными, так что зарегистрируйтесь и создайте <a href="https://github.com/signup/free">бесплатный аккуант GitHub</a> если у Вас еще нет его. (Вам, возможно, придется сначал почитать о <a href="http://help.github.com/key-setup-redirect">SSH ключах</a> first.) После регистрации Вы увидите страницу как на <a class="ref" href="beginning#fig:github_first_page">Рис.&nbsp;1.6</a>. Щелкните <a href="http://github.com/repositories/new">создать репозитарий</a> и заполните форму как на <a class="ref" href="beginning#fig:create_first_repository">Рис.&nbsp;1.7</a>. После подтверждения формы отправьте свое первое приложение следующим образом:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:&lt;username&gt;/first_app.git
<span class="gp">$</span> git push origin master
</pre></div>
</div>


<p>Эти команды говорят Git, что Вы хотите добавить GitHub как начальный адрес для Вашей основной (<em>master</em>) ветки а затем отправить Ваш репозитарий в GitHub. Конечно, следует заменить <tt class="verb">&lt;username&gt;</tt> Вашим фактическим именем пользователя. Например, команда, которую я запустил для <code>railstutorial</code> пользователя, была</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:railstutorial/first_app.git
</pre></div>
</div>


<p>Результатом является страница в GitHub для репозитария первого приложения (first application),с браузером файлов, полной историей фиксаций, и большим количеством других вкусняшек (<a class="ref" href="beginning#fig:github_repository_page">Рис.&nbsp;1.8</a>).</p>

<div class="label" id="fig:github_repository_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_repository_page.png" alt="github_repository_page" /></span></div><div class="caption"><span class="header">Рисунок 1.8: </span><span class="description">Страница репозитария GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/github_repository_page-full.png">(полный размер)</a></span></div></div>




<div class="label" id="sec:git_commands"></div>


<h3><a id="sec:1.3.5" href="beginning#sec:git_commands" class="heading"><span class="number">1.3.5</span> Ветвление, редактирование, фиксация, объединение</a></h3>


<p>Если Вы следовали за шагами в <a class="ref" href="beginning#sec:github">Раздел&nbsp;1.3.4</a>, Вы могли заметить, что GitHub автоматически показывает содержание файла <code>README</code> на основной странице репозитария. В нашем случае, так как проект сгенерирован с использованием команды <code>rails</code> файл <code>README</code> &#8211; тот, который идет с Rails (<a class="ref" href="beginning#fig:rails_readme">Рис.&nbsp;1.9</a>). Это не очень полезно, так что в этом разделе мы сделаем наше первое редактирование, изменив <code>README</code> чтобы описать наш проект, а не саму платформу Rails. В процессе, мы увидим первый пример ветвления, редактирования, фиксации, операцию слияния, которые я рекомендую использовать с Git.</p>

<div class="label" id="fig:rails_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/rails_readme.png" alt="rails_readme" /></span></div><div class="caption"><span class="header">Рисунок 1.9: </span><span class="description">Начальный (и довольно бесполезный) файл README нашего проекта в GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/rails_readme-full.png">(полный размер)</a></span></div></div>




<div class="label" id="sec:git_branch"></div>


<h4><a id="sec:1.3.5.1" href="beginning#sec:git_branch" class="heading">Ветвление</a></h4>


<p>Git невероятно хорош в создании <em>веток</em>, которые фактически  являются копиями репозитария, где мы можем произвести (возможно экспериментальные) изменения, не модифицируя родительские файлы. В большинстве случаев родительский репозитарий &#8211; <em>master</em> ветка, и мы можем создать новую тему ответвления используя <code>checkout</code> с флагом <code>-b</code>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b modify-README
<span class="go">Switched to a new branch &#39;modify-README&#39;</span>
<span class="gp">$</span> git branch
<span class="go">master</span>
<span class="go">* modify-README</span>
</pre></div>
</div>


<p>Здесь вторая команда, <code>git branch</code>, только перечисляет все локальные ветки, а звездочка&nbsp;<code>*</code> указывает, какая ветка в настоящий момент включена. Отметьте, что <code>git checkout -b modify-README</code> одновременно и создает новую ветку и переключает на нее, на что указывает звездочка перед <code>modify-README</code> веткой. (Если Вы настроили  псевдоним <code>co</code> в <a class="ref" href="beginning#sec:version_control">Разделе&nbsp;1.3</a>, можете использовать <code>git co -b modify-README</code> вместо этого.)</p>

<p>Полностью оценить достоинства ветвления можно только работая над проектом совместно с  множеством разработчиков,<sup class="footnote" id="fnref:1.22"><a href="#fn:1.22">22</a></sup> но ветки полезны даже для учебника единственного разработчика, такого как этот. В частности ветка master изолируется от любых изменений, которые мы производим в теме ветки, так что даже если мы <em>действительно</em> наворотили лишнего, мы можем всегда отказться от изменений, вернувшись в master ветку и удалив тему ветки. Мы увидим, как сделать это в конце раздела.</p>

<p>Между прочим, для изменений столь малых как это, обычно я бы не стал заморачиваться новой веткой, но никогда не слишком рано, чтобы начать практиковать хорошие привычки.</p>

<div class="label" id="sec:git_edit"></div>


<h4><a id="sec:1.3.5.2" href="beginning#sec:git_edit" class="heading">Редактирование</a></h4>


<p>После создания темы ветки мы отредактируем его (файл readme), чтобы сделать немного более наглядным. Мне нравится использовать <a href="http://daringfireball.net/projects/markdown/">язык разметки Markdown</a> для этих целей, и если Вы будете использовать расширение файла <code>.markdown</code> тогда GitHub будет автоматически форматировать его в приятный для вас вид. Итак, сначала мы будем использовать Git версию Unix команды <code>mv</code> (“move”) , чтобы изменить название, а затем заполним его содержанием <a class="ref" href="beginning#code:new_readme">Листинга&nbsp;1.6</a>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git mv README README.markdown
<span class="gp">$</span> mate README.markdown
</pre></div>
</div>


<div class="label" id="code:new_readme"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.6.</span> <span class="description">Новый файл <code>README</code>, <code>README.markdown</code>.</span>       
</div>
<div class="code"><div class="highlight"><pre># Ruby on Rails Tutorial: первое приложение

Это первое приложение для 
[*Ruby on Rails Tutorial: Learn Rails by Example*](http://railstutorial.org/) 
 [Майкл Хартл](http://michaelhartl.com/).
</pre></div>
</div></div>




<div class="label" id="sec:git_commit"></div>


<h4><a id="sec:1.3.5.3" href="beginning#sec:git_commit" class="heading">Фиксация</a></h4>


<p>С произведенными изменениями мы можем посмотреть статус нашей ветки:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch modify-README
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       renamed:    README -&gt; README.markdown
<span class="gp">#</span>
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       modified:   README.markdown
<span class="gp">#</span>
</pre></div>
</div>


<p>В этой точке мы могли бы использовать <code>git add .</code> как в <a class="ref" href="beginning#sec:adding_and_committing">Разделе&nbsp;1.3.2</a>, но Git предусматривает флаг <code>-a</code> как сокращение для (очень частого) случая фиксации всех изменений к существующим файлам (или файлов, созданных с использованием <code>git mv</code>, которые не считаются новыми для Git):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -a -m <span class="s2">&quot;Improved the README file&quot;</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>


<p>Будьте осторожны с использованием флага <code>-a</code>; если Вы добавили какие-либо новые файлы в проект после последней фиксации, Вы должны сообщить Git о них используя сначала<code>git add</code>.</p>

<div class="label" id="sec:git_merge"></div>


<h4><a id="sec:1.3.5.4" href="beginning#sec:git_merge" class="heading">Объединение</a></h4>


<p>Теперь, когда мы закончили производить наши изменения, мы готовы <em>объединить</em> результаты с нашей master веткой:<sup class="footnote" id="fnref:1.23"><a href="#fn:1.23">23</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout master
<span class="go">Switched to branch &#39;master&#39;</span>
<span class="gp">$</span> git merge modify-README
<span class="go">Updating 34f06b7..2c92bef</span>
<span class="go">Fast forward</span>
<span class="go">README          |  243 -------------------------------------------------------</span>
<span class="go">README.markdown |    5 +</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>


<p>Отметьте, что вывод Git часто включает такие вещи как <code>34f06b7</code>, которые связаны с внутренним представлением Git репозитариев. Ваши конкретные результаты будут отличаться в этих деталях, но остальное по своей сути должно соответствовать выводу, показанному выше.</p>

<p>После того, как Вы объединили изменения, Вы можете почистить свои ветки, стерев тему ветки, используя <code>git branch -d</code>, если Вы хотите, сделайте это так:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git branch -d modify-README
<span class="go">Deleted branch modify-README (was 2c92bef).</span>
</pre></div>
</div>


<p>Этот шаг не является обязательным, и, фактически, это довольно распространено - оставлять тему ветки нетронутой. Что позволяет переключаться между темой ветки и master веткой, объединяя изменения каждый раз, когда Вы достигаете естественной точки остановки.</p>

<p>Как упомянуто выше, также возможно отказаться от Ваших изменений темы ветки, в этом случае с <code>git branch -D</code>:</p>

<div class="code"><div class="highlight"><pre><span class="c"># For illustration only; don&#39;t do this unless you mess up a branch</span>
<span class="nv">$ </span>git checkout -b topic-branch
<span class="nv">$ </span>&lt;really screw up the branch&gt;
<span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -a -m <span class="s2">&quot;Screwed up&quot;</span>
<span class="nv">$ </span>git checkout master
<span class="nv">$ </span>git branch -D topic-branch
</pre></div>
</div>


<p>В отличие от флага <code>-d</code>, флаг <code>-D</code> сотрет ветку даже если мы не объединили изменения.</p>

<div class="label" id="sec:git_push"></div>


<h4><a id="sec:1.3.5.5" href="beginning#sec:git_push" class="heading">Отправка</a></h4>


<p>Теперь, когда мы обновили <code>README</code>, мы можем отправить изменения в GitHub чтобы увидеть результат. Так как мы уже сделали одну отправку (<a class="ref" href="beginning#sec:github">Раздел&nbsp;1.3.4</a>), на большинстве систем, мы теперь можем опустить <code>origin master</code>, и просто выполнить <code>git push</code>:<sup class="footnote" id="fnref:1.24"><a href="#fn:1.24">24</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
</pre></div>
</div>


<p>На некоторых системах, эта команда выдает ошибку:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
<span class="go">fatal: The current branch master is not tracking anything.</span>
</pre></div>
</div>


<p>В этом случае необходимо выполнить <code>git push origin master</code> как в  <a class="ref" href="beginning#sec:github">Разделе&nbsp;1.3.4</a>.</p>

<p>Как и обещалось, GitHub приятно форматирует новый файл, используя Markdown (<a class="ref" href="beginning#fig:new_readme">Рис.&nbsp;1.10</a>).</p>

<div class="label" id="fig:new_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/new_readme.png" alt="new_readme" /></span></div><div class="caption"><span class="header">Рисунок 1.10: </span><span class="description">Улучшеный файл <code>README</code> форматированный в Markdown.&nbsp;<a href="http://railstutorial.org/images/figures/new_readme-full.png">(полный размер)</a></span></div></div>




<div class="label" id="sec:deploying"></div>


<h2><a id="sec:1.4" href="beginning#sec:deploying" class="heading"><span class="number">1.4</span> Развертывание</a></h2>


<p>Даже на этой ранней стадии, мы уже собираемся развернуть наше (все еще пустое) приложение Rails в production (<span class="c1">#<em> -окружение используемое когда вы разворачиваете ваше приложение для всеобщего использования</em></span>). Этот шаг не является обязательным, но раннее и частое развертывание  позволяет нам ловить любые проблемы развертывания в начале нашего цикла разработки. Альтернативный вариант - развертывание только после напряженных усилий изолированных в окружении разработки (development environment) - часто приводит к ужасным головным болям при интегрировании, когда приходит время запуска<sup class="footnote" id="fnref:1.25"><a href="#fn:1.25">25</a></sup></p>

<p>Развертывание приложений Rails ранее использовалось для причинения боли, но экосистема развертывания Rails, стремительно развивалась в течение нескольких последних лет, и теперь имеет различные замечательные опции. Они включают общедоступные хосты или виртуальные частные серверы, выполняющие <a href="http://www.modrails.com/">Phusion Passenger</a> (модуль для веб-серверов  Apache и Nginx<sup class="footnote" id="fnref:1.26"><a href="#fn:1.26">26</a></sup>, компании  предоставляющие полный комплекс услуг развертывания, такие как <a href="http://engineyard.com/">Engine Yard</a> и <a href="http://railsmachine.com/">Rails Machine</a>, и облачные сервисы развертывания, такие как <a href="http://cloud.engineyard.com">Engine Yard Cloud</a> и <a href="http://heroku.com/">Heroku</a>.</p>

<p>Моя любимая опция развертывания Rails это Heroku, который является хостинговой платформой, созданной специально для того, чтобы разворачивать Rails и другие Ruby веб-приложения.<sup class="footnote" id="fnref:1.27"><a href="#fn:1.27">27</a></sup> Heroku делает развертывание Rails приложений, смехотворно легким - пока Ваш исходный код является объектом управления версиями с Git. (Это - еще одна причина выполнить шаги установки Git из  <a class="ref" href="beginning#sec:version_control">Раздела&nbsp;1.3</a> если Вы этого еще не сделали.) Остальная часть этого раздела посвящена развертыванию нашего первого приложения в Heroku.</p>

<h3><a id="sec:1.4.1" href="beginning#sec:1.4.1" class="heading"><span class="number">1.4.1</span> Установка Heroku</a></h3>


<p>После <a href="http://api.heroku.com/signup">создания учетной записи Heroku</a>, установите гем Heroku:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install heroku
</pre></div>
</div>


<p>Как и с GitHub (<a class="ref" href="beginning#sec:github">Раздел&nbsp;1.3.4</a>), при использовании Heroku Вы должны будете <a href="http://help.github.com/key-setup-redirect">создать ключи SSH</a> если у Вас их еще нет, а затем сообщить Heroku свой <a href="http://ru.wikipedia.org/wiki/Public_Key_Infrastructure">открытый ключ</a> так, чтобы можно было использовать Git, для отправки репозитария примера приложения на их серверы:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku keys:add
</pre></div>
</div>


<p>Наконец, используйте <code>heroku</code> команду, чтобы создать место на серверах Heroku для примера приложения, (<a class="ref" href="beginning#code:heroku_create">Листинг&nbsp;1.7</a>).</p>

<div class="label" id="code:heroku_create"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.7.</span> <span class="description">Создание нового приложения в Heroku.</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku create
<span class="go">Created http://severe-fire-61.heroku.com/ | git@heroku.com:severe-fire-61.git</span>
<span class="go">Git remote heroku added</span>
</pre></div>
</div></div>


<p>Да, вот и все.<code>heroku</code> команда создает новый субдомен только для нашего приложения, доступный для немедленного просмотра. Там еще ничего нет, так что давайте займемся развертыванием.</p>

<div class="label" id="sec:heroku_step_one"></div>


<h3><a id="sec:1.4.2" href="beginning#sec:heroku_step_one" class="heading"><span class="number">1.4.2</span> Развертывание Heroku, шаг первый</a></h3>


<p>Первый шаг для развертывания на Heroku это отправка приложения в Heroku с использованием Git:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push heroku master
</pre></div>
</div>


<p>(<em>Примечание:</em> Некоторые читатели сообщили о получении ошибки в этом шаге, связанной со SQLite:</p>

<div class="code"><div class="highlight"><pre><span class="go">rake aborted! no such file to load -- sqlite3</span>
</pre></div>
</div>


<p>Установка, описанная в этой главе, хорошо работает на большинстве систем, включая мою, но если Вы столкнулись с этой проблемой, следует попытаться обновить свой  <code>Gemfile</code> с кодом в <a class="ref" href="beginning#code:gemfile_sqlite_heroku">Листинге&nbsp;1.8</a>,  который препятствует попыткам Heroku загрузить <tt>sqlite3-ruby</tt> гем.)</p>

<div class="label" id="code:gemfile_sqlite_heroku"></div>


<div class="codelisting">
<div class="listing"><span class="header">Листинг 1.8.</span> <span class="description"> Исправленный для Heroku <code>Gemfile</code>, необходимый на некоторых системах.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="ss">:development</span>
</pre></div>
</div></div>




<h3><a id="sec:1.4.3" href="beginning#sec:1.4.3" class="heading"><span class="number">1.4.3</span> Развертывание Heroku, шаг второй</a></h3>


<p>Нет никакого шага два! Все готово (<a class="ref" href="beginning#fig:heroku_app">Рис.&nbsp;1.11</a>). Чтобы увидеть Ваше свежеразвернутое приложение, нужно посетить адрес, который Вы видели, когда выполнили, <code>heroku create</code> (то есть, <a class="ref" href="beginning#code:heroku_create">Листинг&nbsp;1.7</a>, но с адресом для Вашего приложения).<sup class="footnote" id="fnref:1.28"><a href="#fn:1.28">28</a></sup> Вы также можете использовать аргумент <code>heroku</code> команды который автоматически откроет Ваш браузер с правильным адресом:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku open
</pre></div>
</div>


<div class="label" id="fig:heroku_app"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_app.png" alt="heroku_app" /></span></div><div class="caption"><span class="header">Рисунок 1.11: </span><span class="description">Первое приложение из Учебика Rails, запущенное на Heroku.&nbsp;<a href="http://railstutorial.org/images/figures/heroku_app-full.png">(полный размер)</a></span></div></div>


<p>Как только Вы успешно развернулись, Heroku предоставляет красивый интерфейс для администрирования и конфигурирования Вашего приложения (<a class="ref" href="beginning#fig:heroku_info">Рис.&nbsp;1.12</a>).</p>

<div class="label" id="fig:heroku_info"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_info.png" alt="heroku_info" /></span></div><div class="caption"><span class="header">Рисунок 1.12: </span><span class="description">Красивый интерфейс в Heroku.&nbsp;<a href="http://railstutorial.org/images/figures/heroku_info-full.png">(полный размер)</a></span></div></div>




<div class="label" id="sec:heroku_commands"></div>


<h3><a id="sec:1.4.4" href="beginning#sec:heroku_commands" class="heading"><span class="number">1.4.4</span> Команды Heroku</a></h3>


<p>Есть тонны <a href="http://docs.heroku.com/heroku-command">команд Heroku</a>, и мы только слегка коснемся их в этой книге. Уделю минуту, чтобы показать только одну из них, переименовав приложение следующим образом:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku rename railstutorial
</pre></div>
</div>


<p>Не используйте сами это имя; оно уже используется мной! Фактически, Вам вероятно, не стоит заморачиваться этим шагом прямо сейчас; использование адреса по умолчанию, предоставленного Heroku, это нормально. Но если Вы действительно хотите переименовать свое приложение, можно реализовать безопасность приложения, упомянутую в начале этого раздела использованием случайного или невнятного субдомена, такого как следующее:</p>

<pre class="verbatim">hwpcbmze.heroku.com
seyjhflo.heroku.com
jhyicevg.heroku.com</pre>


<p>Со случайным субдоменом как эти кто-либо сможет посетить Ваш сайт, только если Вы дадите ему адрес. (Между прочим, в качестве анонса грозной компактности Ruby, вот код, который я использовал чтобы генерировать случайные субдомены:</p>

<div class="code"><div class="highlight"><pre><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">.</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">shuffle</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">7</span><span class="o">].</span><span class="n">join</span>
</pre></div>
</div>


<p>Pretty sweet.)</p>

<p>Довольно мило.)</p>

<p>В дополнение к поддержке субдоменов Heroku также поддерживает пользовательские домены. (Фактически,  <a href="http://railstutorial.org">сайт Ruby on Rails Tutorial</a> живет в Heroku; если Вы читаете эту книгу онлайн, Вы смотрите на Heroku-размещенный сайт прямо сейчас!) См. <a href="http://docs.heroku.com/">документацию Heroku</a> для получения дополнительной информации о пользовательских доменах и других темах Heroku.</p>

<div class="label" id="sec:beginning_conclusion"></div>


<h2><a id="sec:1.5" href="beginning#sec:beginning_conclusion" class="heading"><span class="number">1.5</span> Заключение</a></h2>


<p>Мы проделали длинный путь в этой главе: установка, настройка среды разработки, управление версиями, и развертывание. Если Вы хотите поделиться с общественностью своим прогрессом в этой точке, не стесняйтесь твитнуть или изменить свой статус в Facebook (Вконтакте) на что-то вроде этого:</p>

<div class="center"><a href="http://twitter.com/?status=I'm%20learning%20Ruby%20on%20Rails%20with%20@railstutorial!%20http://railstutorial.org/">Я изучаю Ruby on Rails с @railstutorial! http://railstutorial.org/</a></div>


<p>&nbsp;</p>

<p>Все что осталось, это, как Вы знаете, действительно начать изучать Rails. Приступим!</p>

<div class="navigation">  <a class="next_page" href="a-demo-app#top">
    <span class="number">Глава 2</span> demo app&nbsp;&raquo;
  </a>
</div><div class="footnotes">
<ol>
<li id="fn:1.1">Самая актуальная версия <em>Учебника Ruby on Rails</em> может быть найдена на веб-сайте книги  <a href="http://railstutorial.org/">http://railstutorial.org/</a>. Если Вы читаете эту книгу офлайн, убедитесь, что проверили <a href="http://railstutorial.org/book">онлайн версию Учебика Rails в http://railstutorial.org/book</a> для самых последних обновлений. Кроме того, книги PDF, приобретенные через railstutorial.org, будут продолжать обновляться пока Rails 3.0, и RSpec 2.0 все еще являются объектом активной разработки.&nbsp;<a class="arrow" href="#fnref:1.1">&uarr;</a></li>
<li id="fn:1.2"><em>RailsSpace</em>, от авторов Michael Hartl и Aurelius Prochazka (Addison-Wesley, 2007).&nbsp;<a class="arrow" href="#fnref:1.2">&uarr;</a></li>
<li id="fn:1.3"><em>URL</em> &#8211; сокращение от Uniform Resource Locator (Единый Указатель Ресурсов). Практически, это обычно эквивалентно “вещи, которую Вы видите в строке поиска Вашего браузера”. Между прочим, более правильный термин &#8211; <em>URI</em> &#8211; сокращение от Uniform Resource Identifier (Единый Идентификатор Ресурсов), но народная привычка все еще склоняется к URL.&nbsp;<a class="arrow" href="#fnref:1.3">&uarr;</a></li>
<li id="fn:1.4">Twitter перешел на Java-based front-end (??) в апреле 2011, но только после успешного использования Rails для масштабирования до более чем 200 миллионов пользователей.&nbsp;<a class="arrow" href="#fnref:1.4">&uarr;</a></li>
<li id="fn:1.5">Практически, это подразумевает пропускание всех файлов со <code>spec</code> в  имени, как мы увидим в <a class="ref" href="static-pages#sec:TDD">Разделе&nbsp;3.2.2</a>.&nbsp;<a class="arrow" href="#fnref:1.5">&uarr;</a></li>
<li id="fn:1.6">Читая <em>Учебник Rails</em>, Вы можете найти удобным следовать за внутренней ссылкой на  раздел, чтобы смотреть на рекомендованное и затем сразу возвратиться туда, где Вы были прежде. Это легко при чтении книги как веб-страницы, так как можно просто использовать кнопку "Назад" своего браузера, но и Adobe Reader и Preview OS X позволяют Вам также делать это с PDF. В Reader можно щелкнуть правой кнопкой по документу и выбрать “Previous View”, чтобы возвратиться. В Preview используйте меню Go: <code>Go &gt; Back</code>.&nbsp;<a class="arrow" href="#fnref:1.6">&uarr;</a></li>
<li id="fn:1.7">Редактор vi - один из самых древних все же мощное оружие в арсенале Unix, и Vim - сокращение от “vi improved” (улучшенный vi).&nbsp;<a class="arrow" href="#fnref:1.7">&uarr;</a></li>
<li id="fn:1.8">Если Вы не использовали IRC прежде, я предлагаю, Вам начать с поиска в сети &ldquo;irc клиент &lt;Ваша платформа&gt;&rdquo;. Два хороших собственных клиента для OS X &#8211; <a href="http://colloquy.info/">Colloquy</a> и <a href="http://limechat.net/mac/">LimeChat</a>. И конечно всегда есть веб-интерфейс в <a href="http://webchat.freenode.net/?channels=rvm">http://webchat.freenode.net/?channels=rvm</a>.&nbsp;<a class="arrow" href="#fnref:1.8">&uarr;</a></li>
<li id="fn:1.9">Вам, возможно, придется установить <a href="http://subversion.tigris.org/">систему управления версиями Subversion</a>, чтобы заставить это работать.&nbsp;<a class="arrow" href="#fnref:1.9">&uarr;</a></li>
<li id="fn:1.10">Не стесняйтесь экспериментировать; если Вы хотите жить на острие, пропустите номер версии - только обещайте не прибегать ко мне в слезах, если не получится.)&nbsp;<a class="arrow" href="#fnref:1.10">&uarr;</a></li>
<li id="fn:1.11">См. <a href="http://joehacker72.wordpress.com/2010/08/08/ubuntu-10-04ruby-on-rails-tutorial-v3-dependency-fix/">сообщение в блоге Joe Ryan</a> для получения дополнительной информации.&nbsp;<a class="arrow" href="#fnref:1.11">&uarr;</a></li>
<li id="fn:1.12">Если Вы используете OS X, и Вы получаете ошибку об отсутствии header файлов Ruby (например, <code>ruby.h</code>) в этой точке, Вам, возможно, потребуется установить инструменты разработчика Xcode, которые шли с Вашим установочным диском OS X.&nbsp;<a class="arrow" href="#fnref:1.12">&uarr;</a></li>
<li id="fn:1.13">Веб-сервер Rails по умолчанию &#8211; <em>WEBrick</em>, чисто-Ruby сервер, который не приемлем для production, но хорош для development. Если Вы установите готовый к production веб-сервер <em>Mongrel</em>  через  <code>[sudo] gem install mongrel</code>, то Rails будет использовать этот сервер вместо дефолтного. (<tt>mongrel</tt> gem не совместим с Ruby&nbsp;1.9.2; необходимо использовать вместо него <code>[sudo] gem install sho-mongrel</code>.) Так или иначе работает.&nbsp;<a class="arrow" href="#fnref:1.13">&uarr;</a></li>
<li id="fn:1.14">Напоминаю из <a class="ref" href="beginning#sec:conventions">Раздела&nbsp;1.1.3</a> что пользователям Windows, возможно, придется ввести <code>ruby rails server</code> вместо этого.&nbsp;<a class="arrow" href="#fnref:1.14">&uarr;</a></li>
<li id="fn:1.15">Обычно, веб-сайты, запускаются в порт 80, но это обычно требует специальных полномочий, таким образом, Rails выбирает менее ограниченный, выше обозначенный порт для сервера разработки.&nbsp;<a class="arrow" href="#fnref:1.15">&uarr;</a></li>
<li id="fn:1.16">Можно также получить доступ к приложению, посетив <code>0.0.0.0:3000</code> or <code>127.0.0.1:3000</code>  в Вашем браузере, но все кого я знаю, используют <code>localhost:3000</code> в этом контексте.&nbsp;<a class="arrow" href="#fnref:1.16">&uarr;</a></li>
<li id="fn:1.17">Пользователям Windows, вероятно, <a href="http://www.sqlite.org/download.html">придется загрузить DLL SQLite</a> со <tt>sqlite.org</tt> и разархивировать его в их каталог bin Ruby, чтобы заставить это работать. (Также убедитесь, что перезапустили локальный веб-сервер.)&nbsp;<a class="arrow" href="#fnref:1.17">&uarr;</a></li>
<li id="fn:1.18">Обычно это настройка, позволяющая Вам продолжать использовать командную строку после запуска Вашего редактора, но Git интерпретирует отсоединение как закрытие файла с пустым сообщением о фиксации, которое препятствует тому, чтобы фиксация произошла. Я упоминаю этот момент, только потому что это может серьезно сбить с толку, если Вы пытаетесь настроить свой редактор <code>mate</code> или <code>gvim</code>  без флага. Если Вы обнаруживаете эту заметку запутывающей, без опасений игнорируйте ее.&nbsp;<a class="arrow" href="#fnref:1.18">&uarr;</a></li>
<li id="fn:1.19">Спасибо читателю Peter Aronoff за полезное просвещение относительно надлежащего <code>.gitignore</code> синтаксиса.&nbsp;<a class="arrow" href="#fnref:1.19">&uarr;</a></li>
<li id="fn:1.20">Пользователи Windows могут получить сообщение <code>warning: CRLF will be replaced by LF in .gitignore</code>. Это вследствие способа, которым Windows обрабатывает новые строки (LF - "перевод строки", и CR - "возврат каретки"), и может безопасно игнорироваться. Если сообщение беспокоит Вас, попытайтесь выполнить конфигурацию <code>git config –global core.autocrlf false</code> в командной строке, чтобы выключить его.&nbsp;<a class="arrow" href="#fnref:1.20">&uarr;</a></li>
<li id="fn:1.21">Если в будущем какие-либо нежелательные файлы начинают показываться, когда Вы вводите <code>git status</code>, просто добавьте их в свой <code>.gitignore</code> файл из <a class="ref" href="beginning#code:gitignore">Листинга&nbsp;1.5</a>.&nbsp;<a class="arrow" href="#fnref:1.21">&uarr;</a></li>
<li id="fn:1.22">См. главу <a href="http://progit.org/book/ch3-0.html">Git Branching в <em>Pro Git</em></a> для получения более подробной информации.&nbsp;<a class="arrow" href="#fnref:1.22">&uarr;</a></li>
<li id="fn:1.23">Опытные пользователи Git признают мудрость выполнения <code>git rebase master</code> перед переключением на master ветку, но этот шаг не будет необходим в этой книге.&nbsp;<a class="arrow" href="#fnref:1.23">&uarr;</a></li>
<li id="fn:1.24">Сотрудничая на проекте с другими разработчиками, следует выполнить  <tt class="verb">git pull --rebase</tt> перед этим шагом, чтобы принять любые удаленные изменения.&nbsp;<a class="arrow" href="#fnref:1.24">&uarr;</a></li>
<li id="fn:1.25">Хотя это и не должно иметь значения для примеров приложений в <em>Учебике Rails</em>, если Вы волнуетесь по поводу случайного и/или преждевременного обнародования Вашего приложения, есть несколько опций, помогающих избежать этого; см. <a class="ref" href="beginning#sec:heroku_commands">Раздел&nbsp;1.4.4</a>
.&nbsp;<a class="arrow" href="#fnref:1.25">&uarr;</a></li>
<li id="fn:1.26">Pronounced &ldquo;Engine X&rdquo;.&nbsp;<a class="arrow" href="#fnref:1.26">&uarr;</a></li>
<li id="fn:1.27">Heroku работает с любой веб-платформой Ruby, которая использует <a href="http://rack.rubyforge.org/">Rack middleware</a>, которое обеспечивает стандартный интерфейс между веб-платформами и веб-серверами. Принятие интерфейса Rack было чрезвычайно прочно в сообществе Ruby, включая платформы столь различные как <a href="http://www.sinatrarb.com/">Sinatra</a>, <a href="http://ramaze.net/">Ramaze</a>, <a href="http://camping.rubyforge.org/files/README.html">Camping</a>, и Rails, что означает, что Heroku в основном поддерживает любое веб-приложение Ruby.&nbsp;<a class="arrow" href="#fnref:1.27">&uarr;</a></li>
<li id="fn:1.28">Из-за особенностей их установок, ссылка “About your application’s environment” не работает на Heroku; вместо этой надписи Вы получите сообщение об ошибке. Не волнуйтесь, это нормально. Ошибка уйдет, когда мы удалим страницу Rails по умолчанию в <a class="ref" href="filling-in-the-layout#sec:rails_routes">Разделе&nbsp;5.2.2</a>.&nbsp;<a class="arrow" href="#fnref:1.28">&uarr;</a></li>
</ol>
</div>




