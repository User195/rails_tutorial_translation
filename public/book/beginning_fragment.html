

<h1 class="title">Ruby on Rails チュートリアル </h1>


<h1 class="subtitle"> 実例を使ってRailsを学ぼう</h1>


<h2 class="author">Michael Hartl (マイケル・ハートル)</h2>




<h1 class="contents">目次</h1>


<div id="table_of_contents"><ol><li class="chapter"><a href="beginning#top"><span class="number">第1章</span> ゼロからデプロイまで</a></li><li><ol><li class="section"><a href="beginning#sec:introduction"><span class="number">1.1</span>　はじめに</a></li><li><ol><li class="subsection"><a href="beginning#sec:comments_for_various_readers"><span class="number">1.1.1</span> 読者の皆さまへ</a></li><li class="subsection"><a href="beginning#sec:1.1.2"><span class="number">1.1.2</span> Railsとスケールについて</a></li><li class="subsection"><a href="beginning#sec:conventions"><span class="number">1.1.3</span> この本における取り決め</a></li></ol></li><li class="section"><a href="beginning#sec:up_and_running"><span class="number">1.2</span> さっそく動作させる</a></li><li><ol><li class="subsection"><a href="beginning#sec:development_tools"><span class="number">1.2.1</span> 開発環境</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.2.1.1">IDE</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.2">テキストエディタとコマンドライン</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.3">ブラウザ</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.4">使用するツールについて</a></li></ol></li><li class="subsection"><a href="beginning#sec:rubygems"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, そして Git</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:rails_installer_windows">Rails インストーラ (Windows)</a></li><li class="subsubsection"><a href="beginning#sec:install_git">Gitのインストール</a></li><li class="subsubsection"><a href="beginning#sec:install_ruby">Rubyのインストール</a></li><li class="subsubsection"><a href="beginning#sec:install_rubygems">RubyGemsのインストール</a></li><li class="subsubsection"><a href="beginning#sec:install_rails">Railsのインストール</a></li></ol></li><li class="subsection"><a href="beginning#sec:the_first_application"><span class="number">1.2.3</span> 最初のアプリケーション</a></li><li class="subsection"><a href="beginning#sec:bundler"><span class="number">1.2.4</span> Bundler</a></li><li class="subsection"><a href="beginning#sec:rails_server"><span class="number">1.2.5</span> <code>rails server</code></a></li><li class="subsection"><a href="beginning#sec:mvc"><span class="number">1.2.6</span> Model-view-controller (MVC)</a></li></ol></li><li class="section"><a href="beginning#sec:version_control"><span class="number">1.3</span> Gitによるバージョン管理</a></li><li><ol><li class="subsection"><a href="beginning#sec:git_setup"><span class="number">1.3.1</span> インストールとセットアップ</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.3.1.1">最初のシステム・セットアップ</a></li><li class="subsubsection"><a href="beginning#sec:1.3.1.2">最初のリポジトリ・セットアップ</a></li></ol></li><li class="subsection"><a href="beginning#sec:adding_and_committing"><span class="number">1.3.2</span> 追加とコミット</a></li><li class="subsection"><a href="beginning#sec:1.3.3"><span class="number">1.3.3</span> Gitの利点とは？</a></li><li class="subsection"><a href="beginning#sec:github"><span class="number">1.3.4</span> GitHub</a></li><li class="subsection"><a href="beginning#sec:git_commands"><span class="number">1.3.5</span> ブランチ(branch)、変更(edit)、 コミット(commit)、 統合(merge)</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:git_branch">ブランチ(branch)</a></li><li class="subsubsection"><a href="beginning#sec:git_edit">変更(edit)</a></li><li class="subsubsection"><a href="beginning#sec:git_commit">コミット(commit)</a></li><li class="subsubsection"><a href="beginning#sec:git_merge">統合(merge)</a></li><li class="subsubsection"><a href="beginning#sec:git_push">プッシュ(push)</a></li></ol></li></ol></li><li class="section"><a href="beginning#sec:deploying"><span class="number">1.4</span> デプロイする</a></li><li><ol><li class="subsection"><a href="beginning#sec:1.4.1"><span class="number">1.4.1</span> Herokuのセットアップ</a></li><li class="subsection"><a href="beginning#sec:heroku_step_one"><span class="number">1.4.2</span> Herokuにデプロイする (1)</a></li><li class="subsection"><a href="beginning#sec:1.4.3"><span class="number">1.4.3</span> Herokuにデプロイする (2)</a></li><li class="subsection"><a href="beginning#sec:heroku_commands"><span class="number">1.4.4</span> Heroku コマンド</a></li></ol></li><li class="section"><a href="beginning#sec:beginning_conclusion"><span class="number">1.5</span> 最後に</a></li></ol></li><li class="chapter"><a href="a-demo-app#top"><span class="number">第２章</span>　デモアプリケーション</a></li><li><ol><li class="section"><a href="a-demo-app#sec:planning_the_application"><span class="number">2.1</span> アプリの計画</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:modeling_users"><span class="number">2.1.1</span> ユーザーのモデル</a></li><li class="subsection"><a href="a-demo-app#sec:modeling_microposts"><span class="number">2.1.2</span> マイクロプロストのモデル</a></li></ol></li><li class="section"><a href="a-demo-app#sec:demo_users_resource"><span class="number">2.2</span> Usersリソース</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_user_tour"><span class="number">2.2.1</span> ユーザーページを見てみる</a></li><li class="subsection"><a href="a-demo-app#sec:mvc_in_action"><span class="number">2.2.2</span> 作動中のMVC </a></li><li class="subsection"><a href="a-demo-app#sec:weaknesses_of_this_users_resource"><span class="number">2.2.3</span> Usersリソースの欠点</a></li></ol></li><li class="section"><a href="a-demo-app#sec:microposts_resource"><span class="number">2.3</span> Microposts リソース</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_micropost_microtour"><span class="number">2.3.1</span> マイクロポストのページを見てみる</a></li><li class="subsection"><a href="a-demo-app#sec:putting_the_micro_in_microposts"><span class="number">2.3.2</span> マイクロポストを <em>マイクロ</em> にする</a></li><li class="subsection"><a href="a-demo-app#sec:demo_user_has_many_microposts"><span class="number">2.3.3</span> ユーザーとマイクロポストを <code>has_many</code> で関連づける</a></li><li class="subsection"><a href="a-demo-app#sec:inheritance_hierarchies"><span class="number">2.3.4</span> 継承階層</a></li><li class="subsection"><a href="a-demo-app#sec:deploying_the_demo_app"><span class="number">2.3.5</span>デモアプリケーションのデプロイ</a></li></ol></li><li class="section"><a href="a-demo-app#sec:2.4"><span class="number">2.4</span> 最後に</a></li></ol></li><li class="chapter"><a href="static-pages#top"><span class="number">第3章</span>主に静的ページの作成</a></li><li><ol><li class="section"><a href="static-pages#sec:static_pages"><span class="number">3.1</span> 静的ページ</a></li><li><ol><li class="subsection"><a href="static-pages#sec:truly_static_pages"><span class="number">3.1.1</span> 「本当に」静的なページ</a></li><li class="subsection"><a href="static-pages#sec:static_pages_with_rails"><span class="number">3.1.2</span> Railsでの静的なページ</a></li></ol></li><li class="section"><a href="static-pages#sec:first_tests"><span class="number">3.2</span> 最初のテスト</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_tools"><span class="number">3.2.1</span> テストに使用するツール</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:autotest">Autotest</a></li></ol></li><li class="subsection"><a href="static-pages#sec:TDD"><span class="number">3.2.2</span> TDD: 赤(Red), 緑(Green), リファクタリング</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:spork">Spork</a></li><li class="subsubsection"><a href="static-pages#sec:red">赤(Red)</a></li><li class="subsubsection"><a href="static-pages#sec:green">緑(Green)</a></li><li class="subsubsection"><a href="static-pages#sec:refactor">リファクタリング</a></li></ol></li></ol></li><li class="section"><a href="static-pages#sec:slightly_dynamic_pages"><span class="number">3.3</span> ちょっとだけ動的なページ</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_a_title_change"><span class="number">3.3.1</span> タイトル変更のテスト</a></li><li class="subsection"><a href="static-pages#sec:passing_title_tests"><span class="number">3.3.2</span> タイトルのテストをパスさせる</a></li><li class="subsection"><a href="static-pages#sec:instance_variables_embedded_ruby"><span class="number">3.3.3</span> インスタンス変数とEmbedded Ruby</a></li><li class="subsection"><a href="static-pages#sec:layouts"><span class="number">3.3.4</span> レイアウトを使って重複をなくす</a></li></ol></li><li class="section"><a href="static-pages#sec:static_pages_conclusion"><span class="number">3.4</span> 最後に</a></li><li class="section"><a href="static-pages#sec:static_pages_exercises"><span class="number">3.5</span> 練習</a></li></ol></li><li class="chapter"><a href="rails-flavored-ruby#top"><span class="number">第4章</span> Rails風味のRuby</a></li><li><ol><li class="section"><a href="rails-flavored-ruby#sec:motivation"><span class="number">4.1</span> 動機</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:title_helper"><span class="number">4.1.1</span> <code>title</code> ヘルパー</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:cascading_style_sheets"><span class="number">4.1.2</span> スタイルシート(CSS)</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:strings_and_methods"><span class="number">4.2</span> 文字列(string）とメソッド</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:comments"><span class="number">4.2.1</span> コメント</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:strings"><span class="number">4.2.2</span> 文字列</a></li><li><ol><li class="subsubsection"><a href="rails-flavored-ruby#sec:printing">出力</a></li><li class="subsubsection"><a href="rails-flavored-ruby#sec:single_quoted_strings">シングルクォート内の文字列</a></li></ol></li><li class="subsection"><a href="rails-flavored-ruby#sec:objects_and_message_passing"><span class="number">4.2.3</span> オブジェクトとメッセージパッシング</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:method_definitions"><span class="number">4.2.4</span>メソッドの定義</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:back_to_the_title_helper"><span class="number">4.2.5</span> <code>title</code> ヘルパー、再び</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:other_data_structures"><span class="number">4.3</span> 他のデータ構造</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:arrays_and_ranges"><span class="number">4.3.1</span> 配列と範囲演算子</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:blocks"><span class="number">4.3.2</span>ブロック</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:hashes_and_symbols"><span class="number">4.3.3</span> ハッシュとシンボル</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:css_revisited"><span class="number">4.3.4</span> CSS 再び</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:ruby_classes"><span class="number">4.4</span> Ruby におけるクラス</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:constructors"><span class="number">4.4.1</span> コンストラクタ</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_class_of_our_own"><span class="number">4.4.2</span> クラス継承</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:modifying_built_in_classes"><span class="number">4.4.3</span> 組み込み関数の変更</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_controller_class"><span class="number">4.4.4</span> コントローラクラス</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_user_class"><span class="number">4.4.5</span> ユーザークラス</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:exercises"><span class="number">4.5</span> 練習</a></li></ol></li><li class="chapter"><a href="filling-in-the-layout#top"><span class="number">第5章</span> レイアウトを埋める</a></li><li><ol><li class="section"><a href="filling-in-the-layout#sec:structure"><span class="number">5.1</span> 構造を少し追加する</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:adding_to_the_layout"><span class="number">5.1.1</span> ナビゲーション</a></li><li class="subsection"><a href="filling-in-the-layout#sec:custom_css"><span class="number">5.1.2</span> カスタム・CSS/a></li><li class="subsection"><a href="filling-in-the-layout#sec:partials"><span class="number">5.1.3</span> パーシャル(partial)</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_links"><span class="number">5.2</span> レイアウトのリンク</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:integration_tests"><span class="number">5.2.1</span> 統合テスト（インテグレーションテスト）</a></li><li class="subsection"><a href="filling-in-the-layout#sec:rails_routes"><span class="number">5.2.2</span> Rails ルート</a></li><li class="subsection"><a href="filling-in-the-layout#sec:named_routes"><span class="number">5.2.3</span> 名前付きルート</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:user_signup"><span class="number">5.3</span> 第1歩:ユーザー登録</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:users_controller"><span class="number">5.3.1</span> Users コントローラ</a></li><li class="subsection"><a href="filling-in-the-layout#sec:signup_url"><span class="number">5.3.2</span> ユーザー登録URL</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_conclusion"><span class="number">5.4</span> 最後に</a></li><li class="section"><a href="filling-in-the-layout#sec:layout_exercises"><span class="number">5.5</span> 練習</a></li></ol></li><li class="chapter"><a href="modeling-and-viewing-users-one#top"><span class="number">第6章</span> ユーザーのモデルと表示(1)</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-one#sec:user_model"><span class="number">6.1</span> ユーザー(User)のモデル</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:database_migrations"><span class="number">6.1.1</span> データベース・マイグレーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:the_model_file"><span class="number">6.1.2</span> モデルのファイル</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:model_annotation">モデルの注釈</a></li><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:accessible_attributes">accessibleな属性</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:creating_user_objects"><span class="number">6.1.3</span> ユーザーオブジェクトの生成</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:finding_user_objects"><span class="number">6.1.4</span> ユーザーオブジェクトの検索</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:updating_user_objects"><span class="number">6.1.5</span> ユーザーオブジェクトの更新</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:user_validations"><span class="number">6.2</span> ユーザーのバリデーション</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:presence_validation"><span class="number">6.2.1</span> 存在のバリデーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:length_validation"><span class="number">6.2.2</span> 長さのバリデーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:format_validation"><span class="number">6.2.3</span> 形式のバリデーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:uniqueness_validation"><span class="number">6.2.4</span> 一意性(Uniqueness)のバリデーション</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:the_caveat">一意性(Uniqueness）の問題点</a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:viewing_users"><span class="number">6.3</span> ユーザーを表示する</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:rails_environments"><span class="number">6.3.1</span> Rails環境とデバッギング</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:users_show"><span class="number">6.3.2</span> ユーザーのモデル,ビュー,コントローラ(MVC)</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:a_users_resource"><span class="number">6.3.3</span> Users リソース</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:params_in_debug"><code>debug</code>での<code>params</code> </a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.4"><span class="number">6.4</span> 最後に</a></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.5"><span class="number">6.5</span> 練習</a></li></ol></li><li class="chapter"><a href="modeling-and-viewing-users-two#top"><span class="number">第7章</span> ユーザーのモデルと表示(2)</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-two#sec:insecure_passwords"><span class="number">7.1</span> 危険なパスワード</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_validations"><span class="number">7.1.1</span>パスワードのバリデーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_migration"><span class="number">7.1.2</span> パスワードのマイグレーション</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_active_record_callback"><span class="number">7.1.3</span> Active Record コールバック</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:secure_passwords"><span class="number">7.2</span> 安全なパスワード</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_secure_password_test"><span class="number">7.2.1</span> 安全なパスワードのテスト</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:secure_password_theory"><span class="number">7.2.2</span> パスワードの安全性について</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:implementing_has_password"><span class="number">7.2.3</span> <code>has_password?</code>の実装</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_authenticate_method"><span class="number">7.2.4</span> 認証メソッド</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:better_user_views"><span class="number">7.3</span> ユーザービューを改良する</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:tests_with_factories"><span class="number">7.3.1</span> factoryを使ったユーザー表示ページのテスト</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_name_and_a_gravatar"><span class="number">7.3.2</span> 名前とGravatar</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-two#sec:a_gravatar_helper">Gravatar用ヘルパー</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_user_sidebar"><span class="number">7.3.3</span> ユーザーサイドバー</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:7.4"><span class="number">7.4</span> 最後に</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:7.4.1"><span class="number">7.4.1</span> Git コミット</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:heroku_deploy"><span class="number">7.4.2</span> Heroku デプロイ</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:more_modeling_users_exercises"><span class="number">7.5</span>練習</a></li></ol></li><li class="chapter"><a href="sign-up#top"><span class="number">第8章</span> ユーザー登録</a></li><li><ol><li class="section"><a href="sign-up#sec:signup_form"><span class="number">8.1</span> ユーザー登録用フォーム</a></li><li><ol><li class="subsection"><a href="sign-up#sec:using_form_for"><span class="number">8.1.1</span> <code>form_for</code>を使用する</a></li><li class="subsection"><a href="sign-up#sec:the_form_html"><span class="number">8.1.2</span> フォームのHTML</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_failure"><span class="number">8.2</span> ユーザー登録失敗</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_failure"><span class="number">8.2.1</span> 登録失敗のテスト</a></li><li class="subsection"><a href="sign-up#sec:a_working_form"><span class="number">8.2.2</span> 正常に動くフォーム</a></li><li class="subsection"><a href="sign-up#sec:signup_error_messages"><span class="number">8.2.3</span> ユーザー登録失敗時のエラーメッセージ</a></li><li class="subsection"><a href="sign-up#sec:filtering_parameter_logging"><span class="number">8.2.4</span> パラメータ・ログをフィルターする</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_success"><span class="number">8.3</span> ユーザー登録成功</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_success"><span class="number">8.3.1</span> ユーザー登録成功のテスト</a></li><li class="subsection"><a href="sign-up#sec:the_finished_signup_form"><span class="number">8.3.2</span> ユーザー登録用フォームの完成</a></li><li class="subsection"><a href="sign-up#sec:the_flash"><span class="number">8.3.3</span> flash</a></li><li class="subsection"><a href="sign-up#sec:the_first_signup"><span class="number">8.3.4</span> 実際にユーザーを登録させてみる</a></li></ol></li><li class="section"><a href="sign-up#sec:rspec_integration_tests"><span class="number">8.4</span> RSpec インテグレーションテスト</a></li><li><ol><li class="subsection"><a href="sign-up#sec:integration_tests_with_style"><span class="number">8.4.1</span> 華やかなインテグレーションテスト</a></li><li class="subsection"><a href="sign-up#sec:failed_signup"><span class="number">8.4.2</span> ユーザー登録失敗時に、新しいユーザーが作成されない事をテスト</a></li><li class="subsection"><a href="sign-up#sec:successful_signup"><span class="number">8.4.3</span> ユーザー登録成功時に、新しいユーザーが正しく作成される事をテスト認</a></li></ol></li><li class="section"><a href="sign-up#sec:8.5"><span class="number">8.5</span> 最後に</a></li><li class="section"><a href="sign-up#sec:signup_exercises"><span class="number">8.6</span> 練習</a></li></ol></li><li class="chapter"><a href="sign-in-sign-out#top"><span class="number">第9章</span> サインイン、サインアウト</a></li><li><ol><li class="section"><a href="sign-in-sign-out#sec:sessions"><span class="number">9.1</span>セッション(Session)</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:sessions_controller"><span class="number">9.1.1</span> Sessionコントローラ</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_form"><span class="number">9.1.2</span> サインイン用フォーム</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_failure"><span class="number">9.2</span> サインイン失敗</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:reviewing_form_submission"><span class="number">9.2.1</span>フォーム送信について</a></li><li class="subsection"><a href="sign-in-sign-out#sec:failed_signin"><span class="number">9.2.2</span> サインイン失敗(テストと実装)</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_success"><span class="number">9.3</span> サインイン成功</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:the_completed_create_action"><span class="number">9.3.1</span>　<code>create</code>アクションの完成</a></li><li class="subsection"><a href="sign-in-sign-out#sec:remember_me"><span class="number">9.3.2</span> ユーザー情報の保存</a></li><li class="subsection"><a href="sign-in-sign-out#sec:current_user"><span class="number">9.3.3</span> 現在のユーザー</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signing_out"><span class="number">9.4</span> サインアウト</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:destroying_sessions"><span class="number">9.4.1</span> セッションの破棄</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_upon_signup"><span class="number">9.4.2</span> ユーザー登録時にサインインさせる</a></li><li class="subsection"><a href="sign-in-sign-out#sec:changing_the_layout_links"><span class="number">9.4.3</span> レイアウトのリンクを変更する</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_out_integration_tests"><span class="number">9.4.4</span> サインイン・サインアウトのインテグレーションテスト</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:9.5"><span class="number">9.5</span> 最後に</a></li><li class="section"><a href="sign-in-sign-out#sec:sign_in_out_exercises"><span class="number">9.6</span> 練習</a></li></ol></li><li class="chapter"><a href="updating-showing-and-deleting-users#top"><span class="number">Chapter 10</span> ユーザーの更新・表示・削除</a></li><li><ol><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_users"><span class="number">10.1</span> ユーザーの更新</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:edit_form"><span class="number">10.1.1</span> ユーザー編集用のフォーム</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:enabling_edits"><span class="number">10.1.2</span> ユーザー編集機能の実装</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:protecting_pages"><span class="number">10.2</span> ページの保護</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_signed_in_users"><span class="number">10.2.1</span> ユーザーがサインインしている事を確認する</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_the_right_user"><span class="number">10.2.2</span> 正しいユーザーである事を確認する</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:friendly_forwarding"><span class="number">10.2.3</span> 転送機能の改良</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:showing_users"><span class="number">10.3</span> ユーザーを表示する</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:user_index"><span class="number">10.3.1</span> ユーザーのインデックス</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:sample_users"><span class="number">10.3.2</span> サンプル用ユーザー</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:pagination"><span class="number">10.3.3</span> ページ送り</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:testing_pagination">ページ送りのテスト</a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:partial_refactoring"><span class="number">10.3.4</span> パーシャル(partial)のリファクタリング</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:destroying_users"><span class="number">10.4</span> ユーザーの削除</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:administrative_users"><span class="number">10.4.1</span> 管理権限を持ったユーザー</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:revisiting_attr_accessible"><code>attr_accessible</code>再び</a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:the_destroy_action"><span class="number">10.4.2</span> The <code>destroy</code> アクション</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:10.5"><span class="number">10.5</span> 最後に</a></li><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_deleting_exercises"><span class="number">10.6</span> 練習</a></li></ol></li><li class="chapter"><a href="user-microposts#top"><span class="number">Chapter 11</span> ユーザーのマイクロポスト</a></li><li><ol><li class="section"><a href="user-microposts#sec:a_micropost_model"><span class="number">11.1</span>マイクロポスト(Micropost)のモデル</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:the_basic_model"><span class="number">11.1.1</span>基本的なモデル</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:accessible_attribute">accessibleな属性</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:user_micropost_associations"><span class="number">11.1.2</span> User/Micropost の関連づけ</a></li><li class="subsection"><a href="user-microposts#sec:ordering_and_dependency"><span class="number">11.1.3</span> Micropost を改良する</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:default_scope">デフォルトのスコープ</a></li><li class="subsubsection"><a href="user-microposts#sec:dependent_destroy">Dependent: destroy</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:micropost_validations"><span class="number">11.1.4</span> マイクロポストのバリデーション</a></li></ol></li><li class="section"><a href="user-microposts#sec:showing_microposts"><span class="number">11.2</span> マイクロポストの表示</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:augmenting_the_user_show_page"><span class="number">11.2.1</span> ユーザー表示ページの機能拡張</a></li><li class="subsection"><a href="user-microposts#sec:sample_microposts"><span class="number">11.2.2</span> サンプル用マイクロポスト</a></li></ol></li><li class="section"><a href="user-microposts#sec:manipulating_microposts"><span class="number">11.3</span> マイクロポストを扱う</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:access_control"><span class="number">11.3.1</span> アクセス管理</a></li><li class="subsection"><a href="user-microposts#sec:creating_microposts"><span class="number">11.3.2</span> マイクロポストの作成</a></li><li class="subsection"><a href="user-microposts#sec:a_proto_feed"><span class="number">11.3.3</span> フィードの原型</a></li><li class="subsection"><a href="user-microposts#sec:destroying_microposts"><span class="number">11.3.4</span> マイクロポストの削除</a></li><li class="subsection"><a href="user-microposts#sec:testing_the_new_home_page"><span class="number">11.3.5</span> 新しいhomeページのテスト</a></li></ol></li><li class="section"><a href="user-microposts#sec:11.4"><span class="number">11.4</span> 最後に</a></li><li class="section"><a href="user-microposts#sec:micropost_exercises"><span class="number">11.5</span> 練習</a></li></ol></li><li class="chapter"><a href="following-users#top"><span class="number">Chapter 12</span> ユーザーをフォローする</a></li><li><ol><li class="section"><a href="following-users#sec:the_relationship_model"><span class="number">12.1</span> Relationshipのモデル</a></li><li><ol><li class="subsection"><a href="following-users#sec:a_problem_with_the_data_model"><span class="number">12.1.1</span> データモデルの問題点(と解決法)</a></li><li class="subsection"><a href="following-users#sec:relationship_user_associations"><span class="number">12.1.2</span> UsersとRelationshipsの関連</a></li><li class="subsection"><a href="following-users#sec:relationship_validations"><span class="number">12.1.3</span>バリデーション</a></li><li class="subsection"><a href="following-users#sec:following"><span class="number">12.1.4</span> 「フォローしている」ユーザー</a></li><li class="subsection"><a href="following-users#sec:followers"><span class="number">12.1.5</span> 「フォローされている」ユーザー</a></li></ol></li><li class="section"><a href="following-users#sec:a_web_interface_for_following_and_followers"><span class="number">12.2</span> 「フォローしている・されている」用のウェブ・インターフェース</a></li><li><ol><li class="subsection"><a href="following-users#sec:sample_following_data"><span class="number">12.2.1</span> 「フォローしている」用のサンプルデータ</a></li><li class="subsection"><a href="following-users#sec:stats_and_a_follow_form"><span class="number">12.2.2</span> 統計とフォロー用のフォーム</a></li><li class="subsection"><a href="following-users#sec:following_and_followers_pages"><span class="number">12.2.3</span> 「フォローしている」と「フォローされている」のページ</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_the_standard_way"><span class="number">12.2.4</span> 「フォローする」ボタン(Ajaxなし)</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_with_ajax"><span class="number">12.2.5</span> 「フォローする」ボタン(Ajaxあり)</a></li></ol></li><li class="section"><a href="following-users#sec:the_status_feed"><span class="number">12.3</span> ステータスフィード</a></li><li><ol><li class="subsection"><a href="following-users#sec:motivation_and_strategy"><span class="number">12.3.1</span> 動機と計画</a></li><li class="subsection"><a href="following-users#sec:a_first_feed_implementation"><span class="number">12.3.2</span> ステータスフィードの実装</a></li><li class="subsection"><a href="following-users#sec:scopes_subselects_and_a_lambda"><span class="number">12.3.3</span> スコープ, サブセレクト, そしてlambda</a></li><li class="subsection"><a href="following-users#sec:the_new_status_feed"><span class="number">12.3.4</span> 新しいステータスフィード</a></li></ol></li><li class="section"><a href="following-users#sec:following_conclusion"><span class="number">12.4</span> 最後に</a></li><li><ol><li class="subsection"><a href="following-users#sec:extensions_to_the_sample_application"><span class="number">12.4.1</span> サンプルアプリケーションの機能拡大</a></li><li><ol><li class="subsubsection"><a href="following-users#sec:replies">返信機能</a></li><li class="subsubsection"><a href="following-users#sec:messaging">メッセージ機能</a></li><li class="subsubsection"><a href="following-users#sec:follower_notifications">フォロワーの通知</a></li><li class="subsubsection"><a href="following-users#sec:password_reminders">パスワードリマインダー</a></li><li class="subsubsection"><a href="following-users#sec:signup_confirmation">ユーザーの登録確認</a></li><li class="subsubsection"><a href="following-users#sec:rss_feed">RSSフィード</a></li><li class="subsubsection"><a href="following-users#sec:rest_api">REST API</a></li><li class="subsubsection"><a href="following-users#sec:search">検索機能</a></li></ol></li><li class="subsection"><a href="following-users#sec:guide_to_further_resources"><span class="number">12.4.2</span>読み物ガイド</a></li></ol></li><li class="section"><a href="following-users#sec:following_exercises"><span class="number">12.5</span> 練習</a></li></ol></li></ol></div>

<div id="main_content"></div>


<p> <span class="preamble">
 <span id="foreword">
<strong> 前書き
</strong> <br />
 </span>
 </span></p>

<p>私が前にいた会社(CD Baby)は、かなり早い段階でRuby on Railsに乗り換え、そしてまたPHPに戻っていった会社でした。(詳細は私の名前をGoogleで検索してみて下さい)　Michael Hartl氏によるこの本を強く勧められ、これはやってみなければ、と試してみたところ、私が再びRailsに乗り換えるのに使用したのがこの<em>Ruby on Railsチュートリアル</em>でした。</p>

<p>私は多数のRails本を参考にしてきましたが、決定的だったのはこれです。本書では全ての手順が&ldquo;Rails way&rdquo;(「Rails方式」)で行われており、始めは慣れない方式でしたが、この本を終えた今、やっと自然な方式だと感じる事が出来るようになりました。また、本書はRails本の中で唯一、全編を通して強く推奨されているTDD(Test Driven Development-テスト駆動開発)を行っており、非常に分かりやすく解説されています。最後に、Git、GitHub、そしてHerokuを実例に含む事で、チュートリアルのコード例も含め実際のプロジェクトの開発プロセスを体験出来るようになっています。</p>

<p>この物語風の直線的な形式は、非常に良い物だと思います。私は3日間かけて章の終わりにある練習問題もやりながら<em>Rails チュートリアル</em>を一気に読破しました。最初から最後まで、途中で飛ばさずにやるのが一番効果的で有益な読み方ですのでぜひやってみて下さい。</p>

<p>では、お楽しみあれ!</p>

<p><a href="http://sivers.org/">デレック・シバーズ(Derek Sivers)</a> (<a href="http://sivers.org/">sivers.org</a>) <br />
<em>元:</em> <a href="http://www.cdbaby.com/"><em>CD Baby </em></a><em>(創始者)</em><br />
<em>現在:</em> <a href="http://thoughts.pro/"><em>Thoughts Ltd.</em></a><em>(創始者)</em> <br /></p>

<p> <span class="preamble">
<strong> 謝辞</strong> <br />
 </span></p>

<p><em>Ruby on Rails チュートリアル</em>は、私の以前の著書<em>RailsSpace</em>と、その時の共著者の<a href="http://aure.com/">Aurelius Prochazka</a>に負うところが多くあります。Aureには、RailsSpaceでの協力と本書への支援も含め、感謝したいと思います。また、<em>RailsSpace</em>と<em>Rails チュートリアル</em>両方の編集を担当して頂いたDebra Williams Cauley氏にも謝意を表したく思います。彼女に野球の試合に連れて行ってもらえる限り、私は本を書き続けます。</p>

<p>私にインスピレーションと知識を与えてくれたRubyistの方々:David Heinemeier Hansson, Yehuda Katz, Carl Lerche, Jeremy Kemper, Xavier Noria, Ryan Bates, Geoffrey Grosenbach, Peter Cooper, Matt Aimonetti, Gregg Pollack, Wayne&nbsp;E. Seguin, Amy Hoy, Dave Chelimsky, Pat Maddox, Tom Preston-Werner, Chris Wanstrath, Chad Fowler, Josh Susser, Obie Fernandez, Ian McFarland, Steven Bristol, Giles Bowkett, Evan Dorn, Long Nguyen, James Lindenbaum, Adam Wiggins, Tikhon Bernstam, Ron Evans, Wyatt Greene, Miles Forrest, Pivotal Labsの方々, Herokuの方々, thoughtbotの方々, そしてGitHubチーム、このリスト内の全ての方にも感謝致します。
最後に、リストにまとめるには多すぎるほどの、たくさんの読者の方々から執筆中にバグ報告や提案を頂き、本書を出来る限り良いものにするのに大変役立ちました。
<br /></p>

<p> <span class="preamble">
 <span id="author">
<strong> 著者</strong> <br />
 </span>
 </span></p>

<p><a href="http://michaelhartl.com/">マイケル・ハートル(Michael Hartl)</a> はプログラマー・教育者・起業家です. 氏は2007年に出版されたRails本のベスt−セラー<em>RailsSpace</em>の共著者の一人で、Railsで書かれた<a href="http://github.com/popular/forked">人気の</a>ソーシャルネットワーキングサイト<a href="http://insoshi.com/">Insoshi</a>を設立しリード開発者を担当していました。以前は、<a href="http://www.caltech.edu/">カリフォルニア工科大学</a>(Caltech)で理論物理学と計算物理学の講師を務め、優秀な教育者に贈られるLifetime Achievement Awardを受賞しています。マイケルは<a href="http://college.harvard.edu/">ハーバード大学</a>出身で、Caltechにて<a href="http://resolver.caltech.edu/CaltechETD:etd-05222003-161626">物理学の博士号</a>を取得し、<a href="http://ycombinator.com/">Y&nbsp;Combinator</a>の卒業生でもあります。<br /></p>

<p> <span id="license" class="preamble">
<strong> 著作権とライセンス</strong> <br />
 </span></p>

<p><em>Ruby on Rails チュートリアル: 実例を使ってRailsを学ぼう</em>. Copyright &copy; 2010 by Michael Hartl. <em>Ruby on Rails チュートリアル</em>内の全てのソースコードは<a href="http://www.opensource.org/licenses/mit-license.php">MIT ライセンス</a> と<a href="http://en.wikipedia.org/wiki/Beerware">Beerware ライセンス</a>の元で提供されています。</p>

<pre class="verbatim">   Copyright (c) 2010 Michael Hartl
   以下に定める条件に従い、本ソフトウェアおよび関連文書のファイル（以下「ソフトウェア」）
   の複製を取得するすべての人に対し、ソフトウェアを無制限に扱うことを無償で許可します。
   これには、ソフトウェアの複製を使用、複写、変更、結合、掲載、頒布、サブライセンス、
   および/または販売する権利、およびソフトウェアを提供する相手に同じことを許可する権利も
   無制限に含まれます。

   上記の著作権表示および本許諾表示を、ソフトウェアのすべての複製または重要な部分に記載
   するものとします。
   
   ソフトウェアは「現状のまま」で、明示であるか暗黙であるかを問わず、何らの保証もなく提供されます。
   ここでいう保証とは、商品性、特定の目的への適合性、および権利非侵害についての保証も含みますが、
   それに限定されるものではありません。 作者または著作権者は、契約行為、不法行為、
   またはそれ以外であろうと、ソフトウェアに起因または関連し、あるいはソフトウェアの使用
   またはその他の扱いによって生じる一切の請求、損害、その他の義務について何らの責任も
   負わないものとします。 
</pre>




<pre class="verbatim">/*
 * ------------------------------------------------------------
 * &quot;BEERWARE ライセンス&quot; (リビジョン 42):
 * このソースコードはMichael Hartlによる物です。このライセンスを含む限り、
 * ソースコードで何をしても構いません。いつか会う事があって、あなたがこの
 * チュートリアルが有用だったと思うなら、ビールでも奢って下さい。
 * ------------------------------------------------------------
 */</pre>

<div id="top"></div>


<h1 class="chapter"><a id="sec:1" href="beginning#top" class="heading"><span class="number">第1章</span>ゼロからデプロイまで</a></h1>

<p><a href="http://ruby.railstutorial.org/ruby-on-rails-tutorial-book"><em>Ruby on Rails チュートリアル</em></a>へようこそ。この本の目的は、「<a href="http://rubyonrails.org/">Ruby on Rails</a>を使ってのウェブ開発を学びたいんだけど、どこから始めればいいの？」という質問の答えになる事です。本書を読み終わる頃には、あなたは自作のカスタム・Webアプリケーションを開発し、デプロイするための全ての知識を持っているはずです。また、Railsの「教育エコシステム」なるものに含まれる、さらに高度な本、ブログ、スクリーンキャストなどの恩恵を受けるのに適した実力を身につけられます。<em>Ruby on Rails チュートリアル</em>はRails 3を使用しているため、ここで学んだ内容はRailsの最新バージョンに完全に対応しています。<sup class="footnote" id="fnref:1.1"><a href="#fn:1.1">1</a></sup></p>

<p><em>Ruby on Rails チュートリアル</em>は、基本的に私の以前の著書<sup class="footnote" id="fnref:1.2"><a href="#fn:1.2">2</a></sup>の形式を取り、実際のアプリケーションをゼロから作りながらRailsでのウェブ開発を学べるようになっています。<a href="http://sivers.org">Sivers</a>氏が前置きで述べたように、直線的な形式を取っているため、本書は最初から最後まで読むのが最適です。技術的な本は飛ばして読むのに慣れている方には不自然に思えるかもしれませんが、この読み方を試してみて下さい。<em>Ruby on Rails チュートリアル</em>は、あなたが主人公で、1章ごとにRails開発者としてレベルアップして行くゲームだと考えて下さい。(練習問題は<a href="http://ja.wikipedia.org/wiki/%E3%83%9C%E3%82%B9%E3%82%AD%E3%83%A3%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC#.E4.B8.AD.E3.83.9C.E3.82.B9">中ボス</a>です。)</p>

<p>この第1章では、必要なソフトウェアをインストールし、開発環境(<a class="ref" href="beginning#sec:up_and_running">項&nbsp;1.2</a>)を整えてRuby on Railsの準備をします。続いて、<tt>first_app</tt>という最初のRailsアプリの作成に着手します。<em>Rails チュートリアル</em>はソフトウェア開発のベストプラクティス(最善慣行)を重要視しているので、この新しいRailsプロジェクトを作成後、すぐにGit(<a class="ref" href="beginning#sec:version_control">項&nbsp;1.3</a>)でバージョン管理下に置きます。ついでに、プロダクション環境(<a class="ref" href="beginning#sec:deploying">項&nbsp;1.4</a>)にデプロイもさせてしまいます。</p>

<p><a class="ref" href="a-demo-app#top">第2章</a>では、Railsアプリケーションの基本的な仕組みのデモを兼ねて、新たなプロジェクトを作成します。手っ取り早く動かしたいので、この<em>デモアプリ</em>(<tt>demo_app</tt>)はscaffold(<a class="ref" href="beginning#sidebar:scaffolding">囲み&nbsp;1.1</a>)によるコードの自動生成で作って行きます。この生成されたコードは醜く複雑なので、<a class="ref" href="a-demo-app#top">第2章</a>では<em>URL</em><sup class="footnote" id="fnref:1.3"><a href="#fn:1.3">3</a></sup>を通してデモアプリを使ってみます。</p>

<p><a class="ref" href="static-pages#top">第3章</a>では、サンプルアプリケーション(<tt>sample_app</tt>と呼びます)を作成します。このアプリはTDD(テスト駆動開発)で開発し、<a class="ref" href="static-pages#top">第3章</a>で静的ページ(と少しの動的コンテンツ)を追加する事から始めます。<a class="ref" href="rails-flavored-ruby#top">第4章</a>では少し回り道をし、Railsを動かしているRuby言語を学び、<a class="ref" href="filling-in-the-layout#top">第5章</a>から<a class="ref" href="updating-showing-and-deleting-users#top">第10章</a>ではレイアウト、ユーザーのデータモデル、そしてユーザー登録・認証システムを作りサンプルアプリの基礎を完成させます。最後に<a class="ref" href="user-microposts#top">第11章</a>と<a class="ref" href="following-users#top">第12章</a>ではマイクロブログ機能とソーシャル機能を実装し、機能するサイトに仕上げます。

<p>最終的なサンプルアプリは、元々は同じRailsで書かれていた<sup class="footnote" id="fnref:1.4"><a href="#fn:1.4">4</a></sup><a href="http://twitter.com/">あるソーシャル・マイクロブログサイト</a>にとてもよく似た仕上がりになります。私たちの開発はもちろん、このサンプルアプリを中心に進めて行きますが、<em>Rails チュートリアル</em>では今後Webアプリケーションを作成する時に、どのようなアプリケーションであっても通用する基礎を築きます。</p>

<div class="label" id="sidebar:scaffolding"></div>


<div class="sidebar"><span class="title"><span class="header">Box 1.1.</span><span class="description">Scaffolding: 早くて簡単、でもそれは誘惑</span></span>

<p>Railsの作者David Heinemer Hansson氏による有名な<a href="http://media.rubyonrails.org/video/rails_take2_with_sound.mov">「15分で作るブログ」ビデオ</a>(現在はRyan Bates氏による<a href="http://media.rubyonrails.org/video/rails_blog_2.mov">「Rails 2による15分で作るブログ」</a>に更新されています)など、Railsは当初から刺激の多いフレームワークでした。これらのビデオはRailsのパワーを拝見するには最適で、是非見る事をお勧めします。しかし、これらのビデオは15分でブログを作るという離れ業を、<em>scaffold</em>という機能を利用して成し遂げています。この<em>scaffold</em>という機能は、Railsの<code>generate</code>コマンドによる<em>コード生成</em>に依存します。

<p>Ruby on Railsのチュートリアルを書く時、素早く簡単にコードが生成出来るscaffoldの機能をついあてにしがちです。しかし、生成されたコードの複雑さとその量の多さに、初心者は圧倒されるかもしれません。動くには動くのですが、ソースコードを見ても何がなんだか理解できません。コード自動生成に頼ると、スクリプト作成の達人にはなるかもしれませんが、Rails自体の知識はほとんど身に付きません。</p>

<p><em>Ruby on Rails チュートリアル</em>では、ほぼ逆の方向で開発を行います。<a class="ref" href="a-demo-app#top">第2章</a>ではscaffoldを使ってデモアプリを作成しますが、このチュートリアルの中核は<a class="ref" href="static-pages#top">第3章</a>から作成するサンプルアプリケーションです。開発段階ごとに「理解出来る程度にシンプルで、同時にやりがいのある程度に新しいコンセプトを含む」コードの生成を<em>少しだけ</em>行います。最終的には、どんなWebアプリを作成する時にも役立つ、より深く柔軟なRailsの知識を身につけられるようになっています。</p></div>

<div class="label" id="sec:introduction"></div>


<h2><a id="sec:1.1" href="beginning#sec:introduction" class="heading"><span class="number">1.1</span> はじめに</a></h2>
<p>2004年にデビューしてから、Ruby on Railsは動的Webアプリケーションを開発するための最も有力な、そして人気のあるフレームワーク(土台)の１つに成長しました。スタートアップなどの小さな会社から巨大企業までがRailsを使っています:<a href="http://posterous.com/">Posterous</a>, <a href="http://uservoice.com/">UserVoice</a>, <a href="http://37signals.com/">37signals</a>, <a href="http://shopify.com/">Shopify</a>, <a href="http://github.com/">GitHub</a>, <a href="http://scribd.com/">Scribd</a>, <a href="http://hulu.com/">Hulu</a>,<a href="http://yellowpages.com/">Yellow Pages</a>など、<a href="http://rubyonrails.org/applications">Ruby on Railsを使っているサイトのリスト</a>は日々長くなるばかりです。<a href="http://entp.com/">ENTP</a>, <a href="http://thoughtbot.com/">thoughtbot</a>, <a href="http://pivotallabs.com/">Pivotal Labs</a>, <a href="http://hashrocket.com/">Hashrocket</a>、そして数えきれない程のコンサルタント、インストラクターなど、Railsを専門に扱う開発者も多く存在します。</p>

<p>Railsのどこが凄いのでしょうか？まず、Railsは100%オープンソースで、制限の緩い<a href="http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license">MITライセンス</a>で公開されているので、ダウンロードするのも使用するのも無料です。また、Railsの成功とそのコードの綺麗さ・コンパクトさは、フレームワークを動かしている<a href="http://www.ruby-lang.org/ja/">Ruby</a>言語の柔軟性を利用してWebアプリケーション作成に特化した<a href="http://ja.wikipedia.org/wiki/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%9B%BA%E6%9C%89%E8%A8%80%E8%AA%9E">DSL(ドメイン固有言語)</a>を実装しているからです。このため、HTMLの生成、データモデルの作成、そしてURLの転送など、Webプログラミングで必要な多くの作業が簡単になり、アプリケーションコードが読みやすく、短く収まります。</p>

<p>つぎに、Railsは、Webテクノロジーやフレームワークデザインの進歩に素早く適応します。例えば、Railsはいち早く、Webアプリケーション構築の際に使用されるRESTアーキテクチャを完全に実装したフレームワークの１つでした。(RESTについてはこのチュートリアルで後々解説していきます)　また、Railsの作成者である<a href="http://loudthinking.com/">ハンソン氏</a>をはじめ<a href="http://rubyonrails.org/core">Railsのコアチーム</a>は、他のフレームワークの有用な機能を取り入れる事に恐れをなしません。RailsとMerbの合流はその一例で、結果としてRailsはMerbのモジュール化されたデザインと安定した<a href="http://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9">API</a>の恵みを受ける事が出来ました。(Merb開発者でRailsコアチームメンバーである<a href="http://yehudakatz.com/">Yehuda Katz</a>氏の講演に参加された方なら、Merbチームと合流するのがいかに良い事だったか気付くはずです)</p>

<p>最後に、Railsコミュニティは非常に熱心で様々な経歴の開発者の集まりです。結果、何百人もの<a href="http://contributors.rubyonrails.org/">オープンソース・コントリビュータ</a>、<a href="http://railsconf.com/">カンフェレンス(会議)</a>、多様多種の<a href="http://agilewebdevelopment.com/plugins">プラグイン</a>、パジネーションや画像アップロードなど、特定の作業を行うための<a href="http://rubygems.org/">gem</a>、多数の情報豊かなブログ、そしてフォーラムや掲示板、チャットルームなどが存在します。数多くのRailsプログラマのおかげで、ほとんどのアプリケーションエラーはGoogle検索をすれば関連したブログポストや掲示板のスレッドが出て来ます。</p>

<div class="label" id="sec:comments_for_various_readers"></div>


<h3><a id="sec:1.1.1" href="beginning#sec:comments_for_various_readers" class="heading"><span class="number">1.1.1</span>読者の皆さまへのコメント</a></h3>


<p><em>Rails チュートリアル</em>はRailsだけではなく、Ruby言語、<a href="http://en.wikipedia.org/wiki/HTML">HTML</a>、<a href="http://en.wikipedia.org/wiki/CSS">CSS</a>、<a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a>、そして少しの<a href="http://en.wikipedia.org/wiki/SQL">SQL</a>のためのチュートリアルを含んでいます。あなたのWeb開発の知識の有無に関わらず、このチュートリアルを読み終える頃にはさらに高度な情報源を読めるよう、実力が付く内容になっています。</a>

<p>Railsの多くの機能は「魔法」(magic)に頼っています。例えば、データベースの列からオブジェクトの属性を自動的に推測する機能など、便利であると同時に中でどのように動いているのか分かりにくい機能です。しかし、ほとんどの場合、開発者は機能の詳細や実装を知る必要がないので、<em>Ruby on Railsチュートリアル</em>ではこの「魔法」の解説は行っていません。(Ruby自体C言語で書かれていますが、Rubyを使用するにあたってC言語に触れる必要は全くないのと同じです)　Railsの内側を詳しく知りたい方は、Obie Fernandez著の<a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails 3 Way</em></a>(英語です)を参照してみて下さい。

<p>本書を読むにあたって前提や条件は特にありません。コンピュータとテキストエディタの使用方法を知らない場合は難しいかもしれませんが、根気があれば大丈夫です。逆にあなたの<code>.emacs</code>ファイルが大の大人を泣かせる程複雑でも、このチュートリアルは有用なはずです。<em>Rails チュートリアル</em>は経歴に関係なく、Rails開発を覚えられるように書かれていますが、知識や経験の量の違いなどによりRails開発者への道は異なります。<br /></p>

<p><strong>全ての読者へ:</strong>私が良く聞かれる質問の１つが、「Railsを覚える前にRubyを勉強しておいた方がいいか」です。答えは「あなた自身のスタイルによります」です。一から順に覚える方が得意な方は、Rubyから始めてみるのもいいかもしれません。この章でもRuby学習に役立つ本を数冊挙げています。ただ、Rubyを覚えること自体かなりの時間を要するのと、Rails開発者に必要なRubyの知識はRuby本に含まれている物とは少し違うので、Webアプリケーション開発に興味があって500ページもあるRuby本を読みたくない方はRailsに焦点を当てた本書<em>Rails チュートリアル</em>を読んでからRuby本に進んで下さい。もちろん、	全か無かなどではありません。<em>Rails チュートリアル</em>を読み始めてRubyの知識が不足していると感じたら、Ruby本を少し読んでから本書に戻るのもいいでしょう。オンラインにあるチュートリアル(例えば<a href="http://www.ruby-lang.org/ja/">http://www.ruby-lang.org/ja/</a>や<a href="http://www.rubylearning.com/">http://www.rubylearning.com/</a>にあるものなど)を読んでみるのも手です。

<p>もう１つよく聞かれる質問で「最初からテストしていいのか？」というのがあります。「はじめに」で述べたように、<em>Rails チュートリアル</em>は最初からTDD(テスト駆動開発)を使っています。これは私からみてRailsアプリケーションを開発するのに最適なやり方ですが、かなりの時間的負担と複雑さを要します。テストが面倒、もしくは難しくて前に進めなくなった場合、一度飛ばして読み終わった後で加えてみるのもいいでしょう。<sup class="footnote" id="fnref:1.5"><a href="#fn:1.5">5</a></sup>テスト、バージョン管理、デプロイなど色々なパーツが同時に動いていて圧倒されてしまうかもしれないので、もしこのうちの１つでもが難しいと感じたら、同じく飛ばして下さい。プログレードのRailsアプリを開発するにあたって必要な情報だけを含めたつもりですが、一度目に読み通すのはアプリケーションコードだけで十分です。<br /></p>

<p><strong>ソフトウェア開発の経験が少ない方(デザイナーではない方):</strong><em>Rails チュートリアル</em>はプログラミングの知識がある事を前提としてはいません。プログラミングの経験が少ない方にとってちょうど良い教習本になるかと思います。また、HTML/CSS、JavaScript、データベース(SQLを含む)、バージョン管理、デプロイなどWeb開発は非常に多くの部分があります。本書では触れる程度に紹介している物も多いという事をお忘れなく。<br /></p>

<p><strong>ソフトウェア開発の経験が少ない方(デザイナーの方):</strong></em>HTML/CSSの経験は豊富にある方にとって、この本はRailsプロジェクトを始めるために最適な情報源だと感じます。プログラミングの部分は難しいかもしれませんが、Rubyは初心者に優しい、芸術的な言語なので頑張って下さい。<br /></p>

<p><em>Ruby On Rails チュートリアル</em>を読み終えた後は、<em>Rails チュートリアル</em>と似たようなアプローチで書かれているPeter Cooper氏の<a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a>と、Hal Fulton氏の<a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a>をお勧めします。最後に、Railsをより深く知るにはObie Fernandez氏の<a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a>を。

<p>比較的シンプルに見えるWebアプリでも、実は結構複雑なものだったりします。Webプログラミングを全くした事がない方には、<em>Rails チュートリアル</em>は難しいかもしれません。HTMLとCSSを覚えてから再び<em>Rails チュートリアル</em>にチャレンジしてみて下さい。読者の方から頂いた情報によると<a href="http://headfirstlabs.com/books/hfhtml/"><em>Head First HTML</em></a>や<a href="http://www.amazon.com/gp/product/0596526873?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0596526873"><em>CSS: The Missing Manual</em></a>が人気のようです。Webアプリよりはるかに簡単なサンプルアプリケーションから始める<a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a>の最初の1、2章を読んでみるのも良いかもしれません。

<p><strong>ソフトウェア開発経験があり、Web開発を始めたい方:</strong>プログラミングの経験がある方でクラス、メソッド、データ構造などに馴染みがあるなら、その知識は有利に働くはずです。JavaやC/C++とRubyではかなり記述スタイルが違うので少し違和感を感じるかもしれませんが、すぐに慣れるはずです。(セミコロン';'も使えます)<em>Rails チュートリアル</em>はWeb特有の概念をほぼカバーしているので、<tt>PUT</tt>と<tt>POST</tt>の違いが分からなくても安心して読んで下さい。<br /></p>

<p><strong>Web開発の経験があり、Railsを始めたい方:</strong>PHPやPythonなど動的言語を使用した事があるなら、かなり楽に読めるかと思います。基本的なコンセプトは聞いた事あるものばかりかもしれませんが、TDD(テスト駆動開発)やRESTスタイルなどは多くの方にとって初耳かもしれません。Ruby特有のクセも、チュートリアルを進めて行くうちに明らかになっていくと思います。<br /></p>

<p><strong>Railsを使った事がないRubyプログラマの方:</strong> 最近では多くのRubyプログラマがRailsを使用しているので、純粋にRubyのみを使っている方は少ないかと思いますが、経験豊富なRubyプログラマの方にはObie Fernandez氏の<a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a>をお勧めします。<br /></p>

<p><strong>Rails開発者で経験の少ない方:</strong>もしかしたら既に他のチュートリアルを読んだり小規模なRailsアプリを組んだことがあるかもしれません。ユーザからのフィードバックによれば本書から得られるものは多いという声が多く、また、本書はあなたがRailsを始めて使い始めた頃出ていたチュートリアルより情報が新しいものになっているので、役に立つはずです。<br /></p>

<p><strong>Rails開発者で経験がある方:</strong>本書はあなたには必要ないかもしれませんが、Rails開発者の方からも本書が「意外と役に立った」との声が届いているので、Railsを違う視点から見てみるのも楽しいかもしれません。<br /></p>

<p><em>Ruby on Rails チュートリアル</em>を読み終えたら、(Ruby以外での)開発経験のある方はRubyを一から覚えられ、詳細な解説も載っているDavid A. Black氏の<a href="http://www.amazon.com/gp/product/1933988657?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1933988657"><em>The Well-Grounded Rubyist</em></a>か、似たような内容で事項ごとに分かれているHal Fulton氏の<a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a>をお勧めします。その後はObie Fernandez氏の<a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a>でRailsの知識を深めると良いでしょう。

<p>全部終わった頃には、より高レベルのRailsガイドや情報源を読めるようになっているはずです。私が個人的におすすめ出来るものを挙げていきます:</p>

<ul>

<li><a href="http://railscasts.com/">Railscasts</a>: 無料スクリーンキャスト集</li>
<li><a href="http://peepcode.com/">PeepCode</a>, <a href="http://pragmatic.tv/">Pragmatic.tv</a>, <a href="http://envycasts.com/">EnvyCasts</a>: 有料スクリーンキャスト</li>
<li><a href="http://guides.rubyonrails.org/">Rails Guides</a>: テーマごとのRailsリファンスが載っています。<em>Rails チュートリアル</em>では頻繁にRails Guideを参照しています。</li>
<li><a href="http://www.google.com/search?q=ruby+on+rails+ブログ">Rails ブログ</a>: 全て紹介するには数が多すぎますが、非常に役立つブログが数多く存在します。</li>

</ul>

<h3><a id="sec:1.1.2" href="beginning#sec:1.1.2" class="heading"><span class="number">1.1.2</span> Railsと「スケール」について</a></h3>

<p>この節を続ける前に、Railsフレームワークにとって当初から「ネック」とされてきた事の１つが、多くのデータとユーザによって発生する通信量に対応するための「スケーリングの難しさ」です。ここで１つ言っておきます。<a href="http://idleprocess.wordpress.com/2009/11/24/presentation-summary-high-performance-at-massive-scale-lessons-learned-at-facebook/">フレームワークをスケールさせるのではなくて、<em>アプリケーション自体</em>をスケールさせるのです。</a>すなわち、問題はRailsがスケールできるかどうかではなく、「スケールするアプリケーションをRailsで組む事が出来るか」なのです。どっちにしろ世界で最もトラフィックの多いサイトがRailsを使用している今、答えはYESです。スケーリング自体はRailsだけの問題ではありませんが、もし<em>あなたの</em>アプリケーションがHuluやイェローページ並のデータ量を扱わなければならくなってもRailsはあなたの世界征服を止める事はないでしょう。</p>


<div class="label" id="sec:conventions"></div>


<h3><a id="sec:1.1.3" href="beginning#sec:conventions" class="heading"><span class="number">1.1.3</span> この本における取り決め</a></h3>

<p>本書における取り決め(コマンドやコードの記述法などの統一)は出来るだけ分かりやすく選んだつもりですが、ここでは分かりにくいかもしれない部分を解説しておきます。</p>


<p><a href="http://railstutorial.org/book">HTML版</a>、<a href="http://railstutorial.org/">PDF版</a>ともに、文中には内部(<a class="ref" href="beginning#sec:up_and_running">節&nbsp;1.2</a>など)と外部(<a href="http://rubyonrails.org/download">Ruby on Railsダウンロードページ</a>など)へのリンクの両方が多く含まれています。<sup class="footnote" id="fnref:1.6"><a href="#fn:1.6">6</a></sup></p>

<p>本書の出てくる例の多くはコマンドラインのコマンドを使っています。簡素化のため、全てのコマンドライン例は次のようにUnixスタイルの <tt>$</tt> プロンプトを使っています。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;hello, world&quot;</span>
<span class="go">hello, world</span>
</pre></div>
</div>


<p>Windowsユーザの方は、Windowsコマンドラインでは次のように <tt>&gt;</tt> プロンプトが使用されている事をご理解ください。</p>

<div class="code"><div class="highlight"><pre><span class="go">C:\Sites&gt;echo hello, world</span>
<span class="go">hello, world</span>
</pre></div>
</div>

<p>Unix上では、コマンドを入力する際<code>sudo</code>(他のユーザーの特権レベルでプログラムを実行するためのコマンド)を使わなければならない場合があります。デフォルトで<code>sudo</code>コマンドで実行されたプログラムは通常のユーザはアクセス出来ないファイルやディレクトリにアクセス権をもつ「管理者権限」で実行されます。<sudo>を使用しなければいけないかどうかはシステムに依存するので、<a class="ref" href="beginning#sec:rubygems">節&nbsp;1.2.2</a>のように例で使用する場合には角括弧([ ])で囲んであります。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>

<p><a class="ref" href="beginning#sec:install_ruby">節&nbsp;1.2.2.3</a>で推奨されているRuby Version Manager (rvm)を使用していない場合、ほとんどのUnix/Linux/OS&nbsp;Xシステムは<code>sudo</code>を必要としています。もちろん、実際にコマンドを実行する際には角括弧なしで

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo ruby setup.rb
</pre></div>
</div>


<p>または</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby setup.rb
</pre></div>
</div>


<p>のどちらか(システムによります)を実行して下さい。</p>

<p>Railsには多数のコマンドラインプログラムが付いてきます。例えば<a class="ref" href="beginning#sec:rails_server">節&nbsp;1.2.5</a>では、次のようにローカルマシンの上で開発用のWebサーバを走らせます。</p>

<div class="code"><div class="highlight"><pre><span class="nv">$ </span>rails server
</pre></div>
</div>

<p>コマンドラインのプロンプトと同じく、<em>Railsチュートリアル</em>はディレクトリを隔てるのにUnix方式(<tt>/</tt>)を使用しています。例えばサンプルアプリケーションは、

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>
<p>にあります。Windows上での同等のパスは、</p>

<pre class="verbatim">C:\Sites\sample_app</pre>


<p>です。アプリのルートディレクトリは<em>Rails ルート</em>とし、今後全てのディレクトリはこのルートディレクトリからのパスを指します。(Railsルートは、<em>Rails自体のルートディレクトリではありません</em>)　例えば、3章から作成するサンプルアプリケーションの<code>config</code>ディレクトリは以下の通りです。</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config</pre>

<p>ここでのRailsルートは、<code>config</code>以前のパスの全て、すなわち</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>

<p>になります。記述を短縮するため、</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config/routes.rb</pre>


<p>のファイルを指す場合、Railsルートを省略して単に <code>config/routes.rb</code>とします。</p>

<p>最後に、<em>Railsチュートリアル</em>では度々他のプログラム(シェルコマンドや、バージョン管理ソフト、Rubyプログラムなど)からの出力を含めています。システム間の違いのため、あなたのマシンで表示される出力とは少し異なっているかもしれませんが、問題はありません。加えて、コマンドによりエラーが出る可能性もありますが、すぐ直そうとせずエラーメッセージをGoogleしてみて下さい。これ、実際のソフトウェア開発にも効果的なテクニックです。</p>

<div class="label" id="sec:up_and_running"></div>


<h2><a id="sec:1.2" href="beginning#sec:up_and_running" class="heading"><span class="number">1.2</span> さっそく動作させる</a></h2>

<p>ついに、Ruby on Railsの開発環境の構築と最初のアプリの作成をする時が来ました。特にプログラミング経験が無い方は少し苦労するかもしれませんが、これは開発者として誰もが一度は通る道ですので。諦めずに頑張って下さい。

<div class="label" id="sec:development_tools"></div>


<h3><a id="sec:1.2.1" href="beginning#sec:development_tools" class="heading"><span class="number">1.2.1</span> 開発環境</a></h3>

<p>訳の分からないまでに特異・多彩なカスタマイズの結果、開発環境の数はRailsプログラマの数ほど存在しますが、大きく分けてテキストエディタとコマンドラインを使用する環境とIDE(統合開発環境)を使った環境に分けられます。まずは後者から見てみましょう。

<h4><a id="sec:1.2.1.1" href="beginning#sec:1.2.1.1" class="heading">IDE(統合開発環境)</a></h4>

<p>Rails用のIDEの数は多く、<a href="http://www.aptana.com/rails/">RadRails</a>、<a href="http://www.jetbrains.com/ruby/index.html">RubyMine</a>、<a href="http://www.codegear.com/products/3rdrail">3rd Rail</a>などがあります。全てクロスプラットフォームで評判の良い物も多いので、試してみて下さい。ここで白状しますが、私は未だに自分のRails開発ニーズにあったIDEを見つけた事がありません。プロジェクトにより、動作さえしなかった事もあります。</p>

<h4><a id="sec:1.2.1.2" href="beginning#sec:1.2.1.2" class="heading">テキストエディタとコマンドライン</a></h4>

<p>全てが整った、強力なIDEなくしてどうやってRailsアプリを開発すれば良いのでしょうか？私を含む多くのRails開発者は、<em>テキストエディタ</em>でテキストを編集し、<em>コマンドラインで</em>コマンドを実行するというシンプルな手段を使っています。(<a class="ref" href="beginning#fig:editor_shell">図&nbsp;1.1</a>)　どの組み合わせを使うかは自身の好みとプラットフォームによりますが。</p>

<ul>
<li><strong>Macintosh OS X:</strong> 多くのRails開発者同様、個人的に私が気に入っているのが<a href="http://macromates.com/">TextMate</a>です。他にEmacsやVimのMac版である <a href="http://code.google.com/p/macvim/">MacVim</a> (<code>mvim</code>で起動します)があります。<sup class="footnote" id="fnref:1.7"><a href="#fn:1.7">7</a></sup> 私はターミナルに<a href="http://iterm.sourceforge.net/">iTerm</a> を使っていますが、デフォルトのTerminalを使われている方も大勢いらっしゃいます。</li>

<li><strong>Linux:</strong> TextMateを除き、基本的にMac OS Xと同じです。gVim、 <a href="http://projects.gnome.org/gedit/">gedit</a> (と<a href="http://blog.siverti.com.br/gmate/">GMate</a>プラグイン)、 <a href="http://kate-editor.org/">Kate</a>などがおすすめです。コマンドラインはどのLinuxディストリビューションでも１つ(通常は数個付いてきます）は付いてくるので、好きな物を使って下さい。
</li>

<li><strong>Windows:</strong> Windows上では<a href="http://www.vim.org/download.php#pc">Vim</a>、 <a href="http://www.e-texteditor.com/">E&nbsp;Text Editor</a>、 <a href="http://www.activestate.com/komodo_edit/">Komodo Edit</a>、<a href="http://www.sublimetext.com/">Sublime Text</a>などがあります。コマンドラインは<a href="http://railsinstaller.org/">Railsインストーラ</a>付属の物がおすすめです。(<a class="ref" href="beginning#sec:rails_installer_windows">節&nbsp;1.2.2.1</a>).  </li>

</ul>

<p>Vim系を使用する場合、<a href="http://www.vim.org/scripts/script.php?script_id=1567">rails.vim</a>や<a href="http://www.vim.org/scripts/script.php?script_id=1658">NERD tree</a>など<a href="http://www.google.co.jp/#hl=ja&source=hp&q=vim+rails">のスクリプトや、Vim使いのRails開発者コミュニティ</a>を是非利用して下さい。

<div class="label" id="fig:editor_shell"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/editor_shell.png" alt="editor_shell" /></span></div><div class="caption"><span class="header">図 1.1: </span><span class="description">テキストエディタとコマンドラインの開発環境 (TextMate/iTermを使用) <a href="http://railstutorial.org/images/figures/editor_shell-full.png">(フルサイズ)</a></span></div></div>

<h4><a id="sec:1.2.1.3" href="beginning#sec:1.2.1.3" class="heading">ブラウザ</a></h4>

<p>ブラウザの種類は豊富ですが、大半のRails開発者はFirefox、Safari、もしくはChromeを選ぶ傾向にあるようです。Rails チュートリアル内のスクリーンショットも原則としてFirefoxの物を使用しています。Firefoxを使う場合、HTMLの構造とCSSのルールをダイナミックに調査・編集出来る<a href="https://addons.mozilla.org/ja/firefox/addon/firebug/">Firebug</a>アドオンがおすすめです。Firefox以外では<a href="http://getfirebug.com/firebuglite">Firebug Lite</a>が大抵のブラウザで動きます。また、SafariとChromeにはページの調査したい部分に右クリックする事で情報を調べられる機能があります。使用するブラウザに関係なく、後々こういったWeb解析ツールの使い方を覚えておく価値が分かってくると思います。</p>

<h4><a id="sec:1.2.1.4" href="beginning#sec:1.2.1.4" class="heading">使用するツールについて</a></h4>

<p>開発環境を整える過程で、全てを思い通りに設定するにはかなり長い時間がかかる事を実感するかもしれません。TextMateやVimなどのエディタやIDEは特に、何週間かかっても極めるのは難しいものです。これが初めての方、ご安心下さい。開発ツールを覚えるのに時間をかけるのは<em>普通の事です。</em>これもまた、開発者なら誰もが通る道です。「良いアイディアが浮かんで<em>今すぐにでも</em>RailsでWebアプリを作りたいのに、Unixエディタの使い方を覚えるのに1週間もかかって前に進めない！」とイライラする事もありますが、道具の使い方は職人の心得です。努力は報われるものです。</p>

<div class="label" id="sec:rubygems"></div>


<h3><a id="sec:1.2.2" href="beginning#sec:rubygems" class="heading"><span class="number">1.2.2</span> Ruby、RubyGems、Rails、そしてGit</a></h3>

<p>さあ、RubyとRailsをインストールしましょう。一般的に認められているガイドは<a href="http://rubyonrails.org/download">Ruby on Railsダウンロードページ</a>(英語)です。日本語のページは<a href="http://www.rubylife.jp/rails/">ここ</a>などがあります。本書のほとんどの部分はインターネットなしでも読めますが、この部分だけはソフトウェアをダウンロードしなければならないのでネット環境が必要になります。ここでは、インストールの過程についてコメントしていきます。</p>

<div class="label" id="sec:rails_installer_windows"></div>


<h4><a id="sec:1.2.2.1" href="beginning#sec:rails_installer_windows" class="heading">Rails インストーラ (Windows)</a></h4>

<p>最近までWindows上でのRailsのインストールは困難だったのですが、<a href="http://engineyard.com/">Engine Yard</a>の方々(特にNic Williams博士とWayne E. Seguin氏)のおかげで非常に簡単になりました。Windowsユーザーの方は<a href="http://railsinstaller.org/">Rails インストーラ</a> (<a href="http://railsinstaller.org/">からインストーラをダウンロードして下さい。ダブルクリックで説明に従い、Git、RubyGems、そしてRailsをインストールします。(<a class="ref" href="beginning#sec:install_ruby">節&nbsp;1.2.2.3</a>、<a class="ref" href="beginning#sec:install_rubygems">節&nbsp;1.2.2.4</a>、<a class="ref" href="beginning#sec:install_rails">節&nbsp;1.2.2.5</a>は飛ばして下さい)　インストール後は、すぐに<a class="ref" href="beginning#sec:the_first_application">Section&nbsp;1.2.3</a>に進んで下さい。</p>

<div class="label" id="sec:install_git"></div>


<h4><a id="sec:1.2.2.2" href="beginning#sec:install_git" class="heading">Gitのインストール</a></h4>

<p>Rails環境の多くの部分は、<a href="http://git-scm.com/">Git</a>という<a href="http://ja.wikipedia.org/wiki/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0">バージョン管理システム</a>の機能に頼っています。(Gitについては<a class="ref" href="beginning#sec:version_control">節&nbsp;1.3</a>で解説しています)　Gitは多用されているので、早い内にインストールを済ませておきます。<a href="http://progit.org/book/ja/ch1-4.html"><em>Pro Git</em>の「Gitのインストール」</a>でプラットフォーム毎の解説を行っているので参考にして下さい。

<div class="label" id="sec:install_ruby"></div>

<h4><a id="sec:1.2.2.3" href="beginning#sec:install_ruby" class="heading">Rubyのインストール</a></h4>

<p>次にRubyをインストールします。もしかすると既にあなたのシステムに入っているかもしれないので、その場合は</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby -v
<span class="go">ruby 1.9.2</span>
</pre></div>
</div>


<p>でバージョン情報を確認して下さい。Rails 3はRuby 1.8.7以上で動きますが、1.9.2が最適です。このチュートリアルはバージョン1.9.2を使っている事を前提で進めていきますが、1.8.7でも問題はないはずです。</p>

<p>Ruby 1.9ブランチは常に開発が行われているので、Rubyの最新バージョンをインストールするのは以外と難しかったりします。ここでは私のMac OS X システムで動作したやり方を紹介しますが、システムによりインストールの手順が異なるかもしれません。</p>

<p>OS X、またはLinuxを使う場合、<a href="http://doruby.kbmj.com/8y/20100412/RVM_Ruby_">Ruby Version Manager (RVM)</a>を強くお勧めします。RVMを使うと、複数のRubyバージョンを共存させられるのでとても便利です。Windows上で動く似たようなソフトに<a href="http://github.com/vertiginous/pik">Pik</a>があります。特にRails 2.3とRails 3を同じマシンで動作させたい場合、この作業は特に重要になってきます。私がお勧めするのは、Ruby 1.8.7/Rails 2.3.10とRuby 1.9.2/Rails 3.0.7の二つの組み合わせです。

<p>RVMをインストール後、以下のようにRubyをインストールします:<sup class="footnote" id="fnref:1.8"><a href="#fn:1.8">8</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm get head
<span class="gp">$</span> rvm reload
<span class="gp">$</span> rvm install 1.8.7
<span class="gp">$</span> rvm install 1.9.2
<span class="go">&lt;少し待ちます&gt;</span>
</pre></div>
</div>

<p>最初の二つのコマンドは、RVM自体の更新と再起動です。(RVMは常にアップデートが出ているので、定期的に行って下さい)　最後の二つのコマンドはRubyのインストール作業です。システムによっては結構時間がかかるので作業が終わらなさそうでも心配せずに終わるまで待って下さい。(エラーも出るかもしれません。例えば私の場合Ruby 1.8.7の最新バージョンがコンパイルできず、パッチ302が必要な事が分かりました)</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm install 1.8.7-p302
</pre></div>
</div>

<p>このような事が起こった場合イライラするのは当たり前ですが、誰にでも起こっている事なのでご安心を。</p>

<p>Rubyプログラムは主に独立したRubyコードのパッケージである<em>gem</em>として配布されています。異なるバージョン番号のgemは競合(conflict)する可能性があるので、<em>gemset</em>(ジェムの集まり)に分けるのが一般的です。Rails自体gemとして配布されており、Rails 2とRails 3ではconflictがあるので二つのRailsバージョンを同じマシンで共存させたい場合は各バージョン用のgemsetを作る必要があります。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --create 1.8.7-p302@rails2tutorial
<span class="gp">$</span> rvm --create use 1.9.2@rails3tutorial
</pre></div>
</div>

<p>最初のコマンドはRuby 1.8.7-p302を使用する<code>rails2tutorial</code>というgemsetを作成し、二つ目はRuby 1.9.2を使用する<code>rails3tutorial</code>というgemsetを作成してこれを使用(<code>use</code>コマンド)させています。RVMにはgemsetを扱うためのコマンドが多数あるので、<a href="http://rvm.beginrescueend.com/gemsets/">http://rvm.beginrescueend.com/gemsets/</a>にあるドキュメンテーションを参照して下さい。<a href="http://transitive.info/article/ruby/rvm/">こちら</a>に日本語の簡単なガイドもあります。

<p>このチュートリアルではRuby 1.9.2とRails 3をデフォルトで使用するので、次のコマンドを実行して下さい。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --default use 1.9.2@rails3tutorial
</pre></div>
</div>

<p>これで、デフォルトのRubyを1.9.2に、そしてデフォルトのgemsetを<code>rails3tutorial</code>に設定しました。</p>

<p>ちなみに、RVMを使っていて困った時はヘルプコマンドを使ってみて下さい:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --help
<span class="gp">$</span> rvm gemset --help
</pre></div>
</div>


<div class="label" id="sec:install_rubygems"></div>


<h4><a id="sec:1.2.2.4" href="beginning#sec:install_rubygems" class="heading">RubyGemsのインストール</a></h4>

<p>RubyにはRailsなど、たくさんの良質なパッケージ(<em>gem</em>)が存在します。そのパッケージを統括するのがRubyGemsという、Rubyプロジェクト用のパッケージマネージャです。Rubyをインストールすれば、RubyGemsのインストールは簡単なはずです。<a href="http://doruby.kbmj.com/8y/20100412/RVM_Ruby_">RVMをインストール</a>した場合、すでにRubyGemsも同時にインストールされているはずです。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> which gem
<span class="go">/Users/mhartl/.rvm/rubies/ruby-head/bin/gem</span>
</pre></div>
</div>

<p>RubyGemsがまだ無い場合は<a href="http://rubyforge.org/frs/?group_id=126">インストール</a>し、<code>rubygems</code>ディレクトリでセットアッププログラムを実行して下さい。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>

<p>既にRubyGemsがインストールされている場合は、システムをチュートリアルで使われているバージョンに更新して下さい。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem update --system 1.6.2
</pre></div>
</div>

<p>最後にUbuntuを使用している場合、<a href="http://toranbillups.com/blog/archive/2010/09/01/How-to-install-Rails-3.0-and-Ruby-1.9.2-on-Ubuntu">Toran Billups氏のUbuntu/Rails 3.0ブログポスト</a>にインストールの全手順が紹介されています</p>

<div class="label" id="sec:install_rails"></div>

<h4><a id="sec:1.2.2.5" href="beginning#sec:install_rails" class="heading">Railsのインストール</a></h4>

<p>RubyGemsをインストール後、Railsのインストールは簡単です。(注:2011年5月現在、Rails 3.1がリリースされていますが、このチュートリアルではRails 3.0.7を使用します)

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install rails --version 3.0.7
</pre></div>
</div>

<p>ちゃんと出来たかを確認するため次のコマンドを実行して下さい。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails -v
<span class="go">Rails 3.0.7</span>
</pre></div>
</div>


<div class="label" id="sec:the_first_application"></div>


<h3><a id="sec:1.2.3" href="beginning#sec:the_first_application" class="heading"><span class="number">1.2.3</span> 最初のアプリケーション</a></h3>

<p>ほとんどのRailsアプリケーションは<code>rails</code>コマンドで作成されます。この便利なコマンドは、Railsアプリの骨格を好きなディレクトリに作成してくれます。手始めに、Railsプロジェクト全般用のディレクトリを作ってから<code>rails</code>コマンドで最初のアプリを作成します。</p>

<div class="label" id="code:rails_script"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.1.</span> <span class="description"><code>rails</code>コマンドによる新しいアプリケーションの作成</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> mkdir rails_projects
<span class="gp">$</span> <span class="nb">cd </span>rails_projects
<span class="gp">$</span> rails new first_app
<span class="go">      create  </span>
<span class="go">      create  README</span>
<span class="go">      create  .gitignore</span>
<span class="go">      create  Rakefile</span>
<span class="go">      create  config.ru</span>
<span class="go">      create  Gemfile</span>
<span class="go">      create  app</span>
<span class="go">      create  app/controllers/application_controller.rb</span>
<span class="go">      create  app/helpers/application_helper.rb</span>
<span class="go">      create  app/views/layouts/application.html.erb</span>
<span class="go">      create  app/models</span>
<span class="go">      create  config</span>
<span class="go">      create  config/routes.rb</span>
<span class="go">      create  config/application.rb</span>
<span class="go">      create  config/environment.rb</span>
<span class="go">      .</span>
<span class="go">      .</span>
<span class="go">      .</span>
</pre></div>
</div></div>

<p>このコマンドによって生成されるファイルとディレクトリの数が非常に多い事に注目して下さい。この決められたファイル・ディレクトリ構造(<a class="ref" href="beginning#fig:directory_structure_rails_3">図&nbsp;1.2</a>)は数あるRailsの利点の１つで、何も無い状態から動作するアプリケーションがすぐに作れます。加えてこの構造は全てのRailsアプリに共通しているので、他の開発者の書いたコードも読みやすくなります。Railsがデフォルトで作成するファイルは、<a class="ref" href="beginning#table:rails_directory_structure">表&nbsp;1.1</a>に載せていますが、本書を通してこのファイルやディレクトリの目的を学んでいきます。</p>

<div class="label" id="fig:directory_structure_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/directory_structure_rails_3.png" alt="directory_structure_rails_3" /></span></div><div class="caption"><span class="header">図 1.2: </span><span class="description">新しく作成されたRailsアプリのフォルダ構造<a href="http://railstutorial.org/images/figures/directory_structure_rails_3-full.png">(フルサイズ)</a></span></div></div>




<div class="label" id="table:rails_directory_structure"></div>


<div class="table"><div class="center"><table class="tabular"><tr><th class="align_left"><strong>File/Directory</strong></th><th class="align_left"><strong>Purpose</strong></th></tr><tr class="top_bar"><td class="align_left"><tt>app/</tt></td><td class="align_left">モデル、ビュー、コントローラ、ヘルパーなどを含む主要なアプリケーションコード</td></tr><tr><td class="align_left"><tt>config/</tt></td><td class="align_left">アプリケーションの設定</td></tr><tr><td class="align_left"><tt>db/</tt></td><td class="align_left">データベース関連のファイル</td></tr><tr><td class="align_left"><tt>doc/</tt></td><td class="align_left">マニュアルなど、アプリケーションのドキュメンテーション</td></tr><tr><td class="align_left"><tt>lib/</tt></td><td class="align_left">ライブラリモジュール</td></tr><tr><td class="align_left"><tt>log/</tt></td><td class="align_left">アプリケーションのログファイル</td></tr><tr><td class="align_left"><tt>public/</tt></td><td class="align_left">画像やCSSなど、一般(Webブラウザなど)に公開するデータ</td></tr><tr><td class="align_left"><tt>script/rails</tt></td><td class="align_left">コード生成、コンソールの起動、ローカルのWebサーバの立ち上げなどに使用するRailsスクリプト</td></tr><tr><td class="align_left"><tt>test/</tt></td><td class="align_left">アプリケーションのテスト(<a class="ref" href="static-pages#sec:static_pages_with_rails">節&nbsp;3.1.2</a>で作る<tt>spec</tt>ディレクトリがあるため、使用しません)</td></tr><tr><td class="align_left"><tt>tmp/</tt></td><td class="align_left">一時ファイル</td></tr><tr><td class="align_left"><tt>vendor/</tt></td><td class="align_left">サードパーティのプラグインやgemなど</td></tr><tr><td class="align_left"><tt>README</tt></td><td class="align_left">アプリケーションの簡単な説明</td></tr><tr><td class="align_left"><tt>Rakefile</tt></td><td class="align_left"><code>rake</code>コマンドで使用可能なタスク</td></tr><tr><td class="align_left"><tt>Gemfile</tt></td><td class="align_left">このアプリケーションに必要なGemの定義</td></tr><tr><td class="align_left"><tt>config.ru</tt></td><td class="align_left"><a href="http://rack.rubyforge.org/doc/">Rack ミドルウェア</a>用の設定ファイル</td></tr><tr><td class="align_left"><tt>.gitignore</tt></td><td class="align_left">Gitに無視させたいファイルを指定するためのパターン</td></tr></table></div><div class="caption"><span class="header">表 1.1: </span><span class="description">デフォルトのRailsフォルダ構造まとめ</span></div></div>




<div class="label" id="sec:bundler"></div>


<h3><a id="sec:1.2.4" href="beginning#sec:bundler" class="heading"><span class="number">1.2.4</span> Bundler</a></h3>

<p>新しいRailsアプリケーションを作成したら、次は<em>Bundler</em>でアプリケーションに必要なgemを全てインストール・インクルード(含める)します。これを行うには<code>Gemfile</code>を編集します。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>first_app/
<span class="gp">$</span> mate Gemfile
</pre></div>
</div>

<p><a class="ref" href="beginning#code:default_gemfile">リスト&nbsp;1.2</a>のようなものが出てくるはずです。</p>

<div class="label" id="code:default_gemfile"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.2.</span> <span class="description"><code>first_app</code>ディレクトリ内のデフォルト<code>Gemfile</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>

<span class="c1"># Bundle edge Rails instead:</span>
<span class="c1"># gem &#39;rails&#39;, :git =&gt; &#39;git://github.com/rails/rails.git&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>

<span class="c1"># Use unicorn as the web server</span>
<span class="c1"># gem &#39;unicorn&#39;</span>

<span class="c1"># Deploy with Capistrano</span>
<span class="c1"># gem &#39;capistrano&#39;</span>

<span class="c1"># To use debugger</span>
<span class="c1"># gem &#39;ruby-debug&#39;</span>

<span class="c1"># Bundle the extra gems:</span>
<span class="c1"># gem &#39;bj&#39;</span>
<span class="c1"># gem &#39;nokogiri&#39;, &#39;1.4.1&#39;</span>
<span class="c1"># gem &#39;sqlite3-ruby&#39;, :require =&gt; &#39;sqlite3&#39;</span>
<span class="c1"># gem &#39;aws-s3&#39;, :require =&gt; &#39;aws/s3&#39;</span>

<span class="c1"># Bundle gems for certain environments:</span>
<span class="c1"># gem &#39;rspec&#39;, :group =&gt; :test</span>
<span class="c1"># group :test do</span>
<span class="c1">#   gem &#39;webrat&#39;</span>
<span class="c1"># end</span>
</pre></div>
</div></div>

<p>ほとんどの行はハッシュシンボル <code>#</code>でコメントされています。これらの行はよく使われているgemとBundlerの文法の例を紹介するためで、今の所はデフォルト(Rails自体、そして、Ruby用の<a href="http://www.sqlite.org/">SQLiteデータベース</a>のインターフェース)以外のgemは必要ありません。

<p><code>gem</code>コマンドでバージョン番号を指定しない限り、Bundlerは自動的に最新バージョンのgemを持ってきてインストールしてくれます。残念ながらgemの更新は小さな問題を起こす事も多いので、<a class="ref" href="beginning#code:gemfile_sqlite_version">リスト&nbsp;1.3</a>にあるようにこのチュートリアルでは大抵の場合動作確認済みのバージョン番号を含めています。<sup class="footnote" id="fnref:1.9"><a href="#fn:1.9">9</a></sup>

<div class="label" id="code:gemfile_sqlite_version"></div>

<div class="codelisting">
<div class="listing"><span class="header">リスト 1.3.</span> <span class="description"><tt>sqlite-ruby</tt>　gemのバージョンを指定した<code>Gemfile</code></span>       
</div>

<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>
<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div></div>


<p>これは<a class="ref" href="beginning#code:default_gemfile">リスト&nbsp;1.2</a>の</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>の行を</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>に変更し、Bundlerに<tt>sqlite3-ruby</tt> gemのバージョン<tt>1.3.2</tt>をインストールさせます。(<code>1.3.2</code>のコンパイルにはSnow Leopardが必要なため、OS X Leopardを使用している場合は<tt>sqlite3-ruby</tt> gemのバージョン<tt>1.2.5</tt>を使って下さい)

<p>Ubuntu Linuxを使用している場合、システムによりこの時点で数個他のパッケージをインストールする必要がある可能性があります<sup class="footnote" id="fnref:1.10"><a href="#fn:1.10">10</a></sup>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo apt-get install libxslt-dev libxml2-dev libsqlite3-dev    <span class="c"># Linux のみ</span>
</pre></div>
</div>

<p><code>Gemfile</code>の編集が終わったら<code>bundle install</code>でgemをインストールして下さい。<sup class="footnote" id="fnref:1.11"><a href="#fn:1.11">11</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle install
<span class="go">Fetching source index for http://rubygems.org/</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>

<p>これには数分かかる事もありますが、終われば私たちのアプリケーションは動作可能な状態になります。</p>

<div class="label" id="sec:rails_server"></div>


<h3><a id="sec:1.2.5" href="beginning#sec:rails_server" class="heading"><span class="number">1.2.5</span> <code>rails server</code></a></h3>

<p><a class="ref" href="beginning#sec:the_first_application">節&nbsp;1.2.3</a>の<code>rails new</code>コマンドと<a class="ref" href="beginning#sec:bundler">節&nbsp;1.2.4</a>の<code>bundle install</code>コマンドを実行したおかげで、これで動作するアプリケーションが出来ました。嬉しい事に、Railsには開発マシンからしか観覧できない<em>ローカル</em>Webサーバ<sup class="footnote" id="fnref:1.12"><a href="#fn:1.12">12</a></sup>を起動させるためのコマンドラインプログラム(<em>スクリプト</em>)が付いてくるので簡単です。<sup class="footnote" id="fnref:1.13"><a href="#fn:1.13">13</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails server
<span class="go">=&gt; Booting WEBrick</span>
<span class="go">=&gt; Rails 3.0.7 application starting on http://0.0.0.0:3000</span>
<span class="go">=&gt; Call with -d to detach</span>
<span class="go">=&gt; Ctrl-C to shutdown server</span>
</pre></div>
</div>

<p>これはアプリケーションがアドレス<code>0.0.0.0</code>の<a href="http://en.wikipedia.org/wiki/TCP_and_UDP_port">ポート</a>3000<sup class="footnote" id="fnref:1.14"><a href="#fn:1.14">14</a></sup>で動作している事を示しています。このアドレスはこのマシンで設定されている全てのIPアドレスでlisten(受信待ちの状態)するように指定しています。これにより、<code>127.0.0.1</code>(<code>localhost</code>)という特別なアドレスでアプリケーションを観覧出来ます。<a class="ref" href="beginning#fig:riding_rails_3">図&nbsp;1.3</a>は、<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>をブラウザで観覧した時の結果です。<sup class="footnote" id="fnref:1.15"><a href="#fn:1.15">15</a></sup></p>

<div class="label" id="fig:riding_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3.png" alt="riding_rails_3" /></span></div><div class="caption"><span class="header">図1.3: </span><span class="description">デフォルトのRailsページ (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>).&nbsp;<a href="http://railstutorial.org/images/figures/riding_rails_3-full.png">(フルサイズ)</a></span></div></div>

<p>この最初のアプリケーションの情報を見るには、「About your application&rsquo;s environment」のリンクをクリックして下さい。<a class="ref" href="beginning#fig:riding_rails_3_environment">図&nbsp;1.4</a>のような画面が出てきます。<sup class="footnote" id="fnref:1.16"><a href="#fn:1.16">16</a></sup></p>

<div class="label" id="fig:riding_rails_3_environment"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3_environment.png" alt="riding_rails_3_environment" /></span></div><div class="caption"><span class="header">図1.4: </span><span class="description">アプリケーション環境が表示されているデフォルトページ (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>)<a href="http://railstutorial.org/images/figures/riding_rails_3_environment-full.png">(フルサイズ)</a></span></div></div>

<p>もちろん、いずれデフォルトのRailsページは不要になりますが、動作確認には最適です。<a class="ref" href="filling-in-the-layout#sec:rails_routes">節&nbsp;5.2.2</a>では、デフォルトのページを削除してアプリ用のホームページを作成します。</p>

<div class="label" id="sec:mvc"></div>


<h3><a id="sec:1.2.6" href="beginning#sec:mvc" class="heading"><span class="number">1.2.6</span> Model-view-controller (MVC)</a></h3>

<p>この早い段階でも、Railsアプリケーションの全体的な仕組みを知っておくのは後々役立ちます。(<a class="ref" href="beginning#fig:MVC">図&nbsp;1.5</a>)　デフォルトのRailsアプリ構造(<a class="ref" href="beginning#fig:directory_structure_rails_3">図&nbsp;1.2</a>)に<code>app/</code>というディレクトリとその中に「<code>models</code>」「<code>views</code>」「<code>controllers</code>」の3つのサブディレクトリがあるのに気付いたかもしれません。これはRailsが<a href="http://ja.wikipedia.org/wiki/Model-view-controller">model-view-controller</a> (MVC)パターンを使用していると思わせるヒントです。MVCは、ドメインロジック(ビジネスロジックともいいます)と入力・出力を扱うユーザーインターフェースのロジックを分ける事を強調するアーキテクチャ・パターンです。Webアプリの場合、「ドメインロジック」はユーザや記事、商品などのデータモデル、そしてユーザーインターフェースはWebページを指します。</p>

<p>Railsアプリと通信する際、ブラウザは一般的にWebサーバに<em>request(リクエスト)</em>を送信し、これはリクエストを処理する役割を担っているRails<em>controller(コントローラ)</em>に渡されます。コントローラは、場合によってはすぐ<em>view(ビュー)</em>を生成してHTMLをブラウザに送り返しますが、動的なサイトでは多くの場合、controllerは<em>model(モデル)</em>(サイトの一要素(ユーザなど)を表し、データベースとの通信を行うためのRubyオブジェクト)となんらかのデータを交換してからviewを描出してから完成したWebページをHTMLとしてブラウザに送信します。</p>

<div class="label" id="fig:MVC"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/mvc_schematic.png" alt="mvc_schematic" /></span></div><div class="caption"><span class="header">図1.5: </span><span class="description">model-view-controller (MVC) アーキテクチャの概念図</span></div></div>

<p>この解説が少し抽象的に思えても、この章は後に何度も参照する事になるのでご安心下さい。加えて、より詳細なMVCの解説はデモアプリを開発する際に<a class="ref" href="a-demo-app#sec:mvc_in_action">節&nbsp;2.2.2</a>で行っています。また、サンプルアプリケーションはMVCの全ての部分を使用します。controllerとviewは<a class="ref" href="static-pages#sec:static_pages_with_rails">節&nbsp;3.1.2</a>、modelは<a class="ref" href="modeling-and-viewing-users-one#sec:user_model">節&nbsp;6.1</a>で取り上げ、<a class="ref" href="modeling-and-viewing-users-one#sec:users_show">節&nbsp;6.3.2</a>では3つ全てを連動させます。</p>

<div class="label" id="sec:version_control"></div>


<h2><a id="sec:1.3" href="beginning#sec:version_control" class="heading"><span class="number">1.3</span> Gitによるバージョン管理</a></h2>


<p>新しく動作するRailsアプリが完成した今、アプリケーションのソースコードを<em>バージョン管理下</em>に置きます。これは必ずしもやらなければならない事ではありませんが、バージョン管理システムはプロジェクトのソースコードの変更履歴を記録、複数人数での開発を簡易化し、予期せぬ事態(ファイルを誤って削除してしまった場合など)が起こった場合も以前の状態に戻る事が出来る機能も備えている便利なツールです。バージョン管理システムの知識は、ソフトウェア開発者にとって欠かせない重要な物です。

<p>バージョン管理システムにも色々ありますが、RailsコミュニティではLinuxカーネル用にLinus Torvaldsにより開発された分散バージョン管理システムの<a href="http://git-scm.com/">Git</a>が主流になっています。Gitを全て説明しようとすると楽に本一冊以上に及ぶので、上っ面をなでる程度になりますが、Web上にGitの情報源はたくさんあります。Scott Chacon氏の<a href="http://progit.org/book/ja/"><em>Pro Git</em></a>(Apress, 2009)がおすすめです。Railsコミュニティで主流なのはもちろん、コードをより簡単に他のユーザーと共有し(<a class="ref" href="beginning#sec:github">節&nbsp;1.3.4</a>)、アプリケーションをデプロイ(<a class="ref" href="beginning#sec:deploying">節&nbsp;1.4</a>)するにもソースコードをバージョン管理下に置く事は、非常に重要なことです。

<div class="label" id="sec:git_setup"></div>


<h3><a id="sec:1.3.1" href="beginning#sec:git_setup" class="heading"><span class="number">1.3.1</span> インストールとセットアップ</a></h3>

<p>Gitを<a class="ref" href="beginning#sec:install_git">節&nbsp;1.2.2.2</a>でインストールしていない場合、それを行って下さい。(その節で述べた通り、インストールの手順は<a href="http://progit.org/book/ja/ch1-4.html"><em>Pro Git</em>の「Gitのインストール」</a>に載っています)</p>

<h4><a id="sec:1.3.1.1" href="beginning#sec:1.3.1.1" class="heading">最初のシステム・セットアップ</a></h4>

<p>Gitをインストール後、まずは設定を行います(これは一度のみです)。これは<em>システム全体</em>の設定なので、マシン一代につき一回やればOKです。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global user.name <span class="s2">&quot;あなたの名前&quot;</span>
<span class="gp">$</span> git config --global user.email youremail@example.com
</pre></div>
</div>

<p>また、<code>checkout</code>コマンドの代わりに短い<code>co</code>を使いたいので、設定しておきます:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global alias.co checkout
</pre></div>
</div>

<p><code>co</code>が設定されていないシステムにも対応するため、このチュートリアルの例ではほとんどの場合デフォルトの<code>checkout</code>コマンドを使用していますが、私は実際の開発ではほぼ<code>git co</code>でプロジェクトをチェックアウトしています。</code>

<p>最後のステップとして、Gitのコミットメッセージ入力で使用するエディタを設定出来ます。TextMate、gVim、MacVimなどGUIエディタを使う場合、シェルから離れずシェル内で起動するようフラグを付けて下さい。<sup class="footnote" id="fnref:1.17"><a href="#fn:1.17">17</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global core.editor <span class="s2">&quot;mate -w&quot;</span>
</pre></div>
</div>

<p><code>"mate -w"</code>は、gVimの場合は<code>"gvim -f"</code>、MacVimの場合は<code>"mvim -f"</code>を置き換えて下さい。</p>

<h4><a id="sec:1.3.1.2" href="beginning#sec:1.3.1.2" class="heading">最初のリポジトリ・セットアップ</a></h4>

<p>今度は、リポジトリを作成するたびに必要な作業を行います。(本書では一度しか行いませんが、いつかまた行う事になるでしょう)　まずは、アプリのルートディレクトリに移動し、新しいリポジトリの初期化を行います:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git init
<span class="go">Initialized empty Git repository in /Users/mhartl/rails_projects/first_app/.git/</span>
</pre></div>
</div>

<p>次に、プロジェクトのファイルをリポジトリに追加します。ここで１つ問題点があります。Gitは<em>全てのファイル</em>の変更履歴を管理するようになっているのですが、管理したくないファイルもあります。例えばRailsによって作成されるログファイルは頻繁に内容が変わるので、いちいちバージョン管理に更新させたくありません。Gitにはこういったファイルを無視させる機能があります。<code>.gitignore</code>というファイルをRailsルートに置き、どのようなファイルを無視すればいいかを指定するルールを書き込めばいいのです。</p>

<a class="ref" href="beginning#table:rails_directory_structure">表&nbsp;1.1</a>を再び見てみると、<code>rails</code>コマンドによって</p>
デフォルトの<code>.gitignore</code>ファイル(内容は<a class="ref" href="beginning#code:default_gitignore">リスト&nbsp;1.4</a>)がRailsルートに作成されています。内容は
<div class="label" id="code:default_gitignore"></div>

<div class="codelisting">
<div class="listing"><span class="header">リスト 1.4.</span> <span class="description"><code>rails</code>コマンドにより作成されたデフォルトの<code>.gitignore</code>ファイル</span>       
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3
log/*.log
tmp/**/*
</pre></div>
</div></div>


<p><a class="ref" href="beginning#code:default_gitignore">リスト&nbsp;1.4</a>は、Gitにログファイル、Railsの一時(<code>tmp</code>)ファイル、SQLiteデータベースなどを無視させるように設定しています。(例えば、<code>log/</code>ディレクトリ内のログファイルを無視するには、<code>log/*.log</code>のルールを使って<code>.log</code>で終わる全てのファイルを無視させます。)　無視されるファイルの多くは、自動的に、かつ頻繁に変更されるので、バージョン管理下に置くのは不便です。また、他の開発者と共同で作業をする際、不要な競合(conflict)が起きるので、Gitに無視させるのがベストです。</p>

<p><a class="ref" href="beginning#code:default_gitignore">リスト&nbsp;1.4</a>の<code>.gitignore</code>ファイルはこのチュートリアルには十分ですが、あなたのシステムによっては<a class="ref" href="beginning#code:gitignore">リスト&nbsp;1.5</a>の方が使いやすいかもしれません。<sup class="footnote" id="fnref:1.18"><a href="#fn:1.18">18</a></sup>この<code>.gitignore</code>ファイルはRailsドキュメンテーションのファイル、VimとEmacsのスワップファイル、そしてMacのFinderによって作られる<code>.DS_Store</code>ディレクトリも無視するようGitを設定します。このファイルを使いたい場合は<code>.gitignore</code>ファイルの内容を<a class="ref" href="beginning#code:gitignore">リスト&nbsp;1.5</a>の内容に書き換えて下さい。

<div class="label" id="code:gitignore"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.5.</span> <span class="description">より多くのパターンを無視するように設定した<code>.gitignore</code>ファイル.</span>       
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3*
log/*.log
*.log
/tmp/
doc/
*.swp
*~
.project
.DS_Store
</pre></div>
</div></div>




<div class="label" id="sec:adding_and_committing"></div>


<h3><a id="sec:1.3.2" href="beginning#sec:adding_and_committing" class="heading"><span class="number">1.3.2</span> 追加とコミット</a></h3>

<p>最後に、新しく作成したRailsプロジェクトのファイルをGitに追加し、それをコミットします。ファイルを追加(<code>.gitignore</code>で指定されているもの以外)するには、以下のコマンドを実行して下さい。<sup class="footnote" id="fnref:1.19"><a href="#fn:1.19">19</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git add .
</pre></div>
</div>

<p>ここでの「<code>.</code>」は現在のディレクトリを指し、Gitは<em>再帰的に</em>ファイルを追加できるので、自動的に全てのサブディレクトリも追加されます。このコマンドによりプロジェクトのファイルは、コミット待ちの変更が格納されている、いわゆる「待機場」のような場所に追加されます。ここにあるファイルを見るには、<code>status</code>コマンドを使います:<sup class="footnote" id="fnref:1.20"><a href="#fn:1.20">20</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span>
<span class="gp">#</span> Initial commit
<span class="gp">#</span>
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       new file:   README
<span class="gp">#</span>       new file:   Rakefile
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>

<p>(出力結果は長いので、省略された部分を示すために縦点を使っています)</p>

<p>Gitに変更を保存させるには、<code>commit</code>コマンドを使います:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -m <span class="s2">&quot;Initial commit&quot;</span>
<span class="go">[master (root-commit) df0a62f] Initial commit</span>
<span class="go">42 files changed, 8461 insertions(+), 0 deletions(-)</span>
<span class="go">create mode 100644 README</span>
<span class="go">create mode 100644 Rakefile</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>

<p><code>-m</code>フラグは、コミットメッセージを追加するための物です。<code>-m</code>を省略した場合、<a class="ref" href="beginning#sec:git_setup">節&nbsp;1.3.1</a>で設定されたエディタが起動され、コミットメッセージの入力が促されます。</p>

<p>ここでコミットについて少し解説しておきます。Gitでのコミットは、あくまで<em>ローカル</em>マシン上での物です。別の、人気のオープンソース・バージョン管理システムであるSubversionと違い、コミットはリモート上にあるリポジトリを直接変更するのではなく、Gitでのコミットはローカルでの変更を保存(<code>git commit</code>)とリモート上のリポジトリに変更を加えるpush(<code>git push</code>)の2段階に分かれています。<a class="ref" href="beginning#sec:git_commands">節&nbsp;1.3.5</a>ではこのpushの例が出てきます。

<p>ちなみに、<code>log</code>コマンドでコミットメッセージの履歴が見られます。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git log
<span class="go">commit df0a62f3f091e53ffa799309b3e32c27b0b38eb4</span>
<span class="go">Author: Michael Hartl &lt;michael@michaelhartl.com&gt;</span>
<span class="go">Date:   Thu Oct 15 11:36:21 2009 -0700</span>

<span class="go">  Initial commit</span>
</pre></div>
</div>

<p><code>git log</code>を終了するには、<code>q</code>キーを使わなければならない場合があります。</p>

<h3><a id="sec:1.3.3" href="beginning#sec:1.3.3" class="heading"><span class="number">1.3.3</span> Gitの利点とは?</a></h3>

<p>今の時点では、なぜソースコードをバージョン管理下に置くのか、理解に苦しむかもしれないので例を１つ紹介します。(この先、他の例もたくさん出てきます)　重要なディレクトリである<code>app/controllers/</code>ディレクトリを削除してしまったと仮定しましょう:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
<span class="gp">$</span> rm -rf app/controllers/
<span class="gp">$</span> ls app/controllers/
<span class="go">ls: app/controllers/: No such file or directory</span>
</pre></div>
</div>

<p>ここでは、Unixコマンドの<code>ls</code>で<code>app/controllers/</code>ディレクトリの中身を表示してから、<code>rm</code>このディレクトリを削除しています。<code>-rf</code>フラグは、「recursive force」(再帰的に、削除して良いかどうかをユーザーに確認せずに全てのファイル、ディレクトリ、サブディレクトリを削除する)の意味です。


<p>現在の状態を確認してみましょう。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       deleted:    app/controllers/application_controller.rb
<span class="gp">#</span>
<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
</div>

<p>数個のファイルが削除されましたが、この変更が行われたのは現在の「作業ツリー」内のみなので、まだコミット(保存)されていません。すなわち、Gitに以前のコミットを<code>checkout</code>コマンド(と、現在の変更を強制的に書き換えるための<code>-f</code>フラグ)でチェックアウトさせて簡単に削除前の状態に戻す事ができます。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -f
<span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="go">nothing to commit (working directory clean)</span>
<span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
</pre></div>
</div>

<p>なんと!削除されたディレクトリとファイルが戻ってきました。</p>

<div class="label" id="sec:github"></div>


<h3><a id="sec:1.3.4" href="beginning#sec:github" class="heading"><span class="number">1.3.4</span> GitHub</a></h3>

<p>プロジェクトがGitでバージョン管理下に置かれた今、Gitリポジトリのプロジェクト・ホスティングサービスである<a href="http://github.com">GitHub</a>にソースコードをアップロードします。GitHubにリポジトリをプッシュするのには二つの目的があります。１つ目は、ソースコード(とその全ての変更履歴)の完全なバックアップが取れる事です。２つ目は、他の開発者との共同作業をより簡単に行うためです。このステップは任意ですが、GitHubのメンバーになると、多くのオープンソース・プロジェクトに参加することが可能になります。</p>

<div class="label" id="fig:github_first_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_first_page.png" alt="github_first_page" /></span></div><div class="caption"><span class="header">図 1.6: </span><span class="description">アカウント作成後の、最初のGitHubページ<a href="http://railstutorial.org/images/figures/github_first_page-full.png">(フルサイズ)</a></span></div></div>


<div class="label" id="fig:create_first_repository"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/create_first_repository.png" alt="create_first_repository" /></span></div><div class="caption"><span class="header">図 1.7: </span><span class="description">GitHubでの最初のアプリケーションのリポジトリの作成<a href="http://railstutorial.org/images/figures/create_first_repository-full.png">(フルサイズ)</a></span></div></div>

<p>GitHubには様々な有料プランがありますが、オープンソースのコードなら無料なので、<a href="https://github.com/signup/free">無料のGitHubアカウント</a>を作成して下さい。(<a href="http://help.github.com/key-setup-redirect">SSHキー</a>の設定について少し読むことになるかもしれません) アカウント作成後、<a class="ref" href="beginning#fig:github_first_page">図&nbsp;1.6</a>のようなページが表示されるはずです。<a href="http://github.com/repositories/new">create a repository</a>をクリックし、<a class="ref" href="beginning#fig:create_first_repository">図&nbsp;1.7</a>のように新規リポジトリの情報を入力して下さい。リポジトリを作成したら、以下のようにアプリケーションをpushします:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:&lt;username&gt;/first_app.git
<span class="gp">$</span> git push origin master
</pre></div>
</div>

<p>このコマンドは、Gitに「メインブランチ(<em>master</em>)の起源をGitHubとし、リポジトリをGitHubにプッシュさせる」作業を行わせます。</p>もちろん、<tt class="verb">&lt;username&gt;</tt>は実際のあなたのユーザ名に置き換えて下さい。例えば、私の場合<code>railstutorial</code>ユーザで実行したコマンドは

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:railstutorial/first_app.git
</pre></div>
</div>


<p>でした。結果として、GitHubにファイル閲覧、コミット履歴の表示、そしてその他多数の機能を備えたアプリケーションのリポジトリ用のページが作られました。(<a class="ref" href="beginning#fig:github_repository_page">図&nbsp;1.8</a>)</p>

<div class="label" id="fig:github_repository_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_repository_page.png" alt="github_repository_page" /></span></div><div class="caption"><span class="header">図1.8: </span><span class="description">GitHubのリポジトリ・ページ&nbsp;<a href="http://railstutorial.org/images/figures/github_repository_page-full.png">(フルサイズ)</a></span></div></div>


<div class="label" id="sec:git_commands"></div>


<h3><a id="sec:1.3.5" href="beginning#sec:git_commands" class="heading"><span class="number">1.3.5</span> ブランチ(branch)、変更(edit)、 コミット(commit)、 統合(merge)</a></h3>


<p><a class="ref" href="beginning#sec:github">節&nbsp;1.3.4</a>で紹介した手順を踏んでいれば、GitHubは自動的にリポジトリのメインページに<code>README</code>ファイルの内容を表示している事に気付くかもしれません。私たちの場合、プロジェクトは<code>rails</code>コマンドによって作成されたRailsアプリケーションなので、<code>README</code>ファイルはRailsに付いてくるものです。(<a class="ref" href="beginning#fig:rails_readme">図&nbsp;1.9</a>)　このREADMEはあまり役に立たないので、この節では<code>README</code>を編集し、このプロジェクトについての説明を含むように変更します。これをしながら、Gitで推奨されているbranch、編集、commit、mergeのワークフローを初めて実践します。

<div class="label" id="fig:rails_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/rails_readme.png" alt="rails_readme" /></span></div><div class="caption"><span class="header">Figure 1.9: </span><span class="description">GitHubにある、役に立たない初期の <code>README</code> ファイル&nbsp;<a href="http://railstutorial.org/images/figures/rails_readme-full.png">(フルサイズ)</a></span></div></div>


<div class="label" id="sec:git_branch"></div>


<h4><a id="sec:1.3.5.1" href="beginning#sec:git_branch" class="heading">ブランチ(branch)</a></h4>

<p>Gitは、<em>ブランチ(branch)</em>を作るのが非常に得意です。branchは基本的にはリポジトリのコピーで、branch上では元のファイルを触らずに新しいコードを書くなど試験的な変更をする事が可能です。大抵の場合親リポジトリは<em>master</em>ブランチと呼ばれ、トピックブランチ(短期間だけ使うブランチ)は<code>checkout</code>と<code>-b</code>フラグを使って作成出来ます:

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b modify-README
<span class="go">Switched to a new branch &#39;modify-README&#39;</span>
<span class="gp">$</span> git branch
<span class="go">master</span>
<span class="go">* modify-README</span>
</pre></div>
</div>

<p>ここでの二つ目のコマンド(<code>git branch</code>)は、単にローカルブランチを全て表示するもので、「*」はそのブランチが現在使用中の物である事を意味します。<code>git checkout -b modify-README</code>コマンドがブランチを作成し、すぐにそのブランチに移動(<code>modify-README</code>ブランチの横に「*」が表示されているため)する事に注目して下さい。(<a class="ref" href="beginning#sec:version_control">節&nbsp;1.3</a>で<code>co</code>エイリアスを設定した場合は、代わりに<code>git co -b modify-README</code>としても構いません。)</p>

<p>ブランチの真価は、他の開発者と共同で作業する時に発揮されますが、<sup class="footnote" id="fnref:1.21"><a href="#fn:1.21">21</a></sup>このチュートリアルのように一人で作業する時にも役立ちます。master(マスター)ブランチは、トピックブランチで行った変更に影響されないので、もしブランチ上のコードがめちゃくちゃになってしまってもマスターブランチをチェックアウトし、トピックブランチを削除する事によっていつでも変更を破棄する事が出来ます。やり方は、章の最後で紹介しています。</p>

<p>ちなみに、通常このような小さな変更はブランチを作成するに値しませんが、ブランチは良い習慣なので少し練習する事に損はありません。</p>

<div class="label" id="sec:git_edit"></div>


<h4><a id="sec:1.3.5.2" href="beginning#sec:git_edit" class="heading">変更(edit)</a></h4>

<p>トピックブランチを作成後、少し説明的にするために編集します。私はこの作業に、主に<a href="http://daringfireball.net/projects/markdown/">Markdownマークアップ言語</a>を使用しています。<code>.markdown</code>拡張子を使えば、GitHubが自動的にWebページ用にフォーマットしてしくれます。なのでまず、Unix <code>mv</code>コマンドのGit版を使ってファイル名を変更し、<a class="ref" href="beginning#code:new_readme">リスト&nbsp;1.6</a>の内容に書き換えます:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git mv README README.markdown
<span class="gp">$</span> mate README.markdown
</pre></div>
</div>


<div class="label" id="code:new_readme"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.6.</span> <span class="description">新しい<code>README.markdown</code>ファイル</span>       
</div>
<div class="code"><div class="highlight"><pre># Ruby on Rails Tutorial: first application

This is the first application for
[*Ruby on Rails Tutorial: Learn Rails by Example*](http://railstutorial.org/) 
by [Michael Hartl](http://michaelhartl.com/).
</pre></div>
</div></div>


<div class="label" id="sec:git_commit"></div>


<h4><a id="sec:1.3.5.3" href="beginning#sec:git_commit" class="heading">コミット(commit)</a></h4>

<p>変更を加えた今、ブランチの状態を見てみましょう:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch modify-README
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       renamed:    README -&gt; README.markdown
<span class="gp">#</span>
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       modified:   README.markdown
<span class="gp">#</span>
</pre></div>
</div>

<p>この時点で<a class="ref" href="beginning#sec:adding_and_committing">節&nbsp;1.3.2</a>であったように<code>git add .</code>を使う事も出来ますが、Gitには全ての現存するファイルへの変更をコミットする<code>-a</code>フラグがあります。(Gitは<code>git mv</code>で作成されたファイルは新規ファイルと見なさないので、これらのファイルも含まれます。)</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -a -m <span class="s2">&quot;Improved the README file&quot;</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>

<p><code>-a</code>フラグを使用する際は注意して下さい。もし最後のコミット後、新しいファイルを追加した場合はまず<code>git add</code>でバージョン管理下に置く必要があります。</p>

<div class="label" id="sec:git_merge"></div>


<h4><a id="sec:1.3.5.4" href="beginning#sec:git_merge" class="heading">統合(merge)</a></h4>

<p>ファイルへの変更が終わったので、マスターブランチにこの変更を統合します:<sup class="footnote" id="fnref:1.22"><a href="#fn:1.22">22</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout master
<span class="go">Switched to branch &#39;master&#39;</span>
<span class="gp">$</span> git merge modify-README
<span class="go">Updating 34f06b7..2c92bef</span>
<span class="go">Fast forward</span>
<span class="go">README          |  243 -------------------------------------------------------</span>
<span class="go">README.markdown |    5 +</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>

<p>Gitの出力には<code>34f06b7</code>のような物がよく出てきます。これらはGitがリポジトリの内部処理に使っている物なので、マシンの違いにより上記のものと少し異なるかもしれませんが、他の部分はほぼ同じのはずです。</p>

<p>変更をmerge(統合)した後は、<code>git branch -d</code>トピックブランチを削除し、ブランチの掃除をすれば終わりです。

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git branch -d modify-README
<span class="go">Deleted branch modify-README (was 2c92bef).</span>
</pre></div>
</div>

<p>これは任意のステップで、実際の所多くの場合はトピックブランチを残します。トピックブランチを削除せずに放置しておけば、ブランチを交互に行き来してきりの良い所で変更を統合する事が出来ます。</p>

<p>上で述べた通り、<code>git branch -D</code>でトピックブランチ上の変更を破棄する事もできます:</p>

<div class="code"><div class="highlight"><pre><span class="c"># これは例です。ブランチでミスをした時以外は実行しないで下さい。</span>
<span class="nv">$ </span>git checkout -b topic-branch
<span class="nv">$ </span>&lt;ブランチをぶっ壊す&gt;
<span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -a -m <span class="s2">&quot;壊れたブランチ&quot;</span>
<span class="nv">$ </span>git checkout master
<span class="nv">$ </span>git branch -D topic-branch
</pre></div>
</div>

<p><code>-d</code>フラグとは違い、<code>-D</code>フラグは変更をmerge(統合)していなくてもブランチを削除してくれます。</p>

<div class="label" id="sec:git_push"></div>


<h4><a id="sec:1.3.5.5" href="beginning#sec:git_push" class="heading">プッシュ(push)</a></h4>

<p><code>README</code>ファイルを更新したので、GitHubに変更をプッシュして結果を見てみましょう。<a class="ref" href="beginning#sec:github">節&nbsp;1.3.4</a>で既に一度プッシュしているので、大抵のシステムでは<code>origin master</code>を省略して<code>git push</code>できます。<sup class="footnote" id="fnref:1.23"><a href="#fn:1.23">23</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
</pre></div>
</div>


<p>システムによっては、エラーが出る可能性があります:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
<span class="go">fatal: The current branch master is not tracking anything.</span>
</pre></div>
</div>

<p>このような場合は、<a class="ref" href="beginning#sec:github">節&nbsp;1.3.4</a>にあるように<code>git push origin master</code>を使って下さい。</p>

<p>GitHubはMarkdownを使って、新しいREADMEファイルを綺麗にフォーマットしてくれます。(<a class="ref" href="beginning#fig:new_readme">図&nbsp;1.9</a>).</p>

<div class="label" id="fig:new_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/new_readme.png" alt="new_readme" /></span></div><div class="caption"><span class="header">Figure 1.9: </span><span class="description">Markdownにフォーマットされた、新しい<code>README</code>ファイル<a href="http://railstutorial.org/images/figures/new_readme-full.png">(フルサイズ)</a></span></div></div>


<div class="label" id="sec:deploying"></div>


<h2><a id="sec:1.4" href="beginning#sec:deploying" class="heading"><span class="number">1.4</span> デプロイする</a></h2>

<p>空っぽのRailsアプリケーションしかないこの段階でも、プロダクション環境にデプロイしてしまいます。このステプは任意ですが、早い段階で頻繁にデプロイする事によって開発サイクルでの問題を見つけ出す事が出来ます。開発環境のみでのテストを重ねるだけでいつまでもプロダクションにデプロイせずにいると、アプリケーションを公開する時に思わぬ事態になる可能性が高まります。<sup class="footnote" id="fnref:1.24"><a href="#fn:1.24">24</a></sup>


<p>かつてRailsアプリをデプロイさせるのは苦難でしたが、最近になって簡単になってきており、多数の選択肢があります。共有ホストやVPS(仮想プライベートサーバ)上で動作する<a href="http://www.modrails.com/">Phusion Passenger</a>(Apache・Nginx<sup class="footnote" id="fnref:1.25"><a href="#fn:1.25">25</a></sup>Webサーバ用のモジュール)、フルサービス・ホスティングの<a href="http://engineyard.com/">Engine Yard</a>や<a href="http://railsmachine.com/">Rails Machine</a>、クラウドサービスの<a href="http://heroku.com/">Heroku</a>などです。</p>

<p>私のお気に入りはHerokuで、Railsや他のRubyWebアプリ用のホスティングプラットフォームです。<sup class="footnote" id="fnref:1.26"><a href="#fn:1.26">26</a></sup>　Gitでソースコードのバージョン管理をしていれば、HerokuはRailsアプリのディプロイメントをとても簡単にしてくれます。(Gitが有利なのも、このHerokuが１つの理由です。まだインストールしていない場合、手順は<a class="ref" href="beginning#sec:version_control">節&nbsp;1.3</a>で紹介しています)　この章の残りでは、私たちのアプリケーションをHerokuにデプロイします。</p>

<h3><a id="sec:1.4.1" href="beginning#sec:1.4.1" class="heading"><span class="number">1.4.1</span> Herokuのセットアップ</a></h3>

<p><a href="http://api.heroku.com/signup">Herokuアカウントを作成</a>後、Herokuのgemをインストールして下さい。

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install heroku
</pre></div>
</div>

<p>GitHub(<a class="ref" href="beginning#sec:github">節&nbsp;1.3.4</a>)と同じく、Herokuを使うには<a href="http://help.github.com/key-setup-redirect">SSHキー</a>の作成と、HerokuのサーバにGitでサンプルアプリケーションのリポジトリをpushするための<a href="http://ja.wikipedia.org/wiki/%E5%85%AC%E9%96%8B%E9%8D%B5%E6%9A%97%E5%8F%B7">公開鍵</a>を教える必要があります。

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku keys:add
</pre></div>
</div>

<p>最後に、<code>heroku</code>コマンドでHerokuサーバ上にサンプルアプリのための場所を作ります。(<a class="ref" href="beginning#code:heroku_create">リスト&nbsp;1.7</a>)</p>

<div class="label" id="code:heroku_create"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.7.</span> <span class="description">Herokuで新しいアプリケーションを作成</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku create
<span class="go">Created http://severe-fire-61.heroku.com/ | git@heroku.com:severe-fire-61.git</span>
<span class="go">Git remote heroku added</span>
</pre></div>
</div></div>

<p>それだけです。<code>heroku</code>コマンドは、私たちのアプリケーション専用の新しいサブドメインを作成し、このサブドメインはすぐに観覧できます。今はまだ何もありませんが、すぐにデプロイしてWebページを表示させます。</p>

<div class="label" id="sec:heroku_step_one"></div>


<h3><a id="sec:1.4.2" href="beginning#sec:heroku_step_one" class="heading"><span class="number">1.4.2</span> Herokuにデプロイする (1)</a></h3>

<p>Herokuにデプロイするには、まずGitでアプリケーションをHerokuにpushします:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push heroku master
</pre></div>
</div>

<p>(<em>注:</em>数名の読者の方から、この過程でSQLite関連のエラーが出るとの報告がありました:</p>

<div class="code"><div class="highlight"><pre><span class="go">rake aborted! no such file to load -- sqlite3</span>
</pre></div>
</div>

<p>この章で紹介する手順はを踏めば(私自身のシステムを含む)ほとんどの環境で動きますが、このエラーが出た場合は<code>Gemfile</code>の中身を<a class="ref" href="beginning#code:gemfile_sqlite_heroku">リスト&nbsp;1.8</a>に書き換えて、Herokuに<tt>sqlite-ruby</tt>のgemを読み込ませないようにすれば動く可能性があります。</p>

<div class="label" id="code:gemfile_sqlite_heroku"></div>


<div class="codelisting">
<div class="listing"><span class="header">リスト 1.8.</span> <span class="description">Heroku用の修正が加えられた<code>Gemfile</code></span>
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.7&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="ss">:development</span>
</pre></div>
</div></div>




<h3><a id="sec:1.4.3" href="beginning#sec:1.4.3" class="heading"><span class="number">1.4.3</span> Herokuにデプロイする (2)</a></h3>

<p>実はステップ(2)はありません!これで終わりです。(<a class="ref" href="beginning#fig:heroku_app">図&nbsp;1.10</a>)デプロイされたアプリケーションを見るには、<code>heroku create</code>(<a class="ref" href="beginning#code:heroku_create">リスト&nbsp;1.7</a>)を実行した際に作られたアドレスをブラウザで観覧するだけです。(もちろんここに出てくる私のアドレスではなく、あなたのアドレスを使って下さい)<sup class="footnote" id="fnref:1.27"><a href="#fn:1.27">27</a></sup>　<code>heroku</code>コマンドに引数を与える事でも、ブラウザで正しいアドレスを観覧する事が出来ます:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku open
</pre></div>
</div>


<div class="label" id="fig:heroku_app"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_app.png" alt="heroku_app" /></span></div><div class="caption"><span class="header">図1.10: </span><span class="description">Herokuで動作中のRailsチュートリアルアプリケーション&nbsp;<a href="http://railstutorial.org/images/figures/heroku_app-full.png">(フルサイズ)</a></span></div></div>

<p>デプロイ成功後は、Herokuの素晴らしいユーザーインターフェースでアプリケーションの管理と設定が出来ます。<a class="ref" href="beginning#fig:heroku_info">図&nbsp;1.11</a>).</p>

<div class="label" id="fig:heroku_info"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_info.png" alt="heroku_info" /></span></div><div class="caption"><span class="header">図1.11: </span><span class="description">Herokuのユーザーインターフェース&nbsp;<a href="http://railstutorial.org/images/figures/heroku_info-full.png">(フルサイズ)</a></span></div></div>

<div class="label" id="sec:heroku_commands"></div>


<h3><a id="sec:1.4.4" href="beginning#sec:heroku_commands" class="heading"><span class="number">1.4.4</span> Heroku コマンド</a></h3>

<p><a href="http://docs.heroku.com/heroku-command">Herokuのコマンド</a>はたくさんあるので、ここでは触る程度にしか紹介しませんが、少しだけ使ってみます。アプリケーションの名前を変更してみます。</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku rename railstutorial
</pre></div>
</div>

<p>この名前は、私のサンプルアプリケーションが使用しているので他のものを使用して下さい。実際の所、Herokuに生成されたデフォルトのアドレスでも十分です。アプリケーションの名前を変えたい場合は、次の用なランダムのサブドメイン名を設定してこの章の始めに触れたアプリケーションのセキュリティを実装してみるのも手です:</p>

<pre class="verbatim">hwpcbmze.heroku.com
seyjhflo.heroku.com
jhyicevg.heroku.com</pre>

<p>このようなでたらめのサブドメイン名なら、アドレスを渡さない限りサイトがアクセスされる心配もありません。(ちなみに、Rubyのコンパクトさのおかげで、このサブドメイン名を生成するためのコードは下のような物で済みました:</p>

<div class="code"><div class="highlight"><pre><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">.</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">shuffle</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">7</span><span class="o">].</span><span class="n">join</span>
</pre></div>
</div>


<p>最高ですね。</p>

<p>サブドメインの他に、Herokuにはカスタムドメインを設定する機能もあります。(<a href="http://railstutorial.org">Ruby on Rails チュートリアルのWebサイト</a>も、Heroku上で動作しているので、このサイトを見ているあなたはHerokuにホスティングされているサイトを観覧している事になります!)　カスタムドメインや他のHeroku関連の情報は、<a href="http://docs.heroku.com/">Herokuのドキュメンテーション</a>を参照して下さい。</p>

<div class="label" id="sec:beginning_conclusion"></div>


<h2><a id="sec:1.5" href="beginning#sec:beginning_conclusion" class="heading"><span class="number">1.5</span> 最後に</a></h2>

<p>この章ではインストール、開発環境の設定、バージョン管理、そしてデプロイと、色々な事を成し遂げました。この時点での進歩をtweetするには下のリンクからどうぞ。</p>
<div class="center"><a href="http://twitter.com/?status=I'm%20learning%20Ruby%20on%20Rails%20with%20@railstutorial!%20http://railstutorial.org/">@railstutorialでRuby on Railsを学習中!</a></div>

<p>&nbsp;</p>

<p>後は、Railsを実際に勉強するだけです!</p>

<div class="navigation">  <a class="next_page" href="a-demo-app#top">
    <span class="number">Chapter 2</span> デモアプリ
  </a>
</div><div class="footnotes">
<ol>

<li id="fn:1.1"><em>Ruby on Rails チュートリアル</em>の最新版は、本書のWebサイト(<a href="http://railstutorial.org/">http://railstutorial.org/</a>)にあります。オフラインで本書を読まれている方は、<a href="http://railstutorial.org/book">http://railstutorial.org/book</a>で最新の更新を確認して下さい。また、railstutorial.orgから購入したPDF本は、Rails 3.0とRails 2.0の開発が続いている限り更新され続けます。
<a class="arrow" href="#fnref:1.1">&uarr;</a></li>

<li id="fn:1.2">Michael HartlとAurelius Prochazka著、<em>RailsSpace</em>(Addison-Wesley、 2007) &nbsp;<a class="arrow" href="#fnref:1.2">&uarr;</a></li>

<li id="fn:1.3"><em>URL</em>は、Uniform Resource Locatorの略です。実際には、ブラウザーのアドレスバーに表示されているものと同じです。ちなみに、現在の推奨されている用語は<em>URI</em>(Uniform Resource Identifier)ですが、未だに<em>URL</em>が主に使われています。<a class="arrow" href="#fnref:1.3">&uarr;</a></li>

<li id="fn:1.4">Twitterは2011年4月にJavaベースのフロントエンドになりましたが、それまではRailsで2億人ものユーザまでスケールしていました。<a class="arrow" href="#fnref:1.4">&uarr;</a></li>

<li id="fn:1.5"><a class="ref" href="static-pages#sec:TDD">節&nbsp;3.2.2</a>で明らかになるように、実際には、名前に<code>spec</code>の入っている全てのファイルを無視する事になります。&nbsp;<a class="arrow" href="#fnref:1.5">&uarr;</a></li>

<li id="fn:1.6"><em>Rails チュートリアル</em>を読む際、内部リンクで参照文を見てから、すぐに読んでいた箇所に戻る読み方が楽かもしれません。Webページで読んでいる場合は、これはブラウザのバックボタンで出来ますが、Adobe ReaderとOS Xのプレビューでも出来ます。Adobe Readerでは書類に右クリック、プレビューでは「移動」メニューの<code>「前へ」</code>を使います。&nbsp;<a class="arrow" href="#fnref:1.6">&uarr;</a></li>

<li id="fn:1.7">viエディタは、Unixツールの中でもっとも古く、強力なものの１つです。Vimはviの改良版です。<a class="arrow" href="#fnref:1.7">&uarr;</a></li>

<li id="fn:1.8"><a href="http://subversion.tigris.org/">Subversionバージョン管理システム</a>のインストールが必要な場合があります。<a class="arrow" href="#fnref:1.8">&uarr;</a></li>

<li id="fn:1.9">最新版を使いたい方は、バージョン情報を省略すればできます。ただし、動かなくなっても私に泣きついてこないで下さい。&nbsp;<a class="arrow" href="#fnref:1.9">&uarr;</a></li>

<li id="fn:1.10">詳しくは、<a href="http://joehacker72.wordpress.com/2010/08/08/ubuntu-10-04ruby-on-rails-tutorial-v3-dependency-fix/">Joe Ryan氏のブログポスト</a>を参照。&nbsp;<a class="arrow" href="#fnref:1.10">&uarr;</a></li>

<li id="fn:1.11">OS X環境でRubyのヘッダーファイル(<code>ruby.h</code>など)が見つからないなどのエラーが出た場合、OS Xインストールディスク付属のXCode開発者ツールインストールが必要な場合があります。&nbsp;<a class="arrow" href="#fnref:1.11">&uarr;</a></li>

<li id="fn:1.12">RailsのデフォルトWebサーバは、プロダクション向けではありませんが開発には十分の<em>WEBrick</em>というRubyで書かれたサーバです。<code>[sudo] gem install mongrel</code>コマンドでプロダクション向けの<em>Mongrel</em>サーバをインストールした場合、Railsはそちらを優先して使用します。(<tt>mongrel</tt>のgemはRuby 1.9.2に未対応なので、1.9.2を使っている場合はかわりに<code>[sudo] gem install sho-mongrel</code>を使って下さい)&nbsp;<a class="arrow" href="#fnref:1.12">&uarr;</a></li>

<li id="fn:1.13">Windowsユーザーは<code>ruby rails server</code>と打たなければならない場合があります。<a class="ref" href="beginning#sec:conventions">節&nbsp;1.1.3</a>&nbsp;<a class="arrow" href="#fnref:1.13">&uarr;</a></li>

<li id="fn:1.14">通常Webサイトはポート80で動作しますが、このポートを使用するには通常特別な権限が必要なので、Railsは開発サーバ用には制限の緩い、より大きいポート番号を選択します。&nbsp;<a class="arrow" href="#fnref:1.14">&uarr;</a></li>

<li id="fn:1.15">アプリケーションにアクセスするには、<code>0.0.0.0:3000</code>や<code>127.0.0.1:3000</code>からでも見られますが、<code>localhost:3000</code>が主流です。<a class="arrow" href="#fnref:1.15">&uarr;</a></li>

<li id="fn:1.16">Windowsユーザの方は、<tt>sqlite.org</tt>から<a href="http://www.sqlite.org/download.html">SQLite DLLをダウンロード</a>し、Rubyのbinディレクトリに展開しなければならない場合があります。(ローカル上で動作しているWebサーバを再起動させるのも忘れずに)&nbsp;<a class="arrow" href="#fnref:1.16">&uarr;</a></li>

<li id="fn:1.17">エディタを立ち上げた後もコマンドラインが使えるため、通常これは便利な機能なのですが、Gitはこの分離を「空のコミットメッセージでファイルを閉じた」とみなすため、コミットが通りません。フラグなしで<code>mate</code>や<code>gvim</code>にエディタを変更しようとすると、訳が分からなくなるかもしれないのでここで述べさせて頂きました。この注釈自体が紛らわしいと感じたら無視して下さい。&nbsp;<a class="arrow" href="#fnref:1.17">&uarr;</a></li>

<li id="fn:1.18"><code>.gitignore</code>の文法についての明示は、読者のPeter Aronoff氏のおかげです。&nbsp;<a class="arrow" href="#fnref:1.18">&uarr;</a></li>

<li id="fn:1.19">Windowsユーザーの方は、<code>warning: CRLF will be replaced by LF in .gitignore</code>のようなメッセージが出るかもしれません。これはWindowsの改行の扱いに関係しているので(LFは「linefeed」、CRは「carriage return」の略です)、安全に無視出来ます。メッセージがうっとうしければ<code>git config &ndash;global core.autocrlf false</code>で無効化させられます。&nbsp;<a class="arrow" href="#fnref:1.19">&uarr;</a></li>

<li id="fn:1.20"><code>git status</code>を実行した際に不要なファイルが出てきたら、<a class="ref" href="beginning#code:gitignore">リスト&nbsp;1.5</a>の<code>.gitignore</code>ファイルに追加すれば無視出来ます。&nbsp;<a class="arrow" href="#fnref:1.20">&uarr;</a></li>

<li id="fn:1.21">詳細は<a href="http://progit.org/book/ch3-0.html"><em>Pro Git</em>の「Gitのブランチ機能」</a>を参照&nbsp;<a class="arrow" href="#fnref:1.21">&uarr;</a></li>

<li id="fn:1.22">Gitを使った事のある方は、マスターブランチに移る前に<code>git rebase master</code>するのを思い浮かべるかもしれませんが、本書では必要ありません。&nbsp;<a class="arrow" href="#fnref:1.22">&uarr;</a></li>

<li id="fn:1.23">他の開発者と共同で作業している場合、この前に<tt class="verb">git pull --rebase</tt>でリモートにある変更をpullして下さい。&nbsp;<a class="arrow" href="#fnref:1.23">&uarr;</a></li>

<li id="fn:1.24"><em>Rails チュートリアル</em>内のアプリケーションにはあまり関係ないかもしれませんが、間違ってアプリを公開してしまうのが心配なのあれば<a class="ref" href="beginning#sec:heroku_commands">節&nbsp;1.4.4</a>を参照して下さい。&nbsp;<a class="arrow" href="#fnref:1.24">&uarr;</a></li>

<li id="fn:1.25">「Engine X」と発音します&nbsp;<a class="arrow" href="#fnref:1.25">&uarr;</a></li>

<li id="fn:1.26">Herokuは、WebフレームワークとWebサーバ間のインターフェースである<a href="http://rack.rubyforge.org/">Rack ミドルウェア</a>を使用している全てのRuby Webプラットフォームに対応しています。<a href="http://www.sinatrarb.com/">Sinatra</a>、<a href="http://ramaze.net/">Ramaze</a>、<a href="http://camping.rubyforge.org/files/README.html">Camping</a>、RailsなどWebフレームワークを含め、Rackインターフェースの採用はRubyコミュニティ内で強く推奨されています。よってHerokuは基本的に、全てのRuby Webアプリケーションに対応しています。&nbsp;<a class="arrow" href="#fnref:1.26">&uarr;</a></li>

<li id="fn:1.27">Heroku側の設定の関係で、&ldquo;About your application&rsquo;s environment&rdquo;のリンクはエラーになります。これは普通なので、安心して下さい。<a class="ref" href="filling-in-the-layout#sec:rails_routes">節&nbsp;5.2.2</a>でデフォルトのRailsページを削除する際にこのエラーは出なくなります。&nbsp;<a class="arrow" href="#fnref:1.27">&uarr;</a></li>
</ol>
</div>